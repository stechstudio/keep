{"version":3,"file":"app.CnbSgcwP.js","sources":["../../frontend/src/components/Toast.vue","../../frontend/src/components/ToastContainer.vue","../../frontend/src/composables/useKeyboardShortcuts.js","../../frontend/src/App.vue","../../frontend/src/components/VaultStageSelector.vue","../../frontend/src/components/SecretValue.vue","../../frontend/src/services/api.js","../../frontend/src/composables/useSecrets.js","../../frontend/src/components/SecretDialog.vue","../../frontend/src/components/RenameDialog.vue","../../frontend/src/components/CopyToStageDialog.vue","../../frontend/src/components/HistoryDialog.vue","../../frontend/src/components/DeleteConfirmDialog.vue","../../frontend/src/components/SecretActionsMenu.vue","../../frontend/src/components/ImportWizard.vue","../../frontend/src/components/ExportModal.vue","../../frontend/src/components/TableActionsMenu.vue","../../frontend/src/composables/useVault.js","../../frontend/src/components/SecretsTable.vue","../../frontend/src/components/DiffView.vue","../../frontend/src/components/DeleteConfirmationModal.vue","../../frontend/src/components/SettingsView.vue","../../frontend/src/components/CreateTemplateModal.vue","../../frontend/src/components/PlaceholderSelector.vue","../../frontend/src/components/TemplateEditorModal.vue","../../frontend/src/components/TemplateTesterModal.vue","../../frontend/src/components/TemplateProcessorModal.vue","../../frontend/src/router.js","../../frontend/src/components/TemplatesView.vue","../../frontend/src/main.js"],"sourcesContent":["<template>\n  <div\n    :class=\"[\n      'pointer-events-auto relative flex w-full items-center justify-between rounded-lg border p-4 shadow-lg transition-all',\n      variantClasses\n    ]\"\n  >\n    <div class=\"flex items-start space-x-3\">\n      <div v-if=\"icon\" class=\"flex-shrink-0 mt-0.5\">\n        <component :is=\"icon\" class=\"h-5 w-5\" />\n      </div>\n      <div class=\"flex-1\">\n        <div v-if=\"toast.title\" class=\"font-semibold text-sm\">\n          {{ toast.title }}\n        </div>\n        <div v-if=\"toast.description\" class=\"text-sm mt-1 opacity-90\">\n          {{ toast.description }}\n        </div>\n      </div>\n    </div>\n    <button\n      @click=\"$emit('dismiss', toast.id)\"\n      class=\"flex-shrink-0 ml-4 inline-flex rounded-md p-1.5 focus:outline-none focus:ring-2 focus:ring-offset-2 transition-colors hover:bg-accent\"\n    >\n      <svg class=\"h-4 w-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n        <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M6 18L18 6M6 6l12 12\" />\n      </svg>\n    </button>\n  </div>\n</template>\n\n<script setup>\nimport { computed } from 'vue'\n\nconst props = defineProps({\n  toast: {\n    type: Object,\n    required: true\n  }\n})\n\ndefineEmits(['dismiss'])\n\nconst variantClasses = computed(() => {\n  const variants = {\n    default: 'bg-card border-border text-card-foreground',\n    success: 'bg-green-950 border-green-900 text-green-100',\n    destructive: 'bg-red-950 border-red-900 text-red-100',\n  }\n  return variants[props.toast.variant] || variants.default\n})\n\nconst icon = computed(() => {\n  if (props.toast.variant === 'success') {\n    return {\n      template: `\n        <svg class=\"text-green-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n          <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z\" />\n        </svg>\n      `\n    }\n  }\n  if (props.toast.variant === 'destructive') {\n    return {\n      template: `\n        <svg class=\"text-red-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n          <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />\n        </svg>\n      `\n    }\n  }\n  return null\n})\n</script>","<template>\n  <div class=\"fixed bottom-0 right-0 z-50 p-4 space-y-4 max-w-md w-full pointer-events-none\">\n    <TransitionGroup name=\"toast\" tag=\"div\">\n      <Toast\n        v-for=\"toast in toasts\"\n        :key=\"toast.id\"\n        :toast=\"toast\"\n        @dismiss=\"dismiss\"\n      />\n    </TransitionGroup>\n  </div>\n</template>\n\n<script setup>\nimport { useToast } from '../composables/useToast'\nimport Toast from './Toast.vue'\n\nconst { toasts, dismiss } = useToast()\n</script>\n\n<style scoped>\n.toast-enter-active,\n.toast-leave-active {\n  transition: all 0.3s ease;\n}\n\n.toast-enter-from {\n  transform: translateX(100%);\n  opacity: 0;\n}\n\n.toast-leave-to {\n  transform: translateX(100%);\n  opacity: 0;\n}\n\n.toast-move {\n  transition: transform 0.3s ease;\n}\n</style>","import { onMounted, onUnmounted, ref } from 'vue'\n\n// Global registry for keyboard shortcut handlers\nconst handlers = ref({\n  search: null,\n  closeModal: [],\n  toggleMask: null\n})\n\nexport function useKeyboardShortcuts() {\n  // Register handlers\n  function registerSearchHandler(handler) {\n    handlers.value.search = handler\n  }\n  \n  function registerModalCloseHandler(handler) {\n    handlers.value.closeModal.push(handler)\n    \n    // Return cleanup function\n    return () => {\n      const index = handlers.value.closeModal.indexOf(handler)\n      if (index > -1) {\n        handlers.value.closeModal.splice(index, 1)\n      }\n    }\n  }\n  \n  function registerMaskToggleHandler(handler) {\n    handlers.value.toggleMask = handler\n  }\n  \n  // Global keyboard event handler\n  function handleKeydown(event) {\n    // Don't trigger shortcuts when typing in inputs or textareas\n    if (event.target.tagName === 'INPUT' || \n        event.target.tagName === 'TEXTAREA' || \n        event.target.tagName === 'SELECT') {\n      \n      // ESC should still work to close modals even when in an input\n      if (event.key === 'Escape') {\n        event.preventDefault()\n        // Call all registered modal close handlers\n        handlers.value.closeModal.forEach(handler => handler())\n      }\n      return\n    }\n    \n    // '/' to focus search\n    if (event.key === '/' && !event.metaKey && !event.ctrlKey) {\n      event.preventDefault()\n      if (handlers.value.search) {\n        handlers.value.search()\n      }\n    }\n    \n    // 'ESC' to close modals\n    if (event.key === 'Escape') {\n      event.preventDefault()\n      // Call all registered modal close handlers\n      handlers.value.closeModal.forEach(handler => handler())\n    }\n    \n    // 'm' to toggle mask/unmask\n    if (event.key === 'm' && !event.metaKey && !event.ctrlKey) {\n      event.preventDefault()\n      if (handlers.value.toggleMask) {\n        handlers.value.toggleMask()\n      }\n    }\n  }\n  \n  // Set up global listener (only once)\n  let isListenerSetup = false\n  \n  function setupGlobalListener() {\n    if (!isListenerSetup) {\n      document.addEventListener('keydown', handleKeydown)\n      isListenerSetup = true\n    }\n  }\n  \n  function teardownGlobalListener() {\n    if (isListenerSetup) {\n      document.removeEventListener('keydown', handleKeydown)\n      isListenerSetup = false\n    }\n  }\n  \n  return {\n    registerSearchHandler,\n    registerModalCloseHandler,\n    registerMaskToggleHandler,\n    setupGlobalListener,\n    teardownGlobalListener\n  }\n}","<template>\n  <div class=\"min-h-screen bg-background text-foreground\">\n    <!-- Toast Notifications -->\n    <ToastContainer />\n    \n    <!-- Navigation Bar -->\n    <nav class=\"border-b border-border\">\n      <div class=\"max-w-full px-4 sm:px-6 lg:px-8\">\n        <div class=\"flex items-center justify-between h-16\">\n          <!-- Logo & Title -->\n          <div class=\"flex items-center w-1/3\">\n<!--            <svg class=\"w-8 h-8 mr-3 text-primary\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\">-->\n<!--              <rect x=\"3\" y=\"11\" width=\"18\" height=\"10\" rx=\"2\" ry=\"2\"/>-->\n<!--              <path d=\"M7 11V7a5 5 0 0110 0v4\"/>-->\n<!--            </svg>-->\n            <div class=\"size-9 pl-3 pr-2 rounded bg-muted mr-3 flex items-center justify-center text-primary\">\n              <svg fill=\"none\" height=\"100%\" viewBox=\"0 0 59 70\" width=\"59\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"m58.4476 69.14c-10.35 0-23.67-12.33-31.41-22.05-5.13-6.39-7.11-8.91-9.45-11.7l-4.32 4.32v25.29h-12.599982v-64.620005h12.599982v32.580005l31.5-32.580005h7.2l-24.21 24.570005z\" fill=\"currentColor\"/></svg>\n            </div>\n            <span class=\"text-xl font-semibold opacity-75\">{{ appName }} Secrets</span>\n          </div>\n\n          <!-- Pill Navigation -->\n          <div class=\"flex items-center space-x-2 bg-muted rounded-full p-1\">\n            <router-link\n              v-for=\"tab in tabs\"\n              :key=\"tab.id\"\n              :to=\"tab.path\"\n              v-slot=\"{ isActive }\"\n              custom\n            >\n              <button\n                @click=\"$router.push(tab.path)\"\n                :class=\"[\n                  'px-4 py-1.5 rounded-full text-sm font-medium transition-colors',\n                  isActive\n                    ? 'bg-background text-foreground shadow-sm'\n                    : 'text-muted-foreground hover:text-foreground'\n                ]\"\n              >\n                {{ tab.label }}\n              </button>\n            </router-link>\n          </div>\n          <div class=\"w-1/3 text-right\">\n            <a href=\"https://github.com/stechstudio/keep\" target=\"_blank\" class=\"text-white/50 hover:text-white\">Keep v{{ keepVersion }}</a>\n          </div>\n        </div>\n      </div>\n    </nav>\n\n    <!-- Main Content -->\n    <main class=\"max-w-full px-4 sm:px-6 lg:px-8 py-6\">\n      <router-view />\n    </main>\n  </div>\n</template>\n\n<script setup>\nimport { ref, onMounted, onUnmounted } from 'vue'\nimport ToastContainer from './components/ToastContainer.vue'\nimport logoUrl from './assets/logo.svg'\nimport { useKeyboardShortcuts } from './composables/useKeyboardShortcuts'\n\nconst tabs = [\n  { id: 'secrets', label: 'Secrets', path: '/secrets' },\n  { id: 'templates', label: 'Templates', path: '/templates' },\n  { id: 'diff', label: 'Compare', path: '/diff' },\n  { id: 'settings', label: 'Settings', path: '/settings' }\n]\n\nconst appName = ref('Keep')\nconst keepVersion = ref('')\n\n// Set up global keyboard shortcuts\nconst { setupGlobalListener, teardownGlobalListener } = useKeyboardShortcuts()\n\nonMounted(async () => {\n  setupGlobalListener()\n  await loadSettings()\n})\n\nonUnmounted(() => {\n  teardownGlobalListener()\n})\n\nasync function loadSettings() {\n  try {\n    const settings = await window.$api.getSettings()\n    appName.value = settings.app_name || 'Keep'\n    keepVersion.value = settings.keep_version || ''\n  } catch (error) {\n    console.error('Failed to load settings:', error)\n  }\n}\n</script>","<template>\n  <div class=\"flex items-center space-x-3\">\n    <!-- Vault Selector -->\n    <div class=\"relative\">\n      <button\n        @click=\"vaultOpen = !vaultOpen\"\n        class=\"flex items-center space-x-2 px-3 pl-0 py-1.5 transition-colors\"\n      >\n        <span>{{ vaultDisplay || 'Select Vault' }}</span>\n        <svg class=\"w-3 h-3\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n          <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M19 9l-7 7-7-7\" />\n        </svg>\n      </button>\n      \n      <div v-if=\"vaultOpen\" class=\"absolute top-full mt-1 bg-popover border border-border rounded-md shadow-lg z-10\">\n        <div class=\"py-1\">\n          <button\n            v-for=\"v in vaults\"\n            :key=\"v.slug || v.name || v\"\n            @click=\"selectVault(v.slug || v.name || v)\"\n            :class=\"[\n              'w-full text-left px-3 py-2 text-sm hover:bg-accent transition-colors whitespace-nowrap',\n              vault === (v.slug || v.name || v) ? 'bg-white/10' : ''\n            ]\"\n          >\n            {{ v.display || v }}\n          </button>\n        </div>\n      </div>\n    </div>\n\n    <div class=\"text-lg text-white/30 font-bold pr-3\">/</div>\n\n    <!-- Stage Selector -->\n    <div class=\"relative\">\n      <button\n        @click=\"stageOpen = !stageOpen\"\n        class=\"flex items-center space-x-2 px-3 pl-0 py-1.5 transition-colors\"\n      >\n        <span>{{ stage || 'Select Stage' }}</span>\n        <svg class=\"w-3 h-3\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n          <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M19 9l-7 7-7-7\" />\n        </svg>\n      </button>\n      \n      <div v-if=\"stageOpen\" class=\"absolute top-full mt-1 w-48 bg-popover border border-border rounded-md shadow-lg z-10\">\n        <div class=\"py-1\">\n          <button\n            v-for=\"s in stages\"\n            :key=\"s\"\n            @click=\"selectStage(s)\"\n            :class=\"[\n              'w-full text-left px-3 py-2 text-sm hover:bg-accent transition-colors',\n              stage === s ? 'bg-white/10' : ''\n            ]\"\n          >\n            {{ s }}\n          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { ref, computed } from 'vue'\n\nconst props = defineProps({\n  vault: String,\n  stage: String,\n  vaults: Array,\n  stages: Array\n})\n\nconst emit = defineEmits(['update:vault', 'update:stage'])\n\nconst vaultOpen = ref(false)\nconst stageOpen = ref(false)\n\n// Get display name for selected vault\nconst vaultDisplay = computed(() => {\n  if (!props.vault) return ''\n  const vaultObj = props.vaults?.find(v => \n    (typeof v === 'object' ? (v.slug || v.name) : v) === props.vault\n  )\n  return vaultObj?.display || props.vault\n})\n\nfunction selectVault(v) {\n  emit('update:vault', v)\n  vaultOpen.value = false\n}\n\nfunction selectStage(s) {\n  emit('update:stage', s)\n  stageOpen.value = false\n}\n\n// Close dropdowns when clicking outside\ndocument.addEventListener('click', (e) => {\n  if (!e.target.closest('.relative')) {\n    vaultOpen.value = false\n    stageOpen.value = false\n  }\n})\n</script>","<template>\n  <div class=\"flex items-center space-x-2\">\n    <span class=\"font-mono text-sm\">\n      {{ displayValue }}\n    </span>\n    <button\n      @click=\"$emit('toggle')\"\n      class=\"p-1 rounded hover:bg-muted transition-colors\"\n      :title=\"masked ? 'Show value' : 'Hide value'\"\n    >\n      <svg v-if=\"masked\" class=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n        <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M15 12a3 3 0 11-6 0 3 3 0 016 0z\" />\n        <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z\" />\n      </svg>\n      <svg v-else class=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n        <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21\" />\n      </svg>\n    </button>\n  </div>\n</template>\n\n<script setup>\nimport { computed } from 'vue'\nimport { maskValue } from '../utils/formatters'\n\nconst props = defineProps({\n  value: String,\n  masked: {\n    type: Boolean,\n    default: true\n  }\n})\n\ndefineEmits(['toggle'])\n\nconst displayValue = computed(() => {\n  if (!props.masked) return props.value\n  return maskValue(props.value)\n})\n</script>","// API client for Keep server\nclass ApiClient {\n  constructor() {\n    this.baseUrl = ''\n    this.token = window.KEEP_AUTH_TOKEN\n  }\n\n  async request(path, options = {}) {\n    const response = await fetch(`${this.baseUrl}/api${path}`, {\n      ...options,\n      headers: {\n        'X-Auth-Token': this.token,\n        'Content-Type': 'application/json',\n        ...options.headers,\n      },\n    })\n\n    if (!response.ok) {\n      const error = await response.json().catch(() => ({ error: 'Request failed' }))\n      throw new Error(error.error || `HTTP ${response.status}`)\n    }\n\n    return response.json()\n  }\n\n  // Generic HTTP methods for flexibility\n  async get(path) {\n    return this.request(path)\n  }\n\n  async post(path, body = {}) {\n    return this.request(path, {\n      method: 'POST',\n      body: JSON.stringify(body)\n    })\n  }\n\n  async put(path, body = {}) {\n    return this.request(path, {\n      method: 'PUT', \n      body: JSON.stringify(body)\n    })\n  }\n\n  async delete(path) {\n    return this.request(path, {\n      method: 'DELETE'\n    })\n  }\n\n  // Secrets\n  async listSecrets(vault, stage, unmask = false) {\n    return this.request(`/secrets?vault=${vault}&stage=${stage}&unmask=${unmask}`)\n  }\n\n  async getSecret(key, vault, stage, unmask = false) {\n    return this.request(`/secrets/${encodeURIComponent(key)}?vault=${vault}&stage=${stage}&unmask=${unmask}`)\n  }\n\n  async createSecret(key, value, vault, stage) {\n    return this.request('/secrets', {\n      method: 'POST',\n      body: JSON.stringify({ key, value, vault, stage })\n    })\n  }\n\n  async updateSecret(key, value, vault, stage) {\n    return this.request(`/secrets/${encodeURIComponent(key)}`, {\n      method: 'PUT',\n      body: JSON.stringify({ value, vault, stage })\n    })\n  }\n\n  async deleteSecret(key, vault, stage) {\n    return this.request(`/secrets/${encodeURIComponent(key)}`, {\n      method: 'DELETE',\n      body: JSON.stringify({ vault, stage })\n    })\n  }\n\n  async renameSecret(oldKey, newKey, vault, stage) {\n    return this.request(`/secrets/${encodeURIComponent(oldKey)}/rename`, {\n      method: 'POST',\n      body: JSON.stringify({ newKey, vault, stage })\n    })\n  }\n\n  async copySecretToStage(key, targetStage, targetVault, sourceStage, sourceVault) {\n    return this.request(`/secrets/${encodeURIComponent(key)}/copy-to-stage?vault=${sourceVault}&stage=${sourceStage}`, {\n      method: 'POST',\n      body: JSON.stringify({ targetStage, targetVault })\n    })\n  }\n\n  async searchSecrets(query, vault, stage, unmask = false) {\n    return this.request(`/search?q=${encodeURIComponent(query)}&vault=${vault}&stage=${stage}&unmask=${unmask}`)\n  }\n\n  async getSecretHistory(key, vault, stage, limit = 10, unmask = false) {\n    return this.request(`/secrets/${encodeURIComponent(key)}/history?vault=${vault}&stage=${stage}&limit=${limit}&unmask=${unmask}`)\n  }\n\n  // Settings & Config\n  async getSettings() {\n    return this.request('/settings')\n  }\n\n  async updateSettings(settings) {\n    return this.request('/settings', {\n      method: 'PUT',\n      body: JSON.stringify(settings)\n    })\n  }\n\n  // Vaults & Stages\n  async listVaults() {\n    return this.request('/vaults')\n  }\n\n  async addVault(vault) {\n    return this.request('/vaults', {\n      method: 'POST',\n      body: JSON.stringify(vault)\n    })\n  }\n\n  async updateVault(slug, vault) {\n    return this.request(`/vaults/${slug}`, {\n      method: 'PUT',\n      body: JSON.stringify(vault)\n    })\n  }\n\n  async deleteVault(slug) {\n    return this.request(`/vaults/${slug}`, {\n      method: 'DELETE'\n    })\n  }\n\n  async listStages() {\n    return this.request('/stages')\n  }\n\n  async addStage(stage) {\n    return this.request('/stages', {\n      method: 'POST',\n      body: JSON.stringify({ stage })\n    })\n  }\n\n  async removeStage(stage) {\n    return this.request('/stages', {\n      method: 'DELETE',\n      body: JSON.stringify({ stage })\n    })\n  }\n\n  async verifyVaults() {\n    return this.request('/verify', { method: 'POST' })\n  }\n\n  // Diff & Export\n  async getDiff(stages = null, vaults = null) {\n    let query = '/diff?'\n    if (stages) query += `stages=${stages.join(',')}&`\n    if (vaults) query += `vaults=${vaults.join(',')}`\n    return this.request(query)\n  }\n\n  async exportSecrets(vault, stage, format = 'env') {\n    return this.request('/export', {\n      method: 'POST',\n      body: JSON.stringify({ vault, stage, format })\n    })\n  }\n\n  // Import\n  async analyzeImport({ content, vault, stage, only = null, except = null }) {\n    return this.request('/import/analyze', {\n      method: 'POST',\n      body: JSON.stringify({ content, vault, stage, only, except })\n    })\n  }\n\n  async executeImport({ content, vault, stage, strategy, only = null, except = null, dry_run = false }) {\n    return this.request('/import/execute', {\n      method: 'POST',\n      body: JSON.stringify({ content, vault, stage, strategy, only, except, dry_run })\n    })\n  }\n}\n\nexport const api = new ApiClient()","import { ref } from 'vue'\nimport { api } from '../services/api'\n\nexport function useSecrets() {\n  const secrets = ref([])\n  const loading = ref(false)\n  const error = ref(null)\n\n  async function loadSecrets(vault, stage, unmask = false) {\n    loading.value = true\n    error.value = null\n    try {\n      const response = await api.listSecrets(vault, stage, unmask)\n      secrets.value = response.secrets\n      return secrets.value\n    } catch (err) {\n      error.value = err.message\n      secrets.value = []\n      throw err\n    } finally {\n      loading.value = false\n    }\n  }\n\n  async function createSecret(key, value, vault, stage) {\n    loading.value = true\n    error.value = null\n    try {\n      const response = await api.createSecret(key, value, vault, stage)\n      // Don't call loadSecrets here - let the component handle refresh\n      return response\n    } catch (err) {\n      error.value = err.message\n      throw err\n    } finally {\n      loading.value = false\n    }\n  }\n\n  async function updateSecret(key, value, vault, stage) {\n    loading.value = true\n    error.value = null\n    try {\n      const response = await api.updateSecret(key, value, vault, stage)\n      // Don't call loadSecrets here - let the component handle refresh\n      return response\n    } catch (err) {\n      error.value = err.message\n      throw err\n    } finally {\n      loading.value = false\n    }\n  }\n\n  async function deleteSecret(key, vault, stage) {\n    loading.value = true\n    error.value = null\n    try {\n      const response = await api.deleteSecret(key, vault, stage)\n      // Don't call loadSecrets here - let the component handle refresh\n      return response\n    } catch (err) {\n      error.value = err.message\n      throw err\n    } finally {\n      loading.value = false\n    }\n  }\n\n  async function renameSecret(oldKey, newKey, vault, stage) {\n    loading.value = true\n    error.value = null\n    try {\n      const response = await api.renameSecret(oldKey, newKey, vault, stage)\n      // Don't call loadSecrets here - let the component handle refresh\n      return response\n    } catch (err) {\n      error.value = err.message\n      throw err\n    } finally {\n      loading.value = false\n    }\n  }\n\n  async function copySecretToStage(key, targetStage, targetVault, sourceStage, sourceVault) {\n    loading.value = true\n    error.value = null\n    try {\n      const response = await api.copySecretToStage(\n        key, targetStage, targetVault, sourceStage, sourceVault\n      )\n      return response\n    } catch (err) {\n      error.value = err.message\n      throw err\n    } finally {\n      loading.value = false\n    }\n  }\n\n  async function searchSecrets(query, vault, stage, unmask = false) {\n    loading.value = true\n    error.value = null\n    try {\n      const response = await api.searchSecrets(query, vault, stage, unmask)\n      secrets.value = response.secrets\n      return secrets.value\n    } catch (err) {\n      error.value = err.message\n      secrets.value = []\n      throw err\n    } finally {\n      loading.value = false\n    }\n  }\n\n  async function getSecretHistory(key, vault, stage, limit = 10, unmask = false) {\n    loading.value = true\n    error.value = null\n    try {\n      return await api.getSecretHistory(key, vault, stage, limit, unmask)\n    } catch (err) {\n      error.value = err.message\n      throw err\n    } finally {\n      loading.value = false\n    }\n  }\n\n  function clearError() {\n    error.value = null\n  }\n\n  return {\n    secrets,\n    loading,\n    error,\n    loadSecrets,\n    createSecret,\n    updateSecret,\n    deleteSecret,\n    renameSecret,\n    copySecretToStage,\n    searchSecrets,\n    getSecretHistory,\n    clearError\n  }\n}","<template>\n  <div class=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50\" @click.self=\"$emit('close')\">\n    <div class=\"bg-card border border-border rounded-lg p-6 w-full max-w-md\">\n      <h2 class=\"text-lg font-semibold mb-4\">\n        {{ secret ? 'Edit Secret' : 'Add Secret' }}\n      </h2>\n      \n      <form @submit.prevent=\"save\">\n        <div class=\"space-y-4\">\n          <div>\n            <label class=\"block text-sm font-medium mb-1\">Key</label>\n            <input\n              v-model=\"form.key\"\n              type=\"text\"\n              :disabled=\"!!secret\"\n              :class=\"[\n                'w-full px-3 py-2 bg-input border rounded-md text-sm focus:outline-none focus:ring-2 disabled:opacity-50 disabled:cursor-not-allowed',\n                keyError ? 'border-red-500 focus:ring-red-500' : 'border-border focus:ring-ring'\n              ]\"\n              placeholder=\"SECRET_KEY\"\n              required\n            />\n            <p v-if=\"keyError\" class=\"mt-1 text-xs text-red-500\">{{ keyError }}</p>\n          </div>\n          \n          <div>\n            <label class=\"block text-sm font-medium mb-1\">Value</label>\n            <textarea\n              v-model=\"form.value\"\n              rows=\"4\"\n              class=\"w-full px-3 py-2 bg-input border border-border rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-ring font-mono\"\n              placeholder=\"Secret value...\"\n              required\n            />\n          </div>\n          \n          <div class=\"text-xs text-muted-foreground\">\n            Vault: <span class=\"font-medium\">{{ vault }}</span> • \n            Stage: <span class=\"font-medium\">{{ stage }}</span>\n          </div>\n          \n          <div v-if=\"saveError\" class=\"p-3 bg-red-50 dark:bg-red-950/20 border border-red-200 dark:border-red-900 rounded-md\">\n            <p class=\"text-sm text-red-600 dark:text-red-400\">{{ saveError }}</p>\n          </div>\n        </div>\n        \n        <div class=\"flex justify-end space-x-3 mt-6\">\n          <button\n            type=\"button\"\n            @click=\"$emit('close')\"\n            class=\"px-4 py-2 text-sm font-medium border border-border rounded-md hover:bg-muted transition-colors\"\n          >\n            Cancel\n          </button>\n          <button\n            type=\"submit\"\n            :disabled=\"!validateKey || loading\"\n            class=\"px-4 py-2 text-sm font-medium bg-primary text-primary-foreground rounded-md hover:bg-primary/90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed\"\n          >\n            {{ loading ? 'Saving...' : (secret ? 'Save' : 'Add') }}\n          </button>\n        </div>\n      </form>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { reactive, watch, ref, computed } from 'vue'\nimport { useSecrets } from '../composables/useSecrets'\nimport { useToast } from '../composables/useToast'\n\nconst props = defineProps({\n  secret: Object,\n  vault: String,\n  stage: String,\n  initialKey: String\n})\n\nconst emit = defineEmits(['success', 'close'])\n\nconst toast = useToast()\nconst { createSecret, updateSecret } = useSecrets()\n\nconst form = reactive({\n  key: '',\n  value: ''\n})\n\nconst keyError = ref('')\nconst saveError = ref('')\nconst loading = ref(false)\n\n// Validate key on input\nconst validateKey = computed(() => {\n  if (!form.key) {\n    keyError.value = ''\n    return true\n  }\n  \n  // Check for spaces\n  if (form.key.includes(' ')) {\n    keyError.value = 'No spaces allowed'\n    return false\n  }\n  \n  // Check for other invalid characters (basic validation)\n  if (!/^[A-Za-z0-9_\\-/.]+$/.test(form.key)) {\n    keyError.value = 'Only letters, numbers, _, -, /, . allowed'\n    return false\n  }\n  \n  keyError.value = ''\n  return true\n})\n\nwatch(() => props.secret, (newSecret) => {\n  if (newSecret) {\n    form.key = newSecret.key\n    form.value = newSecret.value\n  } else {\n    form.key = props.initialKey || ''\n    form.value = ''\n  }\n}, { immediate: true })\n\nwatch(() => props.initialKey, (newKey) => {\n  if (!props.secret && newKey) {\n    form.key = newKey\n  }\n}, { immediate: true })\n\n// Trigger validation as user types\nwatch(() => form.key, () => {\n  validateKey.value\n})\n\nasync function save() {\n  if (!validateKey.value || loading.value) {\n    return\n  }\n  \n  saveError.value = ''\n  loading.value = true\n  \n  try {\n    if (props.secret) {\n      await updateSecret(form.key, form.value, props.vault, props.stage)\n      toast.success('Secret updated', `Secret '${form.key}' has been updated successfully`)\n    } else {\n      await createSecret(form.key, form.value, props.vault, props.stage)\n      toast.success('Secret created', `Secret '${form.key}' has been created successfully`)\n    }\n    emit('success')\n    emit('close')\n  } catch (error) {\n    // Display error in the modal\n    saveError.value = error.message || 'Failed to save secret'\n    console.error('Failed to save secret:', error)\n  } finally {\n    loading.value = false\n  }\n}\n</script>","<template>\n  <div class=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\n    <div class=\"bg-card border border-border rounded-lg p-6 w-96 max-w-full\">\n      <h2 class=\"text-lg font-semibold mb-4\">Rename Secret</h2>\n      \n      <div class=\"mb-4\">\n        <label class=\"block text-sm font-medium mb-2\">Current Key</label>\n        <input\n          :value=\"currentKey\"\n          disabled\n          class=\"w-full px-3 py-2 bg-muted border border-border rounded-md text-sm opacity-60\"\n        />\n      </div>\n      \n      <div class=\"mb-6\">\n        <label class=\"block text-sm font-medium mb-2\">New Key</label>\n        <input\n          v-model=\"newKey\"\n          @keyup.enter=\"handleRename\"\n          type=\"text\"\n          placeholder=\"Enter new key name\"\n          :class=\"[\n            'w-full px-3 py-2 bg-input border rounded-md text-sm focus:outline-none focus:ring-2',\n            (keyError || error) ? 'border-red-500 focus:ring-red-500' : 'border-border focus:ring-ring'\n          ]\"\n        />\n        <p v-if=\"keyError\" class=\"mt-1 text-xs text-red-500\">{{ keyError }}</p>\n        <p v-if=\"error && !keyError\" class=\"mt-2 text-sm text-red-500\">{{ error }}</p>\n      </div>\n      \n      <div class=\"flex justify-end space-x-3\">\n        <button\n          @click=\"$emit('close')\"\n          class=\"px-4 py-2 text-sm border border-border rounded-md hover:bg-accent transition-colors\"\n        >\n          Cancel\n        </button>\n        <button\n          @click=\"handleRename\"\n          :disabled=\"!isValid || loading\"\n          class=\"px-4 py-2 text-sm bg-primary text-primary-foreground rounded-md hover:bg-primary/90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed\"\n        >\n          {{ loading ? 'Renaming...' : 'Rename' }}\n        </button>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { ref, computed, watch } from 'vue'\nimport { useSecrets } from '../composables/useSecrets'\nimport { useToast } from '../composables/useToast'\n\nconst props = defineProps({\n  currentKey: {\n    type: String,\n    required: true\n  },\n  vault: {\n    type: String,\n    required: true\n  },\n  stage: {\n    type: String,\n    required: true\n  }\n})\n\nconst emit = defineEmits(['close', 'success'])\n\nconst toast = useToast()\nconst { renameSecret } = useSecrets()\n\nconst newKey = ref(props.currentKey)\nconst keyError = ref('')\nconst error = ref('')\nconst loading = ref(false)\n\n// Validate key on input\nconst validateKey = computed(() => {\n  const key = newKey.value.trim()\n  \n  if (!key) {\n    keyError.value = ''\n    return false\n  }\n  \n  // Check if unchanged\n  if (key === props.currentKey) {\n    keyError.value = ''\n    return false\n  }\n  \n  // Check for spaces\n  if (key.includes(' ')) {\n    keyError.value = 'No spaces allowed'\n    return false\n  }\n  \n  // Check for other invalid characters (same validation as SecretDialog)\n  if (!/^[A-Za-z0-9_\\-/.]+$/.test(key)) {\n    keyError.value = 'Only letters, numbers, _, -, /, . allowed'\n    return false\n  }\n  \n  keyError.value = ''\n  return true\n})\n\nconst isValid = computed(() => {\n  return validateKey.value\n})\n\n// Trigger validation as user types\nwatch(() => newKey.value, () => {\n  validateKey.value\n})\n\nasync function handleRename() {\n  if (!isValid.value || loading.value) return\n  \n  error.value = ''\n  loading.value = true\n  \n  try {\n    await renameSecret(props.currentKey, newKey.value.trim(), props.vault, props.stage)\n    toast.success('Secret renamed', `Secret renamed from '${props.currentKey}' to '${newKey.value.trim()}'`)\n    emit('success')\n    emit('close')\n  } catch (err) {\n    // Display error in the modal\n    error.value = err.message || 'Failed to rename secret'\n    console.error('Failed to rename secret:', err)\n  } finally {\n    loading.value = false\n  }\n}\n</script>","<template>\n  <div class=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\n    <div class=\"bg-card border border-border rounded-lg p-6 w-96 max-w-full\">\n      <h2 class=\"text-lg font-semibold mb-4\">Copy Secret</h2>\n      \n      <div class=\"mb-4\">\n        <label class=\"block text-sm font-medium mb-2\">Secret Key</label>\n        <input\n          :value=\"secretKey\"\n          disabled\n          class=\"w-full px-3 py-2 bg-muted border border-border rounded-md text-sm opacity-60\"\n        />\n      </div>\n      \n      <div class=\"mb-4\">\n        <label class=\"block text-sm font-medium mb-2\">From</label>\n        <input\n          :value=\"`${currentVault} / ${currentStage}`\"\n          disabled\n          class=\"w-full px-3 py-2 bg-muted border border-border rounded-md text-sm opacity-60\"\n        />\n      </div>\n      \n      <div class=\"mb-6\">\n        <label class=\"block text-sm font-medium mb-2\">Copy To</label>\n        <select\n          v-model=\"targetCombination\"\n          class=\"w-full px-3 py-2 bg-input border border-border rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-ring\"\n        >\n          <option value=\"\">Select destination...</option>\n          <option\n            v-for=\"combo in availableCombinations\"\n            :key=\"combo.key\"\n            :value=\"combo.key\"\n            :disabled=\"combo.key === `${currentVault}:${currentStage}`\"\n          >\n            {{ combo.display }} / {{ combo.stage }}\n          </option>\n        </select>\n      </div>\n      \n      <div class=\"flex justify-end space-x-3\">\n        <button\n          @click=\"$emit('close')\"\n          class=\"px-4 py-2 text-sm border border-border rounded-md hover:bg-accent transition-colors\"\n        >\n          Cancel\n        </button>\n        <button\n          @click=\"handleCopy\"\n          :disabled=\"!targetCombination\"\n          class=\"px-4 py-2 text-sm bg-primary text-primary-foreground rounded-md hover:bg-primary/90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed\"\n        >\n          Copy Secret\n        </button>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { ref, computed, onMounted } from 'vue'\n\nconst props = defineProps({\n  secretKey: {\n    type: String,\n    required: true\n  },\n  currentVault: {\n    type: String,\n    required: true\n  },\n  currentStage: {\n    type: String,\n    required: true\n  },\n  vaults: {\n    type: Array,\n    required: true\n  },\n  stages: {\n    type: Array,\n    required: true\n  }\n})\n\nconst emit = defineEmits(['close', 'copy'])\n\nconst targetCombination = ref('')\n\nconst availableCombinations = computed(() => {\n  const combinations = []\n  for (const vault of props.vaults) {\n    for (const stage of props.stages) {\n      combinations.push({\n        key: `${vault.slug || vault}:${stage}`,\n        vaultSlug: vault.slug || vault,\n        display: vault.display || vault.name || vault,\n        stage: stage\n      })\n    }\n  }\n  return combinations\n})\n\nfunction handleCopy() {\n  if (targetCombination.value) {\n    const [targetVault, targetStage] = targetCombination.value.split(':')\n    emit('copy', { targetVault, targetStage })\n  }\n}\n</script>","<template>\n  <div class=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50\" @click.self=\"$emit('close')\">\n    <div class=\"bg-card border border-border rounded-lg p-6 w-full max-w-4xl max-h-[80vh] flex flex-col\">\n      <div class=\"flex items-center justify-between mb-4\">\n        <div>\n          <h2 class=\"text-lg font-semibold\">Secret History</h2>\n          <p class=\"text-sm text-muted-foreground mt-1\">\n            {{ secretKey }} • {{ vault }} / {{ stage }}\n          </p>\n        </div>\n        <button\n          @click=\"$emit('close')\"\n          class=\"p-1 rounded-md hover:bg-muted transition-colors\"\n        >\n          <svg class=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M6 18L18 6M6 6l12 12\"/>\n          </svg>\n        </button>\n      </div>\n      \n      <div v-if=\"loading\" class=\"flex-1 flex items-center justify-center\">\n        <div class=\"text-muted-foreground\">Loading history...</div>\n      </div>\n      \n      <div v-else-if=\"error\" class=\"flex-1 flex items-center justify-center\">\n        <div class=\"text-destructive\">{{ error }}</div>\n      </div>\n      \n      <div v-else-if=\"history.length === 0\" class=\"flex-1 flex items-center justify-center\">\n        <div class=\"text-muted-foreground\">No history found for this secret</div>\n      </div>\n      \n      <div v-else class=\"flex-1 overflow-y-auto\">\n        <table class=\"w-full\">\n          <thead class=\"sticky top-0 bg-card border-b border-border\">\n            <tr>\n              <th class=\"text-left px-4 py-2 text-xs font-medium text-muted-foreground uppercase tracking-wider\">Version</th>\n              <th class=\"text-left px-4 py-2 text-xs font-medium text-muted-foreground uppercase tracking-wider\">\n                <div class=\"flex items-center space-x-2\">\n                  <span>Value</span>\n                  <button\n                    @click=\"toggleUnmask\"\n                    class=\"p-1 rounded hover:bg-accent transition-colors\"\n                    :title=\"unmasked ? 'Hide values' : 'Show values'\"\n                  >\n                    <svg v-if=\"!unmasked\" class=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                      <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M15 12a3 3 0 11-6 0 3 3 0 016 0z\" />\n                      <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z\" />\n                    </svg>\n                    <svg v-else class=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                      <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21\" />\n                    </svg>\n                  </button>\n                </div>\n              </th>\n              <th class=\"text-left px-4 py-2 text-xs font-medium text-muted-foreground uppercase tracking-wider\">Type</th>\n              <th class=\"text-left px-4 py-2 text-xs font-medium text-muted-foreground uppercase tracking-wider\">Modified</th>\n            </tr>\n          </thead>\n          <tbody class=\"divide-y divide-border\">\n            <tr v-for=\"(entry, index) in history\" :key=\"`${entry.version}-${index}`\" class=\"hover:bg-muted/50 transition-colors\">\n              <td class=\"px-4 py-3 text-sm\">\n                <span class=\"inline-flex items-center px-2 py-1 rounded-md text-xs font-medium\" :class=\"index === 0 ? 'bg-primary/10 text-primary' : 'bg-accent'\">\n                  v{{ entry.version }}\n                </span>\n              </td>\n              <td class=\"px-4 py-3 text-sm\">\n                <span class=\"font-mono\">{{ getMaskedValue(entry.value) }}</span>\n              </td>\n              <td class=\"px-4 py-3 text-sm text-muted-foreground\">\n                {{ entry.dataType }}\n              </td>\n              <td class=\"px-4 py-3\">\n                <div class=\"text-sm\">{{ formatDate(entry.timestamp || entry.modifiedDate) }}</div>\n                <div class=\"text-xs text-muted-foreground/70\">{{ entry.modifiedBy }}</div>\n              </td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n      \n      <div class=\"flex justify-between items-center mt-4 pt-4 border-t border-border\">\n        <div class=\"text-sm text-muted-foreground\">\n          Showing {{ history.length }} revision{{ history.length === 1 ? '' : 's' }}\n        </div>\n        <button\n          @click=\"$emit('close')\"\n          class=\"px-4 py-2 text-sm font-medium border border-border rounded-md hover:bg-muted transition-colors\"\n        >\n          Close\n        </button>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { ref, onMounted } from 'vue'\nimport { useSecrets } from '../composables/useSecrets'\nimport { maskValue, formatDate } from '../utils/formatters'\n\nconst props = defineProps({\n  secretKey: {\n    type: String,\n    required: true\n  },\n  vault: {\n    type: String,\n    required: true\n  },\n  stage: {\n    type: String,\n    required: true\n  }\n})\n\nconst emit = defineEmits(['close', 'refresh'])\n\nconst { getSecretHistory } = useSecrets()\nconst history = ref([])\nconst loading = ref(true)\nconst error = ref(null)\nconst unmasked = ref(false)\n\nonMounted(() => {\n  loadHistory()\n})\n\nasync function loadHistory() {\n  loading.value = true\n  error.value = null\n  \n  try {\n    const data = await getSecretHistory(\n      props.secretKey, \n      props.vault, \n      props.stage, \n      20, \n      true  // Always get unmasked values\n    )\n    history.value = data.history || []\n  } catch (err) {\n    console.error('Failed to load history:', err)\n    error.value = err.message || 'Failed to load history'\n  } finally {\n    loading.value = false\n  }\n}\n\nfunction toggleUnmask() {\n  unmasked.value = !unmasked.value\n}\n\nfunction getMaskedValue(value) {\n  if (!value) return '(null)'\n  if (unmasked.value) return value\n  return maskValue(value)\n}\n</script>","<template>\n  <div class=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50\" @click.self=\"$emit('close')\">\n    <div class=\"bg-card border border-border rounded-lg p-6 w-full max-w-md\">\n      <div class=\"flex items-start space-x-3\">\n        <div class=\"flex-shrink-0\">\n          <div class=\"h-10 w-10 rounded-full bg-destructive/10 flex items-center justify-center\">\n            <svg class=\"h-6 w-6 text-destructive\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z\" />\n            </svg>\n          </div>\n        </div>\n        <div class=\"flex-1\">\n          <h3 class=\"text-lg font-semibold\">Delete Secret</h3>\n          <p class=\"mt-2 text-sm text-muted-foreground\">\n            Are you sure you want to delete this secret?\n          </p>\n          <div class=\"mt-3 p-3 bg-muted/50 rounded-md\">\n            <div class=\"text-sm\">\n              <div class=\"font-medium\">{{ secretKey }}</div>\n              <div class=\"text-xs text-muted-foreground mt-1\">\n                {{ vault }} / {{ stage }}\n              </div>\n            </div>\n          </div>\n          <p class=\"mt-3 text-sm text-muted-foreground\">\n            This action cannot be undone.\n          </p>\n          <div v-if=\"error\" class=\"mt-3 p-3 bg-red-50 dark:bg-red-950/20 border border-red-200 dark:border-red-900 rounded-md\">\n            <p class=\"text-sm text-red-600 dark:text-red-400\">{{ error }}</p>\n          </div>\n        </div>\n      </div>\n      \n      <div class=\"flex justify-end space-x-3 mt-6\">\n        <button\n          @click=\"$emit('close')\"\n          class=\"px-4 py-2 text-sm font-medium border border-border rounded-md hover:bg-muted transition-colors\"\n        >\n          Cancel\n        </button>\n        <button\n          @click=\"handleDelete\"\n          :disabled=\"loading\"\n          class=\"px-4 py-2 text-sm font-medium bg-destructive text-destructive-foreground rounded-md hover:bg-destructive/90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed\"\n        >\n          {{ loading ? 'Deleting...' : 'Delete Secret' }}\n        </button>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { ref } from 'vue'\nimport { useSecrets } from '../composables/useSecrets'\nimport { useToast } from '../composables/useToast'\n\nconst props = defineProps({\n  secretKey: {\n    type: String,\n    required: true\n  },\n  vault: {\n    type: String,\n    required: true\n  },\n  stage: {\n    type: String,\n    required: true\n  }\n})\n\nconst emit = defineEmits(['close', 'success'])\n\nconst toast = useToast()\nconst { deleteSecret } = useSecrets()\n\nconst error = ref('')\nconst loading = ref(false)\n\nasync function handleDelete() {\n  if (loading.value) return\n  \n  error.value = ''\n  loading.value = true\n  \n  try {\n    await deleteSecret(props.secretKey, props.vault, props.stage)\n    toast.success('Secret deleted', `Secret '${props.secretKey}' has been deleted successfully`)\n    emit('success')\n    emit('close')\n  } catch (err) {\n    // Display error in the modal\n    error.value = err.message || 'Failed to delete secret'\n    console.error('Failed to delete secret:', err)\n  } finally {\n    loading.value = false\n  }\n}\n</script>","<template>\n  <div class=\"relative inline-block text-left\">\n    <button\n      ref=\"buttonRef\"\n      @click=\"toggleMenu\"\n      :class=\"['p-1 rounded hover:bg-muted transition-colors', buttonClass]\"\n    >\n      <svg class=\"w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n        <path d=\"M10 6a2 2 0 110-4 2 2 0 010 4zM10 12a2 2 0 110-4 2 2 0 010 4zM10 18a2 2 0 110-4 2 2 0 010 4z\"/>\n      </svg>\n    </button>\n    \n    <Teleport to=\"body\" v-if=\"isOpen\">\n      <div\n        :style=\"menuStyle\"\n        class=\"absolute w-48 bg-popover border border-border rounded-md shadow-lg z-50\"\n      >\n        <div class=\"py-1 flex flex-col\">\n          <button\n            v-if=\"showEdit\"\n            @click=\"handleEdit\"\n            class=\"w-full text-left px-4 py-2 text-sm hover:bg-accent transition-colors\"\n          >\n            Edit\n          </button>\n          <button\n            v-if=\"showRename\"\n            @click=\"handleRename\"\n            class=\"w-full text-left px-4 py-2 text-sm hover:bg-accent transition-colors\"\n          >\n            Rename\n          </button>\n          <button\n            v-if=\"showCreate\"\n            @click=\"handleCreate\"\n            class=\"w-full text-left px-4 py-2 text-sm hover:bg-accent transition-colors\"\n          >\n            Create\n          </button>\n          <button\n            v-if=\"showCopyValue\"\n            @click=\"handleCopyValue\"\n            class=\"w-full text-left px-4 py-2 text-sm hover:bg-accent transition-colors\"\n          >\n            Copy Value\n          </button>\n          <button\n            v-if=\"showCopyTo\"\n            @click=\"handleCopyTo\"\n            class=\"w-full text-left px-4 py-2 text-sm hover:bg-accent transition-colors\"\n          >\n            Copy To...\n          </button>\n          <button\n            v-if=\"showHistory\"\n            @click=\"handleHistory\"\n            class=\"w-full text-left px-4 py-2 text-sm hover:bg-accent transition-colors\"\n          >\n            History\n          </button>\n          <button\n            v-if=\"showDelete\"\n            @click=\"handleDelete\"\n            class=\"w-full text-left px-4 py-2 text-sm text-destructive hover:bg-accent transition-colors\"\n          >\n            Delete\n          </button>\n        </div>\n      </div>\n    </Teleport>\n  </div>\n</template>\n\n<script setup>\nimport { ref, onMounted, onUnmounted } from 'vue'\n\nconst props = defineProps({\n  secretKey: {\n    type: String,\n    required: true\n  },\n  secretValue: {\n    type: String,\n    default: null\n  },\n  vault: {\n    type: String,\n    required: true\n  },\n  stage: {\n    type: String,\n    required: true\n  },\n  showEdit: {\n    type: Boolean,\n    default: true\n  },\n  showRename: {\n    type: Boolean,\n    default: true\n  },\n  showCreate: {\n    type: Boolean,\n    default: false\n  },\n  showCopyValue: {\n    type: Boolean,\n    default: true\n  },\n  showCopyTo: {\n    type: Boolean,\n    default: true\n  },\n  showDelete: {\n    type: Boolean,\n    default: true\n  },\n  showHistory: {\n    type: Boolean,\n    default: true\n  },\n  buttonClass: {\n    type: String,\n    default: ''\n  }\n})\n\nconst emit = defineEmits(['edit', 'rename', 'create', 'copyValue', 'copyTo', 'delete', 'history', 'refresh'])\n\nconst isOpen = ref(false)\nconst menuStyle = ref({})\nconst buttonRef = ref(null)\n\nfunction toggleMenu(event) {\n  event.stopPropagation()\n  \n  if (isOpen.value) {\n    isOpen.value = false\n  } else {\n    // Close any other open menus by dispatching a custom event\n    document.dispatchEvent(new CustomEvent('close-all-menus'))\n    \n    const button = event.currentTarget\n    const rect = button.getBoundingClientRect()\n    \n    // Menu dimensions\n    const menuWidth = 192 // 192px = 48rem (w-48)\n    // Calculate approximate menu height based on visible items (40px per item + 8px padding)\n    const visibleItems = [\n      props.showEdit, props.showRename, props.showCreate,\n      props.showCopyValue, props.showCopyTo, props.showHistory, props.showDelete\n    ].filter(Boolean).length\n    const menuHeight = (visibleItems * 40) + 8\n    \n    // Calculate position with scroll offset (for absolute positioning)\n    let left = rect.right - menuWidth\n    let top = rect.bottom + 4 + window.scrollY\n    \n    // Check if menu would go below viewport\n    const wouldGoBelow = rect.bottom + menuHeight > window.innerHeight\n    \n    // If near bottom of viewport, position above the button\n    if (wouldGoBelow && rect.top > menuHeight) {\n      top = rect.top - menuHeight + 16 + window.scrollY  // +16 instead of -4 to reduce gap\n    }\n    \n    // Ensure menu doesn't go off left edge\n    if (left < 0) {\n      left = rect.left\n    }\n    \n    menuStyle.value = {\n      left: `${left}px`,\n      top: `${top}px`\n    }\n    \n    // Small delay to prevent immediate closing\n    setTimeout(() => {\n      isOpen.value = true\n    }, 0)\n  }\n}\n\nfunction handleEdit() {\n  emit('edit', { key: props.secretKey, value: props.secretValue, vault: props.vault, stage: props.stage })\n  isOpen.value = false\n}\n\nfunction handleRename() {\n  emit('rename', { key: props.secretKey, value: props.secretValue, vault: props.vault, stage: props.stage })\n  isOpen.value = false\n}\n\nfunction handleCreate() {\n  emit('create', { key: props.secretKey, vault: props.vault, stage: props.stage })\n  isOpen.value = false\n}\n\nfunction handleCopyValue() {\n  if (props.secretValue) {\n    navigator.clipboard.writeText(props.secretValue)\n  }\n  emit('copyValue', { key: props.secretKey, vault: props.vault, stage: props.stage })\n  isOpen.value = false\n}\n\nfunction handleCopyTo() {\n  emit('copyTo', { key: props.secretKey, value: props.secretValue, vault: props.vault, stage: props.stage })\n  isOpen.value = false\n}\n\nfunction handleHistory() {\n  emit('history', { key: props.secretKey, vault: props.vault, stage: props.stage })\n  isOpen.value = false\n}\n\nfunction handleDelete() {\n  emit('delete', { key: props.secretKey, vault: props.vault, stage: props.stage })\n  isOpen.value = false\n}\n\n// Close menu when clicking outside\nfunction handleClickOutside(event) {\n  if (isOpen.value && buttonRef.value && !buttonRef.value.contains(event.target)) {\n    isOpen.value = false\n  }\n}\n\n// Close this menu when another menu opens\nfunction handleCloseAllMenus() {\n  isOpen.value = false\n}\n\n// Close menu when scrolling (since position becomes stale)\nfunction handleScroll() {\n  if (isOpen.value) {\n    isOpen.value = false\n  }\n}\n\nonMounted(() => {\n  document.addEventListener('click', handleClickOutside)\n  document.addEventListener('close-all-menus', handleCloseAllMenus)\n  window.addEventListener('scroll', handleScroll, true) // Use capture to catch all scroll events\n})\n\nonUnmounted(() => {\n  document.removeEventListener('click', handleClickOutside)\n  document.removeEventListener('close-all-menus', handleCloseAllMenus)\n  window.removeEventListener('scroll', handleScroll, true)\n})\n</script>","<template>\n  <!-- Import Wizard Modal -->\n  <div class=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50\" @click.self=\"closeWizard\">\n      <div class=\"bg-card border border-border rounded-lg w-full max-w-3xl max-h-[80vh] overflow-hidden flex flex-col\">\n        <!-- Header -->\n        <div class=\"flex items-center justify-between px-6 py-4 border-b border-border\">\n          <h2 class=\"text-lg font-semibold\">Import .env File</h2>\n          <button\n            @click=\"closeWizard\"\n            class=\"p-1 rounded-md hover:bg-muted transition-colors\"\n          >\n            <svg class=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M6 18L18 6M6 6l12 12\"/>\n            </svg>\n          </button>\n        </div>\n\n        <!-- Content -->\n        <div class=\"flex-1 overflow-y-auto px-6 py-4\">\n          <!-- Step 1: Upload -->\n          <div v-if=\"step === 1\" class=\"space-y-4\">\n            <div>\n              <h3 class=\"font-medium mb-2\">Upload or Paste .env Content</h3>\n              <p class=\"text-sm text-muted-foreground mb-4\">\n                Select a .env file from your computer or paste the content directly.\n              </p>\n            </div>\n\n            <!-- File Upload with Drag & Drop -->\n            <div \n              @drop=\"handleDrop\"\n              @dragover.prevent\n              @dragenter.prevent\n              @dragleave=\"isDragging = false\"\n              @dragenter=\"isDragging = true\"\n              :class=\"[\n                'border-2 border-dashed rounded-lg p-6 text-center transition-colors',\n                isDragging ? 'border-primary bg-primary/5' : 'border-border'\n              ]\"\n            >\n              <input\n                type=\"file\"\n                ref=\"fileInput\"\n                @change=\"handleFileUpload\"\n                accept=\".env,.env.*\"\n                class=\"hidden\"\n              />\n              \n              <svg class=\"w-12 h-12 mx-auto mb-4 text-muted-foreground\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"1.5\" d=\"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12\" />\n              </svg>\n              \n              <p class=\"text-sm font-medium mb-2\">\n                {{ isDragging ? 'Drop file here...' : 'Drag & drop your .env file here' }}\n              </p>\n              \n              <p class=\"text-xs text-muted-foreground mb-4\">or</p>\n              \n              <button\n                @click=\"$refs.fileInput.click()\"\n                class=\"px-4 py-2 bg-primary text-primary-foreground rounded-md hover:bg-primary/90 transition-colors text-sm font-medium\"\n              >\n                Browse Files\n              </button>\n              \n              <p class=\"text-sm text-muted-foreground mt-3\">\n                {{ fileName || 'Supports .env and .env.* files' }}\n              </p>\n            </div>\n\n            <div class=\"text-center text-muted-foreground text-sm\">— OR —</div>\n\n            <!-- Text Input -->\n            <div>\n              <label class=\"block text-sm font-medium mb-2\">Paste .env Content</label>\n              <textarea\n                v-model=\"envContent\"\n                class=\"w-full h-48 px-3 py-2 bg-input border border-border rounded-md text-sm font-mono focus:outline-none focus:ring-2 focus:ring-ring\"\n                placeholder=\"KEY1=value1&#10;KEY2=value2&#10;KEY3=value3\"\n              ></textarea>\n            </div>\n\n            <!-- Filter Options -->\n            <div class=\"space-y-3 pt-4 border-t border-border\">\n              <h4 class=\"text-sm font-medium\">Filter Options (Optional)</h4>\n              <div class=\"grid grid-cols-2 gap-4\">\n                <div>\n                  <label class=\"block text-xs text-muted-foreground mb-1\">Only include keys matching</label>\n                  <input\n                    v-model=\"filters.only\"\n                    type=\"text\"\n                    class=\"w-full px-3 py-2 bg-input border border-border rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-ring\"\n                    placeholder=\"e.g., DB_* or APP_*\"\n                  />\n                </div>\n                <div>\n                  <label class=\"block text-xs text-muted-foreground mb-1\">Exclude keys matching</label>\n                  <input\n                    v-model=\"filters.except\"\n                    type=\"text\"\n                    class=\"w-full px-3 py-2 bg-input border border-border rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-ring\"\n                    placeholder=\"e.g., MAIL_* or TEST_*\"\n                  />\n                </div>\n              </div>\n            </div>\n          </div>\n\n          <!-- Step 2: Preview & Conflicts -->\n          <div v-else-if=\"step === 2\" class=\"space-y-4\">\n            <div>\n              <h3 class=\"font-medium mb-2\">Review Import</h3>\n              <div class=\"flex items-center space-x-6 text-sm\">\n                <span>\n                  <span class=\"font-medium text-green-500\">{{ analysis.new }}</span> new\n                </span>\n                <span>\n                  <span class=\"font-medium text-yellow-500\">{{ analysis.existing }}</span> existing\n                </span>\n                <span>\n                  <span class=\"font-medium text-red-500\">{{ analysis.invalid }}</span> invalid\n                </span>\n                <span>\n                  <span class=\"font-medium text-gray-500\">{{ analysis.empty }}</span> empty\n                </span>\n              </div>\n            </div>\n\n            <!-- Conflict Resolution -->\n            <div v-if=\"analysis.existing > 0\" class=\"border border-yellow-500/20 bg-yellow-500/5 rounded-lg p-4\">\n              <h4 class=\"font-medium text-yellow-500 mb-3\">Conflict Resolution</h4>\n              <div class=\"space-y-2\">\n                <label class=\"flex items-center space-x-2\">\n                  <input\n                    type=\"radio\"\n                    v-model=\"conflictStrategy\"\n                    value=\"skip\"\n                    class=\"text-primary focus:ring-primary\"\n                  />\n                  <span class=\"text-sm\">Skip existing secrets (keep current values)</span>\n                </label>\n                <label class=\"flex items-center space-x-2\">\n                  <input\n                    type=\"radio\"\n                    v-model=\"conflictStrategy\"\n                    value=\"overwrite\"\n                    class=\"text-primary focus:ring-primary\"\n                  />\n                  <span class=\"text-sm\">Overwrite existing secrets (replace with new values)</span>\n                </label>\n              </div>\n            </div>\n\n            <!-- Secrets Preview Table -->\n            <div class=\"border border-border rounded-lg overflow-hidden\">\n              <table class=\"w-full text-sm\">\n                <thead class=\"bg-muted\">\n                  <tr>\n                    <th class=\"text-left px-4 py-2 font-medium\">Key</th>\n                    <th class=\"text-left px-4 py-2 font-medium\">Value</th>\n                    <th class=\"text-left px-4 py-2 font-medium\">Status</th>\n                  </tr>\n                </thead>\n                <tbody class=\"divide-y divide-border\">\n                  <tr\n                    v-for=\"secret in analysisSecrets\"\n                    :key=\"secret.key\"\n                    :class=\"{\n                      'opacity-50': secret.status === 'empty' || secret.status === 'invalid'\n                    }\"\n                  >\n                    <td class=\"px-4 py-2 font-mono\">{{ secret.key }}</td>\n                    <td class=\"px-4 py-2 font-mono text-xs\">\n                      {{ secret.value || '(empty)' }}\n                    </td>\n                    <td class=\"px-4 py-2\">\n                      <span\n                        :class=\"[\n                          'px-2 py-1 rounded text-xs font-medium',\n                          getStatusClass(secret.status)\n                        ]\"\n                      >\n                        {{ getStatusLabel(secret.status) }}\n                      </span>\n                      <span v-if=\"secret.error\" class=\"block text-xs text-red-500 mt-1\">\n                        {{ secret.error }}\n                      </span>\n                    </td>\n                  </tr>\n                </tbody>\n              </table>\n            </div>\n\n            <!-- Dry Run Option -->\n            <div class=\"flex items-center space-x-2\">\n              <input\n                type=\"checkbox\"\n                v-model=\"dryRun\"\n                id=\"dry-run\"\n                class=\"rounded border-border\"\n              />\n              <label for=\"dry-run\" class=\"text-sm\">\n                Dry run (preview what would be imported without making changes)\n              </label>\n            </div>\n          </div>\n\n          <!-- Step 3: Results -->\n          <div v-else-if=\"step === 3\" class=\"space-y-4\">\n            <div>\n              <h3 class=\"font-medium mb-2\">Import {{ dryRun ? 'Preview' : 'Complete' }}</h3>\n              <div class=\"flex items-center space-x-6 text-sm\">\n                <span>\n                  <span class=\"font-medium text-green-500\">{{ importResults.imported }}</span> imported\n                </span>\n                <span>\n                  <span class=\"font-medium text-yellow-500\">{{ importResults.skipped }}</span> skipped\n                </span>\n                <span>\n                  <span class=\"font-medium text-red-500\">{{ importResults.failed }}</span> failed\n                </span>\n              </div>\n            </div>\n\n            <!-- Dry Run Notice -->\n            <div v-if=\"dryRun\" class=\"border border-blue-500/20 bg-blue-500/5 rounded-lg p-4\">\n              <p class=\"text-sm text-blue-500\">\n                This was a dry run. No secrets were actually imported.\n              </p>\n            </div>\n\n            <!-- Errors -->\n            <div v-if=\"importResults.errors && importResults.errors.length > 0\" class=\"border border-red-500/20 bg-red-500/5 rounded-lg p-4\">\n              <h4 class=\"font-medium text-red-500 mb-2\">Errors</h4>\n              <ul class=\"list-disc list-inside space-y-1\">\n                <li v-for=\"(error, index) in importResults.errors\" :key=\"index\" class=\"text-sm text-red-500\">\n                  {{ error }}\n                </li>\n              </ul>\n            </div>\n\n            <!-- Results Table -->\n            <div class=\"border border-border rounded-lg overflow-hidden\">\n              <table class=\"w-full text-sm\">\n                <thead class=\"bg-muted\">\n                  <tr>\n                    <th class=\"text-left px-4 py-2 font-medium\">Key</th>\n                    <th class=\"text-left px-4 py-2 font-medium\">Status</th>\n                    <th class=\"text-left px-4 py-2 font-medium\">Revision</th>\n                  </tr>\n                </thead>\n                <tbody class=\"divide-y divide-border\">\n                  <tr v-for=\"(info, key) in importResults.results\" :key=\"key\">\n                    <td class=\"px-4 py-2 font-mono\">{{ key }}</td>\n                    <td class=\"px-4 py-2\">\n                      <span\n                        :class=\"[\n                          'px-2 py-1 rounded text-xs font-medium',\n                          getResultStatusClass(info.status)\n                        ]\"\n                      >\n                        {{ getResultStatusLabel(info) }}\n                      </span>\n                    </td>\n                    <td class=\"px-4 py-2 text-muted-foreground\">\n                      {{ info.revision || '-' }}\n                    </td>\n                  </tr>\n                </tbody>\n              </table>\n            </div>\n          </div>\n        </div>\n\n        <!-- Footer -->\n        <div class=\"flex justify-between items-center px-6 py-4 border-t border-border\">\n          <div>\n            <button\n              v-if=\"step === 2\"\n              @click=\"step--\"\n              class=\"px-4 py-2 text-sm border border-border rounded-md hover:bg-muted transition-colors\"\n            >\n              Back\n            </button>\n          </div>\n          <div class=\"flex space-x-2\">\n            <button\n              @click=\"closeWizard\"\n              class=\"px-4 py-2 text-sm border border-border rounded-md hover:bg-muted transition-colors\"\n            >\n              {{ step === 3 ? 'Close' : 'Cancel' }}\n            </button>\n            <button\n              v-if=\"step === 1\"\n              @click=\"analyzeImport\"\n              :disabled=\"!envContent || analyzing\"\n              class=\"px-4 py-2 bg-primary text-primary-foreground rounded-md hover:bg-primary/90 transition-colors text-sm font-medium disabled:opacity-50\"\n            >\n              {{ analyzing ? 'Analyzing...' : 'Next' }}\n            </button>\n            <button\n              v-else-if=\"step === 2\"\n              @click=\"executeImport\"\n              :disabled=\"importing\"\n              class=\"px-4 py-2 bg-primary text-primary-foreground rounded-md hover:bg-primary/90 transition-colors text-sm font-medium disabled:opacity-50\"\n            >\n              {{ importing ? 'Importing...' : (dryRun ? 'Preview Import' : 'Import') }}\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n</template>\n\n<script setup>\nimport { ref, computed } from 'vue'\nimport { useToast } from '../composables/useToast'\n\nconst props = defineProps({\n  vault: String,\n  stage: String\n})\n\nconst emit = defineEmits(['imported', 'close'])\n\nconst toast = useToast()\n\n// Wizard state\nconst step = ref(1)\n\n// Step 1: Upload\nconst fileName = ref('')\nconst envContent = ref('')\nconst isDragging = ref(false)\nconst filters = ref({\n  only: '',\n  except: ''\n})\n\n// Step 2: Analysis\nconst analyzing = ref(false)\nconst analysis = ref({\n  total: 0,\n  new: 0,\n  existing: 0,\n  invalid: 0,\n  empty: 0,\n  secrets: []\n})\nconst conflictStrategy = ref('skip')\nconst dryRun = ref(false)\n\n// Step 3: Results\nconst importing = ref(false)\nconst importResults = ref({\n  imported: 0,\n  skipped: 0,\n  failed: 0,\n  results: {},\n  errors: []\n})\n\n// Computed\nconst analysisSecrets = computed(() => analysis.value.secrets || [])\n\n// Methods\nfunction handleFileUpload(event) {\n  const file = event.target.files[0]\n  if (!file) return\n  \n  processFile(file)\n}\n\nfunction handleDrop(event) {\n  event.preventDefault()\n  isDragging.value = false\n  \n  const files = event.dataTransfer.files\n  if (files.length === 0) return\n  \n  const file = files[0]\n  \n  // Check if it's an env file\n  if (!file.name.match(/\\.env(\\.|$)/)) {\n    toast.error('Invalid file', 'Please upload a .env file')\n    return\n  }\n  \n  processFile(file)\n}\n\nfunction processFile(file) {\n  fileName.value = file.name\n  \n  const reader = new FileReader()\n  reader.onload = (e) => {\n    envContent.value = e.target.result\n  }\n  reader.onerror = () => {\n    toast.error('Failed to read file', 'Could not read the selected file')\n  }\n  reader.readAsText(file)\n}\n\nasync function analyzeImport() {\n  if (!envContent.value) {\n    toast.error('No content to import', 'Please upload a file or paste content')\n    return\n  }\n  \n  analyzing.value = true\n  \n  try {\n    const response = await window.$api.analyzeImport({\n      content: envContent.value,\n      vault: props.vault,\n      stage: props.stage,\n      only: filters.value.only || null,\n      except: filters.value.except || null\n    })\n    \n    analysis.value = response.analysis\n    step.value = 2\n    \n    // Auto-select strategy based on conflicts\n    if (analysis.value.existing === 0) {\n      conflictStrategy.value = 'skip' // No conflicts, any strategy works\n    }\n  } catch (error) {\n    toast.error('Failed to analyze import', error.message)\n  } finally {\n    analyzing.value = false\n  }\n}\n\nasync function executeImport() {\n  importing.value = true\n  \n  try {\n    const response = await window.$api.executeImport({\n      content: envContent.value,\n      vault: props.vault,\n      stage: props.stage,\n      strategy: conflictStrategy.value,\n      only: filters.value.only || null,\n      except: filters.value.except || null,\n      dry_run: dryRun.value\n    })\n    \n    importResults.value = response\n    step.value = 3\n    \n    if (!dryRun.value && response.imported > 0) {\n      toast.success('Import successful', `Imported ${response.imported} secrets`)\n      emit('imported')\n    }\n  } catch (error) {\n    toast.error('Failed to import', error.message)\n  } finally {\n    importing.value = false\n  }\n}\n\nfunction closeWizard() {\n  step.value = 1\n  fileName.value = ''\n  envContent.value = ''\n  isDragging.value = false\n  emit('close')\n  filters.value = { only: '', except: '' }\n  analysis.value = { total: 0, new: 0, existing: 0, invalid: 0, empty: 0, secrets: [] }\n  conflictStrategy.value = 'skip'\n  dryRun.value = false\n  importResults.value = { imported: 0, skipped: 0, failed: 0, results: {}, errors: [] }\n}\n\nfunction getStatusClass(status) {\n  switch (status) {\n    case 'new': return 'bg-green-500/10 text-green-500'\n    case 'existing': return 'bg-yellow-500/10 text-yellow-500'\n    case 'invalid': return 'bg-red-500/10 text-red-500'\n    case 'empty': return 'bg-gray-500/10 text-gray-500'\n    default: return 'bg-muted text-muted-foreground'\n  }\n}\n\nfunction getStatusLabel(status) {\n  switch (status) {\n    case 'new': return 'New'\n    case 'existing': return 'Exists'\n    case 'invalid': return 'Invalid'\n    case 'empty': return 'Empty'\n    default: return status\n  }\n}\n\nfunction getResultStatusClass(status) {\n  switch (status) {\n    case 'imported':\n    case 'would_import': return 'bg-green-500/10 text-green-500'\n    case 'skipped': return 'bg-yellow-500/10 text-yellow-500'\n    case 'failed': return 'bg-red-500/10 text-red-500'\n    default: return 'bg-muted text-muted-foreground'\n  }\n}\n\nfunction getResultStatusLabel(info) {\n  switch (info.status) {\n    case 'imported': return 'Imported'\n    case 'would_import': return 'Would Import'\n    case 'skipped':\n      switch (info.reason) {\n        case 'empty_value': return 'Skipped (empty)'\n        case 'exists': return 'Skipped (exists)'\n        default: return 'Skipped'\n      }\n    case 'failed':\n      switch (info.reason) {\n        case 'invalid_key': return 'Failed (invalid)'\n        case 'exists': return 'Failed (exists)'\n        case 'vault_error': return 'Failed (error)'\n        default: return 'Failed'\n      }\n    default: return info.status\n  }\n}\n</script>","<template>\n  <div class=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50\" @click.self=\"$emit('close')\">\n    <div class=\"bg-card border border-border rounded-lg p-6 w-full max-w-md\">\n      <h2 class=\"text-lg font-semibold mb-4\">Download Secrets</h2>\n      \n      <div class=\"space-y-4\">\n        <!-- Format Selection -->\n        <div>\n          <label class=\"block text-sm font-medium mb-2\">Export Format</label>\n          <div class=\"grid grid-cols-3 gap-2\">\n            <button\n              v-for=\"fmt in formats\"\n              :key=\"fmt.value\"\n              @click=\"selectedFormat = fmt.value\"\n              :class=\"[\n                'p-3 border rounded-md transition-colors',\n                selectedFormat === fmt.value\n                  ? 'border-primary bg-primary/10 text-primary'\n                  : 'border-border hover:bg-muted'\n              ]\"\n            >\n              <div class=\"font-medium\">{{ fmt.label }}</div>\n              <div class=\"text-xs opacity-75 mt-1\">{{ fmt.description }}</div>\n            </button>\n          </div>\n        </div>\n        \n        <!-- Filename -->\n        <div>\n          <label class=\"block text-sm font-medium mb-1\">Filename</label>\n          <input\n            v-model=\"filename\"\n            type=\"text\"\n            class=\"w-full px-3 py-2 bg-input border border-border rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-ring\"\n            :placeholder=\"defaultFilename\"\n          />\n        </div>\n        \n        <!-- Info -->\n        <div class=\"text-xs text-muted-foreground\">\n          <div>Vault: <span class=\"font-medium\">{{ vault }}</span></div>\n          <div>Stage: <span class=\"font-medium\">{{ stage }}</span></div>\n          <div>Secrets: <span class=\"font-medium\">{{ secretCount }}</span></div>\n        </div>\n      </div>\n      \n      <div class=\"flex justify-end space-x-3 mt-6\">\n        <button\n          type=\"button\"\n          @click=\"$emit('close')\"\n          class=\"px-4 py-2 text-sm font-medium border border-border rounded-md hover:bg-muted transition-colors\"\n        >\n          Cancel\n        </button>\n        <button\n          @click=\"downloadSecrets\"\n          :disabled=\"loading\"\n          class=\"px-4 py-2 text-sm font-medium bg-primary text-primary-foreground rounded-md hover:bg-primary/90 transition-colors disabled:opacity-50\"\n        >\n          <span v-if=\"!loading\">Download</span>\n          <span v-else>Preparing...</span>\n        </button>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { ref, computed } from 'vue'\nimport { useToast } from '../composables/useToast'\nimport { formatDate } from '../utils/formatters'\n\nconst props = defineProps({\n  vault: String,\n  stage: String,\n  secrets: {\n    type: Array,\n    default: () => []\n  }\n})\n\nconst emit = defineEmits(['close'])\n\nconst toast = useToast()\n\nconst loading = ref(false)\nconst selectedFormat = ref('env')\nconst filename = ref('')\n\nconst formats = [\n  {\n    value: 'env',\n    label: '.env',\n    description: 'KEY=value'\n  },\n  {\n    value: 'json',\n    label: 'JSON',\n    description: '{\"key\": \"value\"}'\n  },\n  {\n    value: 'csv',\n    label: 'CSV',\n    description: 'Spreadsheet'\n  }\n]\n\nconst secretCount = computed(() => props.secrets.length)\n\nconst defaultFilename = computed(() => {\n  const timestamp = new Date().toISOString().split('T')[0]\n  return `${props.vault}-${props.stage}-${timestamp}.${selectedFormat.value}`\n})\n\nasync function downloadSecrets() {\n  loading.value = true\n  \n  try {\n    let content = ''\n    const fileName = filename.value || defaultFilename.value\n    \n    switch (selectedFormat.value) {\n      case 'json':\n        const jsonData = {}\n        props.secrets.forEach(secret => {\n          jsonData[secret.key] = secret.value\n        })\n        content = JSON.stringify(jsonData, null, 2)\n        break\n        \n      case 'csv':\n        content = 'Key,Value,Modified\\n'\n        props.secrets.forEach(secret => {\n          const key = escapeCsvField(secret.key)\n          const value = escapeCsvField(secret.value)\n          const modified = escapeCsvField(formatDate(secret.modified))\n          content += `${key},${value},${modified}\\n`\n        })\n        break\n        \n      case 'env':\n      default:\n        props.secrets.forEach(secret => {\n          content += `${secret.key}=${formatEnvValue(secret.value)}\\n`\n        })\n        break\n    }\n    \n    // Create blob and download\n    const blob = new Blob([content], { type: 'text/plain;charset=utf-8' })\n    const url = window.URL.createObjectURL(blob)\n    const link = document.createElement('a')\n    link.href = url\n    link.download = fileName\n    document.body.appendChild(link)\n    link.click()\n    document.body.removeChild(link)\n    window.URL.revokeObjectURL(url)\n    \n    toast.success('Export Complete', `Secrets downloaded as ${fileName}`)\n    emit('close')\n  } catch (error) {\n    console.error('Export failed:', error)\n    toast.error('Export Failed', error.message)\n  } finally {\n    loading.value = false\n  }\n}\n\nfunction escapeCsvField(field) {\n  if (typeof field !== 'string') {\n    field = String(field || '')\n  }\n  // If field contains comma, quotes, or newline, wrap in quotes and escape quotes\n  if (/[,\"\\n\\r]/.test(field)) {\n    return '\"' + field.replace(/\"/g, '\"\"') + '\"'\n  }\n  return field\n}\n\nfunction formatEnvValue(value) {\n  if (typeof value !== 'string') {\n    value = String(value || '')\n  }\n  // If value contains newlines or starts/ends with quotes, wrap in quotes\n  if (value.includes('\\n') || value.includes('\"') || value.includes(' ')) {\n    return `\"${value.replace(/\"/g, '\\\\\"')}\"`\n  }\n  return value\n}\n</script>","<template>\n  <div class=\"relative\">\n    <!-- Three-dot menu button -->\n    <button\n      @click=\"toggleMenu($event)\"\n      class=\"p-2 rounded hover:bg-muted transition-colors\"\n      title=\"Actions\"\n    >\n      <svg class=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n        <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z\" />\n      </svg>\n    </button>\n    \n    <!-- Dropdown menu -->\n    <div\n      v-if=\"menuOpen\"\n      @click.stop\n      class=\"absolute right-0 mt-2 w-48 bg-popover border border-border rounded-md shadow-lg z-20\"\n    >\n      <div class=\"py-1\">\n        <button\n          @click=\"showImportWizard = true; menuOpen = false\"\n          class=\"w-full text-left px-4 py-2 text-sm hover:bg-accent transition-colors flex items-center space-x-2\"\n        >\n          <svg class=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12\" />\n          </svg>\n          <span>Import .env File</span>\n        </button>\n        \n        <button\n          @click=\"showExportModal = true; menuOpen = false\"\n          class=\"w-full text-left px-4 py-2 text-sm hover:bg-accent transition-colors flex items-center space-x-2\"\n        >\n          <svg class=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4\" />\n          </svg>\n          <span>Download Secrets</span>\n        </button>\n      </div>\n    </div>\n    \n    <!-- Import Wizard Modal -->\n    <ImportWizard\n      v-if=\"showImportWizard\"\n      :vault=\"vault\"\n      :stage=\"stage\"\n      @imported=\"handleImported\"\n      @close=\"showImportWizard = false\"\n    />\n    \n    <!-- Export Modal -->\n    <ExportModal\n      v-if=\"showExportModal\"\n      :vault=\"vault\"\n      :stage=\"stage\"\n      :secrets=\"secrets\"\n      @close=\"showExportModal = false\"\n    />\n  </div>\n</template>\n\n<script setup>\nimport { ref, onMounted, onBeforeUnmount, watch } from 'vue'\nimport ImportWizard from './ImportWizard.vue'\nimport ExportModal from './ExportModal.vue'\n\nconst props = defineProps({\n  vault: String,\n  stage: String,\n  secrets: {\n    type: Array,\n    default: () => []\n  }\n})\n\nconst emit = defineEmits(['imported'])\n\nconst menuOpen = ref(false)\nconst showImportWizard = ref(false)\nconst showExportModal = ref(false)\n\nfunction toggleMenu(event) {\n  event.stopPropagation()\n  menuOpen.value = !menuOpen.value\n}\n\nfunction handleImported() {\n  showImportWizard.value = false\n  emit('imported')\n}\n\nfunction closeMenu() {\n  menuOpen.value = false\n}\n\n// Handle click outside\nfunction handleClickOutside(event) {\n  // Check if click is outside the component\n  const button = event.target.closest('button')\n  const menu = event.target.closest('.absolute.right-0')\n  \n  if (!button && !menu) {\n    closeMenu()\n  }\n}\n\n// Add/remove document listener when menu opens/closes\nwatch(menuOpen, (isOpen) => {\n  if (isOpen) {\n    // Add listener on next tick to avoid immediate close\n    setTimeout(() => {\n      document.addEventListener('click', handleClickOutside)\n    }, 0)\n  } else {\n    document.removeEventListener('click', handleClickOutside)\n  }\n})\n\n// Clean up listener on unmount\nonBeforeUnmount(() => {\n  document.removeEventListener('click', handleClickOutside)\n})\n</script>","import { ref, computed } from 'vue'\nimport { api } from '../services/api'\n\nexport function useVault() {\n  const vaults = ref([])\n  const stages = ref([])\n  const settings = ref({})\n  const loading = ref(false)\n  const error = ref(null)\n\n  const defaultVault = computed(() => \n    vaults.value.find(v => v.isDefault)?.slug || vaults.value[0]?.slug || 'vault'\n  )\n\n  const defaultStage = computed(() => \n    settings.value.default_stage || 'prod'\n  )\n\n  async function loadVaults() {\n    loading.value = true\n    error.value = null\n    try {\n      const response = await api.listVaults()\n      vaults.value = response.vaults\n    } catch (err) {\n      error.value = err.message\n      throw err\n    } finally {\n      loading.value = false\n    }\n  }\n\n  async function loadStages() {\n    loading.value = true\n    error.value = null\n    try {\n      const response = await api.listStages()\n      stages.value = response.stages\n    } catch (err) {\n      error.value = err.message\n      throw err\n    } finally {\n      loading.value = false\n    }\n  }\n\n  async function loadSettings() {\n    loading.value = true\n    error.value = null\n    try {\n      settings.value = await api.getSettings()\n    } catch (err) {\n      error.value = err.message\n      throw err\n    } finally {\n      loading.value = false\n    }\n  }\n\n  async function loadAll() {\n    loading.value = true\n    error.value = null\n    try {\n      const [vaultsRes, stagesRes, settingsRes] = await Promise.all([\n        api.listVaults(),\n        api.listStages(),\n        api.getSettings()\n      ])\n      vaults.value = vaultsRes.vaults\n      stages.value = stagesRes.stages\n      settings.value = settingsRes\n    } catch (err) {\n      error.value = err.message\n      throw err\n    } finally {\n      loading.value = false\n    }\n  }\n\n  async function verifyVaults() {\n    loading.value = true\n    error.value = null\n    try {\n      return await api.verifyVaults()\n    } catch (err) {\n      error.value = err.message\n      throw err\n    } finally {\n      loading.value = false\n    }\n  }\n\n  return {\n    vaults,\n    stages,\n    settings,\n    loading,\n    error,\n    defaultVault,\n    defaultStage,\n    loadVaults,\n    loadStages,\n    loadSettings,\n    loadAll,\n    verifyVaults\n  }\n}","<template>\n  <div>\n    <!-- Header with vault/stage selectors on left, search and add button on right -->\n    <div class=\"flex items-center justify-between mb-6\">\n      <!-- Left side: Vault & Stage Selectors -->\n      <div class=\"flex items-center\">\n        <VaultStageSelector \n          v-model:vault=\"vault\"\n          v-model:stage=\"stage\"\n          :vaults=\"vaults\"\n          :stages=\"stages\"\n        />\n      </div>\n      \n      <!-- Right side: Search and Add button -->\n      <div class=\"flex space-x-3\">\n        <button\n            @click=\"unmaskAll = !unmaskAll\"\n            class=\"flex items-center space-x-2 px-3 py-1.5 text-sm border border-border rounded-md hover:bg-accent transition-colors\"\n        >\n          <svg v-if=\"!unmaskAll\" class=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M15 12a3 3 0 11-6 0 3 3 0 016 0z\"/>\n            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\"\n                  d=\"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z\"/>\n          </svg>\n          <svg v-else class=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\"\n                  d=\"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21\"/>\n          </svg>\n        </button>\n\n        <div class=\"relative\">\n          <input\n            ref=\"searchInput\"\n            v-model=\"searchQuery\"\n            type=\"text\"\n            placeholder=\"Search by secret key or value...\"\n            class=\"w-64 px-3 py-2 bg-input border border-border rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-ring\"\n          />\n          <svg class=\"absolute right-3 top-2.5 w-4 h-4 text-muted-foreground\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z\" />\n          </svg>\n        </div>\n        \n        <button\n          @click=\"showAddDialog = true\"\n          class=\"flex items-center space-x-2 px-4 py-2 bg-primary text-primary-foreground rounded-md hover:bg-primary/90 transition-colors text-sm font-medium\"\n        >\n          <svg class=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 4v16m8-8H4\" />\n          </svg>\n          <span>Add Secret</span>\n        </button>\n        \n        <TableActionsMenu\n          :vault=\"vault\"\n          :stage=\"stage\"\n          :secrets=\"secrets\"\n          @imported=\"loadSecrets\"\n        />\n      </div>\n    </div>\n\n    <!-- Table -->\n    <div class=\"border border-border rounded-lg\">\n      <table class=\"w-full\" :class=\"loading && 'opacity-50 pointer-events-none'\">\n        <thead class=\"bg-muted\">\n          <tr>\n            <th class=\"w-3/12 text-left px-6 py-3 text-xs font-medium text-muted-foreground uppercase tracking-wider rounded-tl-lg\">Key</th>\n            <th class=\"w-6/12 text-left px-6 py-3 text-xs font-medium text-muted-foreground uppercase tracking-wider\">Value</th>\n            <th class=\"w-2/12 text-left px-6 py-3 text-xs font-medium text-muted-foreground uppercase tracking-wider\" title=\"Times shown in your local timezone\">Modified</th>\n            <th class=\"relative px-6 py-3 rounded-tr-lg\"><span class=\"sr-only\">Actions</span></th>\n          </tr>\n        </thead>\n        <tbody class=\"divide-y divide-border\">\n          <tr v-for=\"secret in secrets\" :key=\"secret.key\" class=\"transition-colors\">\n            <td class=\"px-6 py-4 whitespace-nowrap text-sm font-medium\">\n              {{ secret.key }}\n            </td>\n            <td class=\"px-6 py-4 text-sm\">\n              <SecretValue \n                :value=\"secret.value\" \n                :masked=\"!unmaskAll && !unmaskedKeys.has(secret.key)\" \n                @toggle=\"toggleMask(secret.key)\" \n              />\n            </td>\n            <td class=\"px-6 py-4 whitespace-nowrap text-sm text-muted-foreground\">\n              {{ formatDate(secret.modified) }}\n            </td>\n            <td class=\"px-6 py-4 whitespace-nowrap text-right text-sm\">\n              <SecretActionsMenu\n                :secretKey=\"secret.key\"\n                :secretValue=\"secret.value\"\n                :vault=\"vault\"\n                :stage=\"stage\"\n                @edit=\"editSecret\"\n                @rename=\"showRenameDialog\"\n                @copyValue=\"handleCopyValue\"\n                @copyTo=\"showCopyToStageDialog\"\n                @history=\"showHistoryDialog\"\n                @delete=\"showDeleteDialog\"\n                @refresh=\"loadSecrets\"\n              />\n            </td>\n          </tr>\n        </tbody>\n      </table>\n\n      <div v-if=\"!loading && secrets.length === 0\" class=\"p-8 text-center text-muted-foreground\">\n        No secrets found\n      </div>\n    </div>\n\n    <!-- Add/Edit Dialog -->\n    <SecretDialog\n      v-if=\"showAddDialog || editingSecret\"\n      :secret=\"editingSecret\"\n      :vault=\"editingSecret ? editingSecret.vault : vault\"\n      :stage=\"editingSecret ? editingSecret.stage : stage\"\n      @success=\"handleSecretSaveSuccess\"\n      @close=\"closeDialog\"\n    />\n    \n    <!-- Rename Dialog -->\n    <RenameDialog\n      v-if=\"renamingSecret\"\n      :currentKey=\"renamingSecret.key\"\n      :vault=\"vault\"\n      :stage=\"stage\"\n      @success=\"handleRenameSuccess\"\n      @close=\"renamingSecret = null\"\n    />\n    \n    <!-- Copy to Stage Dialog -->\n    <CopyToStageDialog\n      v-if=\"copyingSecret\"\n      :secretKey=\"copyingSecret.key\"\n      :currentVault=\"vault\"\n      :currentStage=\"stage\"\n      :vaults=\"vaults\"\n      :stages=\"stages\"\n      @copy=\"handleCopyToStage\"\n      @close=\"copyingSecret = null\"\n    />\n    \n    <!-- History Dialog -->\n    <HistoryDialog\n      v-if=\"historySecret\"\n      :secretKey=\"historySecret.key\"\n      :vault=\"vault\"\n      :stage=\"stage\"\n      @refresh=\"loadSecrets\"\n      @close=\"historySecret = null\"\n    />\n    \n    <!-- Delete Confirm Dialog -->\n    <DeleteConfirmDialog\n      v-if=\"deletingSecret\"\n      :secretKey=\"deletingSecret.key\"\n      :vault=\"vault\"\n      :stage=\"stage\"\n      @success=\"handleDeleteSuccess\"\n      @close=\"deletingSecret = null\"\n    />\n  </div>\n</template>\n\n<script setup>\nimport { ref, onMounted, onUnmounted, watch, computed } from 'vue'\nimport VaultStageSelector from './VaultStageSelector.vue'\nimport SecretValue from './SecretValue.vue'\nimport SecretDialog from './SecretDialog.vue'\nimport RenameDialog from './RenameDialog.vue'\nimport CopyToStageDialog from './CopyToStageDialog.vue'\nimport HistoryDialog from './HistoryDialog.vue'\nimport DeleteConfirmDialog from './DeleteConfirmDialog.vue'\nimport SecretActionsMenu from './SecretActionsMenu.vue'\nimport TableActionsMenu from './TableActionsMenu.vue'\nimport { useToast } from '../composables/useToast'\nimport { useVault } from '../composables/useVault'\nimport { useSecrets } from '../composables/useSecrets'\nimport { useKeyboardShortcuts } from '../composables/useKeyboardShortcuts'\nimport { formatDate } from '../utils/formatters'\n\nconst emit = defineEmits(['refresh'])\nconst toast = useToast()\nconst { vaults, stages, settings, loadAll: loadVaultData } = useVault()\nconst { secrets: allSecrets, loading, loadSecrets: fetchSecrets, copySecretToStage } = useSecrets()\nconst { registerSearchHandler, registerModalCloseHandler, registerMaskToggleHandler } = useKeyboardShortcuts()\n\nconst vault = ref(localStorage.getItem('keep.secrets.vault') || '')\nconst stage = ref(localStorage.getItem('keep.secrets.stage') || '')\nconst searchQuery = ref('')\nconst searchInput = ref(null)\nconst unmaskAll = ref(false)\nconst unmaskedKeys = ref(new Set())\nconst showAddDialog = ref(false)\nconst editingSecret = ref(null)\nconst renamingSecret = ref(null)\nconst copyingSecret = ref(null)\nconst historySecret = ref(null)\nconst deletingSecret = ref(null)\n\n// Filter secrets client-side based on search query\nconst secrets = computed(() => {\n  if (!searchQuery.value) {\n    return allSecrets.value\n  }\n  \n  const query = searchQuery.value.toLowerCase()\n  return allSecrets.value.filter(secret => {\n    // Search in both key name and value\n    const keyMatches = secret.key.toLowerCase().includes(query)\n    const valueMatches = secret.value && secret.value.toLowerCase().includes(query)\n    return keyMatches || valueMatches\n  })\n})\n\n// Keyboard shortcut cleanup functions\nlet cleanupModalHandler = null\n\nonMounted(async () => {\n  await loadVaultsAndStages()\n  await loadSecrets()\n  \n  // Register keyboard shortcut handlers\n  registerSearchHandler(() => {\n    if (searchInput.value) {\n      searchInput.value.focus()\n    }\n  })\n  \n  // Register modal close handlers for all dialogs\n  cleanupModalHandler = registerModalCloseHandler(() => {\n    showAddDialog.value = false\n    editingSecret.value = null\n    renamingSecret.value = null\n    copyingSecret.value = null\n    historySecret.value = null\n    deletingSecret.value = null\n  })\n  \n  // Register mask toggle handler\n  registerMaskToggleHandler(() => {\n    unmaskAll.value = !unmaskAll.value\n  })\n})\n\nonUnmounted(() => {\n  // Clean up modal handler\n  if (cleanupModalHandler) {\n    cleanupModalHandler()\n  }\n})\n\nwatch(() => [vault.value, stage.value], () => {\n  // Save to localStorage\n  if (vault.value) localStorage.setItem('keep.secrets.vault', vault.value)\n  if (stage.value) localStorage.setItem('keep.secrets.stage', stage.value)\n  \n  loadSecrets()\n})\n\nasync function loadVaultsAndStages() {\n  try {\n    await loadVaultData()\n    \n    // Set defaults only if no saved value\n    if (!vault.value) {\n      const defaultVault = settings.value.default_vault\n      if (defaultVault) {\n        vault.value = defaultVault\n        localStorage.setItem('keep.secrets.vault', vault.value)\n      } else if (vaults.value.length > 0) {\n        vault.value = vaults.value[0].slug || vaults.value[0]\n        localStorage.setItem('keep.secrets.vault', vault.value)\n      }\n    }\n    if (!stage.value && stages.value.length) {\n      stage.value = stages.value[0]\n      localStorage.setItem('keep.secrets.stage', stage.value)\n    }\n  } catch (error) {\n    console.error('Failed to load vaults and stages:', error)\n  }\n}\n\nasync function loadSecrets() {\n  if (!vault.value || !stage.value) return\n  \n  try {\n    // Always load all secrets - filtering is done client-side\n    await fetchSecrets(vault.value, stage.value, true)\n  } catch (error) {\n    console.error('Failed to load secrets:', error)\n  }\n}\n\nfunction toggleMask(key) {\n  if (unmaskedKeys.value.has(key)) {\n    unmaskedKeys.value.delete(key)\n  } else {\n    unmaskedKeys.value.add(key)\n  }\n}\n\nfunction editSecret(data) {\n  editingSecret.value = data\n}\n\nasync function handleSecretSaveSuccess() {\n  closeDialog()\n  await loadSecrets()\n}\n\nfunction showRenameDialog(data) {\n  renamingSecret.value = data\n}\n\nfunction showCopyToStageDialog(data) {\n  copyingSecret.value = data\n}\n\nfunction showHistoryDialog(data) {\n  historySecret.value = data\n}\n\nfunction showDeleteDialog(data) {\n  deletingSecret.value = data\n}\n\nfunction handleCopyValue(data) {\n  toast.success('Copied to clipboard', 'Secret value has been copied to your clipboard')\n}\n\nasync function handleDeleteSuccess() {\n  deletingSecret.value = null\n  await loadSecrets()\n}\n\nasync function handleRenameSuccess() {\n  renamingSecret.value = null\n  await loadSecrets()\n}\n\nasync function handleCopyToStage({ targetVault, targetStage }) {\n  try {\n    await copySecretToStage(\n      copyingSecret.value.key, \n      targetStage, \n      targetVault, \n      copyingSecret.value.stage,\n      copyingSecret.value.vault\n    )\n    toast.success('Secret copied', `Secret '${copyingSecret.value.key}' copied to ${targetVault}:${targetStage}`)\n    copyingSecret.value = null\n  } catch (error) {\n    console.error('Failed to copy secret:', error)\n    toast.error('Failed to copy secret', error.message)\n  }\n}\n\nfunction closeDialog() {\n  showAddDialog.value = false\n  editingSecret.value = null\n}\n</script>","<template>\n  <div>\n    <!-- Controls -->\n    <div class=\"mb-6 flex justify-between\">\n      <div class=\"flex items-center space-x-4\">\n        <!-- Combined Vault/Stage Dropdown -->\n        <div class=\"relative\">\n          <button\n              @click=\"showCombinationsDropdown = !showCombinationsDropdown\"\n              class=\"flex items-center space-x-2 px-3 py-2 bg-input border border-border rounded-md text-sm hover:bg-accent transition-colors\"\n          >\n            <span>Toggle Vaults / Stages ({{ selectedCombinations.length }}/{{ availableCombinations.length }})</span>\n            <svg class=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M19 9l-7 7-7-7\"/>\n            </svg>\n          </button>\n\n          <div v-if=\"showCombinationsDropdown\" class=\"absolute top-full left-0 mt-1 bg-popover border border-border rounded-md shadow-lg z-20\">\n            <div class=\"p-2 space-y-1 max-h-96 overflow-y-auto\" style=\"min-width: max-content;\">\n              <label\n                  v-for=\"combo in availableCombinations\"\n                  :key=\"combo.key\"\n                  class=\"flex items-center px-2 py-1.5 hover:bg-accent rounded cursor-pointer whitespace-nowrap\"\n              >\n                <input\n                    type=\"checkbox\"\n                    :value=\"combo.key\"\n                    v-model=\"selectedCombinations\"\n                    class=\"mr-3 rounded border-border bg-input text-primary focus:ring-2 focus:ring-ring\"\n                />\n                <span class=\"text-sm\">\n                  <span>{{ combo.vaultDisplay }} ({{ combo.vault }})</span>\n                  <span class=\"mx-2 text-muted-foreground\">/</span>\n                  <strong>{{ combo.stage }}</strong>\n                </span>\n              </label>\n            </div>\n          </div>\n        </div>\n\n        <!-- Quick Actions -->\n        <div class=\"flex items-center space-x-2 text-sm\">\n          <button\n              @click=\"selectAll\"\n              class=\"text-muted-foreground hover:text-foreground transition-colors\"\n          >\n            Select All\n          </button>\n          <span class=\"text-muted-foreground\">|</span>\n          <button\n              @click=\"selectNone\"\n              class=\"text-muted-foreground hover:text-foreground transition-colors\"\n          >\n            Clear All\n          </button>\n        </div>\n      </div>\n\n      <!-- Right side controls -->\n      <div class=\"flex space-x-2\">\n        <button\n            @click=\"unmaskAll = !unmaskAll\"\n            class=\"flex items-center space-x-2 px-3 py-2 text-sm border border-border rounded-md hover:bg-accent transition-colors\"\n        >\n          <svg v-if=\"!unmaskAll\" class=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M15 12a3 3 0 11-6 0 3 3 0 016 0z\"/>\n            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\"\n                  d=\"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z\"/>\n          </svg>\n          <svg v-else class=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\"\n                  d=\"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21\"/>\n          </svg>\n        </button>\n\n        <!-- Search field -->\n        <div class=\"relative\">\n          <input\n            ref=\"searchInput\"\n            v-model=\"searchQuery\"\n            type=\"text\"\n            placeholder=\"Search by key or value...\"\n            class=\"w-64 px-3 py-2 bg-input border border-border rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-ring\"\n          />\n          <svg class=\"absolute right-3 top-2.5 w-4 h-4 text-muted-foreground\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z\" />\n          </svg>\n        </div>\n\n      </div>\n    </div>\n\n    <!-- Loading State -->\n    <div v-if=\"loading\" class=\"text-center py-12\">\n      <div class=\"inline-flex items-center space-x-2 text-muted-foreground\">\n        <svg class=\"animate-spin h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\">\n          <circle class=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" stroke-width=\"4\"></circle>\n          <path class=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\n        </svg>\n        <span>Loading comparison matrix...</span>\n      </div>\n    </div>\n\n    <!-- Diff Matrix -->\n    <div v-else-if=\"diffMatrix && Object.keys(diffMatrix).length > 0\" class=\"border border-border rounded-lg overflow-y-visible overflow-x-auto\">\n      <table class=\"w-full\">\n        <thead class=\"bg-muted sticky top-0 z-10\">\n        <tr>\n          <th class=\"text-left px-4 py-3 text-xs font-medium text-muted-foreground uppercase tracking-wider sticky left-0 bg-muted z-20 min-w-[200px]\">\n            Secret Key\n          </th>\n          <th\n              v-for=\"column in activeColumns\"\n              :key=\"column\"\n              class=\"px-4 py-3 text-xs font-medium text-muted-foreground uppercase tracking-wider text-center border-l border-border min-w-[80px]\"\n          >\n            <div class=\"flex flex-col\">\n              <span class=\"font-semibold\">{{ column.vault }}</span>\n              <span class=\"text-[10px] opacity-75\">{{ column.stage }}</span>\n            </div>\n          </th>\n        </tr>\n        </thead>\n        <tbody class=\"divide-y divide-border\">\n        <tr v-for=\"key in sortedKeys\" :key=\"key\" :class=\"getRowClass(key)\" class=\"transition-colors\">\n          <td class=\"sticky left-0 z-10 border-r border-border p-0\">\n            <div class=\"bg-background\">\n              <div class=\"px-4 py-3 flex items-center space-x-2\" :class=\"getRowClass(key, false)\">\n                <span class=\"font-mono text-sm font-medium\">{{ key }}</span>\n                <button\n                    @click=\"toggleRowMask(key)\"\n                    class=\"p-1 rounded hover:bg-muted transition-colors\"\n                    :title=\"unmaskedRows.has(key) ? 'Hide values' : 'Show values'\"\n                >\n                  <svg v-if=\"!unmaskedRows.has(key)\" class=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M15 12a3 3 0 11-6 0 3 3 0 016 0z\"/>\n                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\"\n                          d=\"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z\"/>\n                  </svg>\n                  <svg v-else class=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\"\n                          d=\"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21\"/>\n                  </svg>\n                </button>\n              </div>\n            </div>\n          </td>\n          <td\n              v-for=\"column in activeColumns\"\n              :key=\"`${key}-${column.vault}-${column.stage}`\"\n              class=\"px-4 py-3 text-left border-l border-border relative group\"\n              :class=\"getCellClass(key, column.vault, column.stage)\"\n          >\n            <div v-if=\"getSecretValue(key, column.vault, column.stage)\" class=\"flex items-center justify-between\">\n                <span class=\"font-mono text-sm\">\n                  {{ getMaskedValue(key, column.vault, column.stage) }}\n                </span>\n              <SecretActionsMenu\n                :secretKey=\"key\"\n                :secretValue=\"getSecretValue(key, column.vault, column.stage)\"\n                :vault=\"column.vault\"\n                :stage=\"column.stage\"\n                :showRename=\"false\"\n                :buttonClass=\"'opacity-0 group-hover:opacity-100'\"\n                @edit=\"editSecret\"\n                @copyValue=\"handleCopyValue\"\n                @copyTo=\"showCopyToStageDialog\"\n                @history=\"showHistoryDialog\"\n                @delete=\"showDeleteDialog\"\n                @refresh=\"loadDiff\"\n              />\n            </div>\n            <div v-else class=\"flex items-center justify-between\">\n              <span class=\"text-muted-foreground text-sm\">—</span>\n              <SecretActionsMenu\n                :secretKey=\"key\"\n                :secretValue=\"null\"\n                :vault=\"column.vault\"\n                :stage=\"column.stage\"\n                :showEdit=\"false\"\n                :showRename=\"false\"\n                :showCreate=\"true\"\n                :showCopyValue=\"false\"\n                :showCopyTo=\"false\"\n                :showDelete=\"false\"\n                :showHistory=\"false\"\n                :buttonClass=\"'opacity-0 group-hover:opacity-100'\"\n                @create=\"createSecret\"\n              />\n            </div>\n          </td>\n        </tr>\n        </tbody>\n      </table>\n    </div>\n\n    <!-- Empty State -->\n    <div v-else-if=\"!loading && diffMatrix !== null && Object.keys(diffMatrix).length === 0\" class=\"text-center py-12 text-muted-foreground\">\n      <svg class=\"mx-auto h-12 w-12 mb-4 opacity-50\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n        <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\"/>\n      </svg>\n      <p>No secrets found in the selected vaults and stages</p>\n    </div>\n\n    <!-- No Selection State -->\n    <div v-else-if=\"!loading && selectedCombinations.length === 0\" class=\"text-center py-12 text-muted-foreground\">\n      <svg class=\"mx-auto h-12 w-12 mb-4 opacity-50\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n        <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\"\n              d=\"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2\"/>\n      </svg>\n      <p class=\"text-lg font-medium mb-2\">Select Vault/Stage Combinations</p>\n      <p class=\"text-sm\">Use the dropdown above to select at least one vault/stage combination</p>\n    </div>\n\n    <!-- Edit Secret Dialog -->\n    <SecretDialog\n      v-if=\"editingSecret\"\n      :secret=\"editingSecret.isNew ? null : editingSecret\"\n      :vault=\"editingSecret.vault\"\n      :stage=\"editingSecret.stage\"\n      :initialKey=\"editingSecret.isNew ? editingSecret.key : undefined\"\n      @success=\"handleSecretSaveSuccess\"\n      @close=\"editingSecret = null\"\n    />\n\n    <!-- Copy To Stage Modal -->\n    <div v-if=\"copyingSecret\" class=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50\" @click.self=\"copyingSecret = null\">\n      <div class=\"bg-card border border-border rounded-lg p-6 w-full max-w-md\">\n        <div class=\"flex items-center justify-between mb-4\">\n          <h2 class=\"text-lg font-semibold\">Copy Secret</h2>\n          <button\n              @click=\"copyingSecret = null\"\n              class=\"p-1 rounded-md hover:bg-muted transition-colors\"\n          >\n            <svg class=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M6 18L18 6M6 6l12 12\"/>\n            </svg>\n          </button>\n        </div>\n        <div class=\"space-y-4\">\n          <div>\n            <label class=\"block text-sm font-medium mb-1\">Key</label>\n            <input\n                type=\"text\"\n                :value=\"copyingSecret?.key\"\n                disabled\n                class=\"w-full px-3 py-2 bg-input border border-border rounded-md text-sm opacity-50\"\n            />\n          </div>\n          <div>\n            <label class=\"block text-sm font-medium mb-1\">From</label>\n            <input\n                type=\"text\"\n                :value=\"`${copyingSecret?.vault} / ${copyingSecret?.stage}`\"\n                disabled\n                class=\"w-full px-3 py-2 bg-input border border-border rounded-md text-sm opacity-50\"\n            />\n          </div>\n          <div>\n            <label class=\"block text-sm font-medium mb-1\">Copy To</label>\n            <select v-model=\"copyTarget\" class=\"w-full px-3 py-2 bg-input border border-border rounded-md text-sm\">\n              <option value=\"\">Select destination...</option>\n              <option\n                  v-for=\"combo in availableCombinations\"\n                  :key=\"combo.key\"\n                  :value=\"combo.key\"\n                  :disabled=\"combo.key === `${copyingSecret?.vault}:${copyingSecret?.stage}`\"\n              >\n                {{ combo.vaultDisplay }} / {{ combo.stage }}\n              </option>\n            </select>\n          </div>\n        </div>\n        <div class=\"flex justify-end space-x-2 mt-6\">\n          <button\n              @click=\"copyingSecret = null; copyTarget = ''\"\n              class=\"px-4 py-2 text-sm border border-border rounded-md hover:bg-muted transition-colors\"\n          >\n            Cancel\n          </button>\n          <button\n              @click=\"executeCopy\"\n              :disabled=\"!copyTarget\"\n              class=\"px-4 py-2 bg-primary text-primary-foreground rounded-md hover:bg-primary/90 transition-colors text-sm font-medium disabled:opacity-50 disabled:cursor-not-allowed\"\n          >\n            Copy Secret\n          </button>\n        </div>\n      </div>\n    </div>\n\n    <!-- Rename Dialog -->\n    <RenameDialog\n      v-if=\"renamingSecret\"\n      :currentKey=\"renamingSecret.key\"\n      :vault=\"renamingSecret.vault\"\n      :stage=\"renamingSecret.stage\"\n      @success=\"handleRenameSuccess\"\n      @close=\"renamingSecret = null\"\n    />\n    \n    <!-- Copy to Stage Dialog -->\n    <CopyToStageDialog\n      v-if=\"copyingSecretStage\"\n      :secretKey=\"copyingSecretStage.key\"\n      :currentVault=\"copyingSecretStage.vault\"\n      :currentStage=\"copyingSecretStage.stage\"\n      :vaults=\"availableVaults\"\n      :stages=\"availableStages\"\n      @copy=\"handleCopyToStage\"\n      @close=\"copyingSecretStage = null\"\n    />\n    \n    <!-- History Dialog -->\n    <HistoryDialog\n      v-if=\"historySecret\"\n      :secretKey=\"historySecret.key\"\n      :vault=\"historySecret.vault\"\n      :stage=\"historySecret.stage\"\n      @refresh=\"loadDiff\"\n      @close=\"historySecret = null\"\n    />\n    \n    <!-- Delete Confirm Dialog -->\n    <DeleteConfirmDialog\n      v-if=\"deletingSecret\"\n      :secretKey=\"deletingSecret.key\"\n      :vault=\"deletingSecret.vault\"\n      :stage=\"deletingSecret.stage\"\n      @success=\"handleDeleteSuccess\"\n      @close=\"deletingSecret = null\"\n    />\n  </div>\n</template>\n\n<script setup>\nimport {ref, computed, onMounted, onUnmounted, watch} from 'vue'\nimport {useToast} from '../composables/useToast'\nimport {useVault} from '../composables/useVault'\nimport {useSecrets} from '../composables/useSecrets'\nimport {useKeyboardShortcuts} from '../composables/useKeyboardShortcuts'\nimport {maskValue} from '../utils/formatters'\nimport SecretActionsMenu from './SecretActionsMenu.vue'\nimport SecretDialog from './SecretDialog.vue'\nimport RenameDialog from './RenameDialog.vue'\nimport CopyToStageDialog from './CopyToStageDialog.vue'\nimport HistoryDialog from './HistoryDialog.vue'\nimport DeleteConfirmDialog from './DeleteConfirmDialog.vue'\n\nconst toast = useToast()\nconst { vaults: availableVaults, stages: availableStages, loadAll: loadVaultData } = useVault()\nconst { copySecretToStage } = useSecrets()\nconst { registerSearchHandler, registerModalCloseHandler, registerMaskToggleHandler } = useKeyboardShortcuts()\n\n// State\nconst selectedCombinations = ref([])\nconst availableCombinations = ref([])\nconst fullDiffMatrix = ref(null) // Store all data from server\nconst loading = ref(false)\nconst unmaskAll = ref(false)\nconst unmaskedRows = ref(new Set())\nconst showCombinationsDropdown = ref(false)\nconst activeCellMenu = ref(null)\nconst menuPosition = ref(null)\nconst activeMenuData = ref(null)\nconst editingSecret = ref(null)\nconst renamingSecret = ref(null)\nconst copyingSecretStage = ref(null)\nconst copyingSecret = ref(null)\nconst copyTarget = ref('')\nconst historySecret = ref(null)\nconst deletingSecret = ref(null)\nconst searchQuery = ref('')\nconst searchInput = ref(null)\n\n// Computed columns based on selected combinations\nconst activeColumns = computed(() => {\n  return selectedCombinations.value.map(key => {\n    const [vault, stage] = key.split(':')\n    // Find the vault display name\n    const vaultObj = availableVaults.value.find(v => (v.slug || v.name || v) === vault)\n    const vaultDisplay = vaultObj?.name || vaultObj?.display || vault\n    return {vault, stage, vaultDisplay}\n  })\n})\n\n// Save selections when they change\nwatch(selectedCombinations, (newVal) => {\n  localStorage.setItem('keep.diff.selections', JSON.stringify(newVal))\n}, {deep: true})\n\n// Filter the diff matrix based on selected combinations and search query\nconst diffMatrix = computed(() => {\n  if (!fullDiffMatrix.value) return {}\n  if (selectedCombinations.value.length === 0) return {}\n\n  const query = searchQuery.value.toLowerCase().trim()\n  const filteredDiff = {}\n  \n  for (const [key, vaultData] of Object.entries(fullDiffMatrix.value)) {\n    let hasSelectedCombination = false\n    const filteredVaultData = {}\n    \n    // Check if key matches search query\n    let matchesSearch = !query || key.toLowerCase().includes(query)\n\n    for (const [vault, stageData] of Object.entries(vaultData)) {\n      const filteredStageData = {}\n      for (const [stage, value] of Object.entries(stageData)) {\n        if (selectedCombinations.value.includes(`${vault}:${stage}`)) {\n          filteredStageData[stage] = value\n          hasSelectedCombination = true\n          \n          // Check if value matches search query (only for visible columns)\n          if (!matchesSearch && query && value) {\n            matchesSearch = value.toLowerCase().includes(query)\n          }\n        }\n      }\n      if (Object.keys(filteredStageData).length > 0) {\n        filteredVaultData[vault] = filteredStageData\n      }\n    }\n\n    // Only include if it has selected combinations AND matches search\n    if (hasSelectedCombination && matchesSearch) {\n      filteredDiff[key] = filteredVaultData\n    }\n  }\n\n  return filteredDiff\n})\n\n// Get sorted keys for display\nconst sortedKeys = computed(() => {\n  return Object.keys(diffMatrix.value).sort((a, b) => a.localeCompare(b))\n})\n\n// Get the status of a secret row\nfunction getRowStatus(key) {\n  if (!diffMatrix.value[key]) return 'incomplete'\n\n  const values = []\n  let totalExpected = activeColumns.value.length\n  let totalFound = 0\n\n  for (const column of activeColumns.value) {\n    const value = getSecretValue(key, column.vault, column.stage)\n    if (value !== null && value !== undefined) {\n      values.push(value)\n      totalFound++\n    }\n  }\n\n  // If not present in all combinations, it's incomplete\n  if (totalFound < totalExpected) {\n    return 'incomplete'\n  }\n\n  // If all values are identical, it's identical\n  if (new Set(values).size === 1) {\n    return 'identical'\n  }\n\n  // Otherwise, it's different\n  return 'different'\n}\n\n// Get the CSS class for a row based on its status\nfunction getRowClass(key, hover = true) {\n  const status = getRowStatus(key)\n  switch (status) {\n    case 'incomplete':\n      return 'bg-red-500/10 ' + (hover ? 'hover:bg-red-500/15' : '')\n    case 'identical':\n      return 'bg-green-500/10 ' + (hover ? 'hover:bg-green-500/15' : '')\n    case 'different':\n      return 'bg-yellow-500/10 ' + (hover ? 'hover:bg-yellow-500/15' : '')\n    default:\n      return 'hover:bg-muted/50'\n  }\n}\n\n\n// Close dropdowns when clicking outside\n// Keyboard shortcut cleanup functions\nlet cleanupModalHandler = null\n\nonMounted(() => {\n  document.addEventListener('click', handleClickOutside)\n  loadInitialData()\n  \n  // Register keyboard shortcut handlers\n  registerSearchHandler(() => {\n    if (searchInput.value) {\n      searchInput.value.focus()\n    }\n  })\n  \n  // Register modal close handlers for all dialogs\n  cleanupModalHandler = registerModalCloseHandler(() => {\n    editingSecret.value = null\n    renamingSecret.value = null\n    copyingSecret.value = null\n    historySecret.value = null\n    deletingSecret.value = null\n  })\n  \n  // Register mask toggle handler\n  registerMaskToggleHandler(() => {\n    unmaskAll.value = !unmaskAll.value\n  })\n})\n\nonUnmounted(() => {\n  document.removeEventListener('click', handleClickOutside)\n  // Clean up modal handler\n  if (cleanupModalHandler) {\n    cleanupModalHandler()\n  }\n})\n\nfunction handleClickOutside(e) {\n  if (!e.target.closest('.relative')) {\n    showCombinationsDropdown.value = false\n  }\n  // Close menu if clicking outside of it\n  if (activeCellMenu.value && !e.target.closest('[data-menu-key]')) {\n    activeCellMenu.value = null\n    menuPosition.value = null\n    activeMenuData.value = null\n  }\n}\n\nasync function loadInitialData() {\n  try {\n    await loadVaultData()\n\n    // Build all combinations\n    availableCombinations.value = []\n    for (const vault of availableVaults.value) {\n      for (const stage of availableStages.value) {\n        const vaultSlug = vault.slug || vault.name || vault\n        availableCombinations.value.push({\n          key: `${vaultSlug}:${stage}`,\n          vault: vaultSlug,\n          vaultDisplay: vault.display || vault,\n          stage: stage\n        })\n      }\n    }\n\n    // Load saved selections or select all by default\n    const savedSelections = localStorage.getItem('keep.diff.selections')\n    if (savedSelections) {\n      try {\n        const saved = JSON.parse(savedSelections)\n        // Only use saved selections that are still valid\n        selectedCombinations.value = saved.filter(s =>\n            availableCombinations.value.some(c => c.key === s)\n        )\n      } catch (e) {\n        // If parsing fails, select all\n        selectedCombinations.value = availableCombinations.value.map(c => c.key)\n      }\n    } else {\n      // Select all by default\n      selectedCombinations.value = availableCombinations.value.map(c => c.key)\n    }\n\n    // Load diff automatically\n    await loadDiff()\n  } catch (error) {\n    console.error('Failed to load initial data:', error)\n    toast.error('Failed to load data', error.message)\n  }\n}\n\nasync function loadDiff() {\n  // Load ALL vaults and stages from the server once\n  const vaults = availableVaults.value.map(v => v.slug || v.name || v)\n  const stages = [...availableStages.value]\n\n  loading.value = true\n\n  try {\n    const data = await window.$api.getDiff(stages, vaults)\n    fullDiffMatrix.value = data.diff || {}\n  } catch (error) {\n    console.error('Failed to load diff:', error)\n    toast.error('Failed to load comparison', error.message)\n    fullDiffMatrix.value = {}\n  } finally {\n    loading.value = false\n  }\n}\n\nfunction getSecretValue(key, vault, stage) {\n  if (!diffMatrix.value[key]) return null\n  if (!diffMatrix.value[key][vault]) return null\n  return diffMatrix.value[key][vault][stage] || null\n}\n\nfunction getCellClass(key, vault, stage) {\n  const value = getSecretValue(key, vault, stage)\n  if (!value) return 'bg-muted/30'\n  return ''\n}\n\nfunction toggleRowMask(key) {\n  if (unmaskedRows.value.has(key)) {\n    unmaskedRows.value.delete(key)\n  } else {\n    unmaskedRows.value.add(key)\n  }\n}\n\nfunction getMaskedValue(key, vault, stage) {\n  const value = getSecretValue(key, vault, stage)\n  if (!value) return ''\n\n  // Check if row is unmasked or global unmask is on\n  if (unmaskAll.value || unmaskedRows.value.has(key)) {\n    return value\n  }\n\n  return maskValue(value, '•')\n}\n\n// Cell menu functionality is now handled by SecretActionsMenu component\n\nfunction createSecret(data) {\n  editingSecret.value = {key: data.key, vault: data.vault, stage: data.stage, value: '', isNew: true}\n}\n\nfunction editSecret(data) {\n  editingSecret.value = {key: data.key, vault: data.vault, stage: data.stage, value: data.value}\n}\n\nfunction showCopyToStageDialog(data) {\n  copyingSecretStage.value = {key: data.key, vault: data.vault, stage: data.stage, value: data.value}\n}\n\nfunction showHistoryDialog(data) {\n  historySecret.value = {key: data.key, vault: data.vault, stage: data.stage}\n}\n\nfunction showDeleteDialog(data) {\n  deletingSecret.value = {key: data.key, vault: data.vault, stage: data.stage}\n}\n\nfunction handleCopyValue(data) {\n  toast.success('Copied to clipboard', 'Secret value has been copied to your clipboard')\n}\n\nasync function handleDeleteSuccess() {\n  await loadDiff()\n  deletingSecret.value = null\n}\n\nfunction copyToStage(key, vault, stage) {\n  copyingSecret.value = {key, vault, stage, value: getSecretValue(key, vault, stage)}\n}\n\n// Delete secret is now handled by SecretActionsMenu component\n\nasync function handleSecretSaveSuccess() {\n  editingSecret.value = null\n  await loadDiff()\n}\n\nasync function executeCopy() {\n  if (!copyingSecret.value || !copyTarget.value) return\n\n  const [targetVault, targetStage] = copyTarget.value.split(':')\n\n  try {\n    await copySecretToStage(\n        copyingSecret.value.key,\n        targetStage,\n        targetVault,\n        copyingSecret.value.stage,\n        copyingSecret.value.vault\n    )\n    toast.success('Secret copied', `Copied '${copyingSecret.value.key}' to ${targetVault}:${targetStage}`)\n    copyingSecret.value = null\n    copyTarget.value = ''\n    await loadDiff()\n  } catch (error) {\n    toast.error('Copy failed', error.message)\n  }\n}\n\nfunction selectAll() {\n  selectedCombinations.value = availableCombinations.value.map(c => c.key)\n}\n\nfunction selectNone() {\n  selectedCombinations.value = []\n}\n\nasync function handleCopyToStage({ targetVault, targetStage }) {\n  try {\n    await copySecretToStage(\n      copyingSecretStage.value.key, \n      targetStage, \n      targetVault, \n      copyingSecretStage.value.stage,\n      copyingSecretStage.value.vault\n    )\n    toast.success('Secret copied', `Secret '${copyingSecretStage.value.key}' copied to ${targetVault}:${targetStage}`)\n    copyingSecretStage.value = null\n    await loadDiff()\n  } catch (error) {\n    console.error('Failed to copy secret:', error)\n    toast.error('Failed to copy secret', error.message)\n  }\n}\n\nasync function handleRenameSuccess() {\n  await loadDiff()\n  renamingSecret.value = null\n}\n\n</script>","<template>\n  <Teleport to=\"body\">\n    <div v-if=\"isOpen\" class=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50\" @click.self=\"cancel\">\n      <div class=\"bg-card border border-border rounded-lg p-6 w-full max-w-md\">\n        <div class=\"flex items-start space-x-3 mb-4\">\n          <div class=\"flex-shrink-0 w-10 h-10 rounded-full bg-destructive/10 flex items-center justify-center\">\n            <svg class=\"w-5 h-5 text-destructive\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z\"/>\n            </svg>\n          </div>\n          <div class=\"flex-1\">\n            <h3 class=\"text-lg font-semibold mb-2\">{{ title }}</h3>\n            <p class=\"text-sm text-muted-foreground\">{{ message }}</p>\n          </div>\n        </div>\n        \n        <div class=\"flex justify-end space-x-2 mt-6\">\n          <button\n            @click=\"cancel\"\n            class=\"px-4 py-2 border border-border rounded-md hover:bg-muted transition-colors text-sm font-medium\"\n          >\n            Cancel\n          </button>\n          <button\n            @click=\"confirm\"\n            class=\"px-4 py-2 bg-destructive text-destructive-foreground rounded-md hover:bg-destructive/90 transition-colors text-sm font-medium\"\n          >\n            {{ confirmText }}\n          </button>\n        </div>\n      </div>\n    </div>\n  </Teleport>\n</template>\n\n<script setup>\nimport { ref } from 'vue'\n\nconst props = defineProps({\n  title: {\n    type: String,\n    default: 'Confirm Deletion'\n  },\n  message: {\n    type: String,\n    required: true\n  },\n  confirmText: {\n    type: String,\n    default: 'Delete'\n  }\n})\n\nconst emit = defineEmits(['confirm', 'cancel'])\n\nconst isOpen = ref(false)\n\nfunction open() {\n  isOpen.value = true\n}\n\nfunction confirm() {\n  emit('confirm')\n  isOpen.value = false\n}\n\nfunction cancel() {\n  emit('cancel')\n  isOpen.value = false\n}\n\ndefineExpose({\n  open,\n  close: cancel\n})\n</script>","<template>\n  <div class=\"flex gap-6 mx-auto max-w-5xl\">\n    <!-- Left Sidebar Navigation -->\n    <div class=\"w-48 flex-shrink-0\">\n      <div class=\"space-y-1\">\n        <button\n          v-for=\"tab in tabs\"\n          :key=\"tab.id\"\n          @click=\"activeTab = tab.id\"\n          :class=\"[\n            'w-full px-4 py-2 rounded-md text-sm font-medium transition-colors text-left',\n            activeTab === tab.id\n              ? 'bg-muted text-foreground'\n              : 'text-muted-foreground hover:text-foreground hover:bg-muted/50'\n          ]\"\n        >\n          {{ tab.label }}\n        </button>\n      </div>\n    </div>\n\n    <!-- Main Content Area -->\n    <div class=\"flex-1\">\n      <!-- General Settings -->\n      <div v-if=\"activeTab === 'general'\" class=\"space-y-6\">\n        <div>\n          <h1 class=\"text-2xl font-semibold mb-2\">General Settings</h1>\n          <p class=\"text-sm text-muted-foreground\">Configure your Keep application settings</p>\n        </div>\n\n        <div class=\"border border-border rounded-lg p-6 space-y-4\">\n          <div>\n            <label class=\"block text-sm font-medium mb-2\">Application Name</label>\n            <input\n              v-model=\"settings.appName\"\n              type=\"text\"\n              class=\"w-full px-3 py-2 bg-input border border-border rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-ring\"\n              placeholder=\"MyApp\"\n            />\n            <p class=\"text-xs text-muted-foreground mt-1\">The name of your application</p>\n          </div>\n\n          <div>\n            <label class=\"block text-sm font-medium mb-2\">Namespace</label>\n            <input\n              v-model=\"settings.namespace\"\n              type=\"text\"\n              class=\"w-full px-3 py-2 bg-input border border-border rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-ring\"\n              placeholder=\"my-app\"\n            />\n            <p class=\"text-xs text-muted-foreground mt-1\">All secrets will be organized under this namespace</p>\n          </div>\n\n          <div>\n            <label class=\"block text-sm font-medium mb-2\">Default Vault</label>\n            <select \n              v-model=\"settings.defaultVault\"\n              class=\"w-full px-3 py-2 bg-input border border-border rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-ring\"\n            >\n              <option value=\"\">Select default vault...</option>\n              <option v-for=\"vault in vaults\" :key=\"vault.slug\" :value=\"vault.slug\">\n                {{ vault.name }}\n              </option>\n            </select>\n            <p class=\"text-xs text-muted-foreground mt-1\">The default vault to use when none is specified</p>\n          </div>\n\n          <div>\n            <label class=\"block text-sm font-medium mb-2\">Template Directory</label>\n            <input\n              v-model=\"settings.templatePath\"\n              type=\"text\"\n              class=\"w-full px-3 py-2 bg-input border border-border rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-ring\"\n              placeholder=\"env\"\n            />\n            <p class=\"text-xs text-muted-foreground mt-1\">Directory where .env template files are stored</p>\n          </div>\n\n          <div class=\"pt-4 flex justify-end\">\n            <button\n              @click=\"saveGeneralSettings\"\n              class=\"px-4 py-2 bg-primary text-primary-foreground rounded-md hover:bg-primary/90 transition-colors text-sm font-medium\"\n            >\n              Save Changes\n            </button>\n          </div>\n        </div>\n\n        <!-- Server Information -->\n        <div>\n          <h2 class=\"text-lg font-medium mb-4\">Server Information</h2>\n          <div class=\"border border-border rounded-lg p-4 space-y-2 text-sm\">\n            <div class=\"flex items-center justify-between\">\n              <span class=\"text-muted-foreground\">Server URL</span>\n              <span class=\"font-mono\">{{ serverUrl }}</span>\n            </div>\n            <div class=\"flex items-center justify-between\">\n              <span class=\"text-muted-foreground\">Keep Version</span>\n              <span class=\"font-mono\">{{ keepVersion }}</span>\n            </div>\n            <div class=\"flex items-center justify-between\">\n              <span class=\"text-muted-foreground\">Authentication</span>\n              <span class=\"text-green-500\">Token Active</span>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <!-- Vaults Settings -->\n      <div v-if=\"activeTab === 'vaults'\" class=\"space-y-6\">\n        <div>\n          <h1 class=\"text-2xl font-semibold mb-2\">Vault Configuration</h1>\n          <p class=\"text-sm text-muted-foreground\">Manage your vault connections and settings</p>\n        </div>\n\n        <!-- Vault List -->\n        <div class=\"space-y-3\">\n          <div \n            v-for=\"vault in vaults\" \n            :key=\"vault.slug\"\n            class=\"border border-border rounded-lg p-4\"\n          >\n            <div class=\"flex items-start justify-between\">\n              <div class=\"flex-1\">\n                <div class=\"flex items-center space-x-3 mb-2\">\n                  <h3 class=\"font-medium\">{{ vault.name }}</h3>\n                  <span v-if=\"vault.isDefault\" class=\"px-2 py-0.5 bg-primary/10 text-primary text-xs rounded-full\">\n                    Default\n                  </span>\n                </div>\n                <div class=\"space-y-1 text-sm text-muted-foreground\">\n                  <p>Driver: <span class=\"font-mono\">{{ vault.driver }}</span></p>\n                  <p>Slug: <span class=\"font-mono\">{{ vault.slug }}</span></p>\n                  <p v-if=\"vault.scope\">Scope: <span class=\"font-mono\">{{ vault.scope }}</span></p>\n                </div>\n              </div>\n              <div class=\"flex items-center space-x-2\">\n                <button\n                  @click=\"editVault(vault)\"\n                  class=\"p-2 rounded-md hover:bg-muted transition-colors\"\n                >\n                  <svg class=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z\" />\n                  </svg>\n                </button>\n                <button\n                  @click=\"deleteVault(vault)\"\n                  class=\"p-2 rounded-md hover:bg-muted transition-colors text-destructive\"\n                >\n                  <svg class=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\" />\n                  </svg>\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <!-- Add Vault Button -->\n        <div class=\"flex justify-between items-center pt-4\">\n          <button\n            @click=\"openAddVaultModal()\"\n            class=\"px-4 py-2 bg-primary text-primary-foreground rounded-md hover:bg-primary/90 transition-colors text-sm font-medium\"\n          >\n            Add New Vault\n          </button>\n          <button\n            @click=\"verifyAllVaults\"\n            :disabled=\"verifying\"\n            class=\"px-4 py-2 border border-border rounded-md hover:bg-muted transition-colors text-sm font-medium disabled:opacity-50\"\n          >\n            {{ verifying ? 'Verifying...' : 'Verify All Vaults' }}\n          </button>\n        </div>\n      </div>\n\n      <!-- Stages Settings -->\n      <div v-if=\"activeTab === 'stages'\" class=\"space-y-6\">\n        <div>\n          <h1 class=\"text-2xl font-semibold mb-2\">Stage Configuration</h1>\n          <p class=\"text-sm text-muted-foreground\">Manage your deployment stages and environments</p>\n        </div>\n\n        <div class=\"border border-border rounded-lg p-4\">\n          <div class=\"space-y-2\">\n            <div \n              v-for=\"stage in stages\" \n              :key=\"stage\"\n              class=\"flex items-center justify-between py-3 border-b border-border last:border-0\"\n            >\n              <span class=\"font-medium\">{{ stage }}</span>\n              <button\n                @click=\"removeStage(stage)\"\n                class=\"p-2 rounded-md hover:bg-muted transition-colors text-destructive\"\n              >\n                <svg class=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\" />\n                </svg>\n              </button>\n            </div>\n          </div>\n          \n          <div class=\"flex items-center space-x-2 mt-4 pt-4 border-t border-border\">\n            <input\n              v-model=\"newStage\"\n              @keyup.enter=\"addStage\"\n              type=\"text\"\n              placeholder=\"Enter new stage name...\"\n              class=\"flex-1 px-3 py-2 bg-input border border-border rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-ring\"\n            />\n            <button\n              @click=\"addStage\"\n              :disabled=\"!newStage\"\n              class=\"px-4 py-2 bg-primary text-primary-foreground rounded-md hover:bg-primary/90 transition-colors text-sm font-medium disabled:opacity-50\"\n            >\n              Add Stage\n            </button>\n          </div>\n        </div>\n\n        <div class=\"bg-muted/30 rounded-lg p-4 text-sm text-muted-foreground\">\n          <p class=\"font-medium mb-1\">About Stages</p>\n          <p>Stages represent different deployment environments for your secrets. Common stages include development, staging, and production. System stages (local, staging, production) cannot be removed.</p>\n        </div>\n      </div>\n    </div>\n  </div>\n\n  <!-- Add/Edit Vault Modal -->\n  <div v-if=\"showVaultModal\" class=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50\" @click.self=\"closeVaultModal\">\n    <div class=\"bg-card border border-border rounded-lg p-6 w-full max-w-md\">\n      <h2 class=\"text-lg font-semibold mb-4\">{{ editingVault ? 'Edit Vault' : 'Add New Vault' }}</h2>\n      \n      <div class=\"space-y-4\">\n        <div>\n          <label class=\"block text-sm font-medium mb-1\">Driver</label>\n          <select \n            v-model=\"vaultForm.driver\"\n            @change=\"onDriverChange\"\n            class=\"w-full px-3 py-2 bg-input border border-border rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-ring\"\n            :disabled=\"!!editingVault\"\n          >\n            <option value=\"\">Select driver...</option>\n            <option value=\"secretsmanager\">AWS Secrets Manager</option>\n            <option value=\"ssm\">AWS SSM Parameter Store</option>\n            <option value=\"test\">Test Vault</option>\n          </select>\n          <p class=\"text-xs text-muted-foreground mt-1\">{{ editingVault ? 'Driver cannot be changed after creation' : 'Select the backend vault type' }}</p>\n        </div>\n\n        <div v-if=\"vaultForm.driver || editingVault\">\n          <label class=\"block text-sm font-medium mb-1\">Name</label>\n          <input\n            v-model=\"vaultForm.name\"\n            type=\"text\"\n            class=\"w-full px-3 py-2 bg-input border border-border rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-ring\"\n            :placeholder=\"getDriverDefaults(vaultForm.driver).name\"\n          />\n          <p class=\"text-xs text-muted-foreground mt-1\">Friendly display name for this vault</p>\n        </div>\n\n        <div v-if=\"vaultForm.driver || editingVault\">\n          <label class=\"block text-sm font-medium mb-1\">Slug</label>\n          <input\n            v-model=\"vaultForm.slug\"\n            type=\"text\"\n            class=\"w-full px-3 py-2 bg-input border border-border rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-ring\"\n            :placeholder=\"getDriverDefaults(vaultForm.driver).slug\"\n            :disabled=\"!!editingVault\"\n          />\n          <p class=\"text-xs text-muted-foreground mt-1\">{{ editingVault ? 'Slug cannot be changed after creation' : 'Unique identifier for this vault' }}</p>\n        </div>\n\n        <div v-if=\"(vaultForm.driver === 'ssm' || vaultForm.driver === 'secretsmanager') || (editingVault && ['ssm', 'secretsmanager'].includes(editingVault.driver))\">\n          <label class=\"block text-sm font-medium mb-1\">Scope (optional)</label>\n          <input\n            v-model=\"vaultForm.scope\"\n            type=\"text\"\n            class=\"w-full px-3 py-2 bg-input border border-border rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-ring\"\n            placeholder=\"app2\"\n          />\n          <p class=\"text-xs text-muted-foreground mt-1\">Optional scope to isolate secrets within your namespace.</p>\n        </div>\n\n        <div v-if=\"vaultForm.driver || editingVault\" class=\"flex items-center space-x-2\">\n          <input\n            v-model=\"vaultForm.isDefault\"\n            type=\"checkbox\"\n            id=\"vault-default\"\n            class=\"rounded border-border\"\n          />\n          <label for=\"vault-default\" class=\"text-sm\">Set as default vault</label>\n        </div>\n      </div>\n\n      <div class=\"flex justify-end space-x-2 mt-6\">\n        <button\n          @click=\"closeVaultModal\"\n          class=\"px-4 py-2 text-sm border border-border rounded-md hover:bg-muted transition-colors\"\n        >\n          Cancel\n        </button>\n        <button\n          @click=\"saveVault\"\n          class=\"px-4 py-2 bg-primary text-primary-foreground rounded-md hover:bg-primary/90 transition-colors text-sm font-medium\"\n        >\n          {{ editingVault ? 'Save Changes' : 'Add Vault' }}\n        </button>\n      </div>\n    </div>\n  </div>\n\n  <!-- Verification Results Modal -->\n  <div v-if=\"showVerificationModal\" class=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50\" @click.self=\"showVerificationModal = false\">\n    <div class=\"bg-card border border-border rounded-lg p-6 w-full max-w-2xl max-h-[80vh] overflow-y-auto\">\n      <div class=\"flex items-center justify-between mb-4\">\n        <h2 class=\"text-lg font-semibold\">Vault Verification Results</h2>\n        <button\n          @click=\"showVerificationModal = false\"\n          class=\"p-1 rounded-md hover:bg-muted transition-colors\"\n        >\n          <svg class=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M6 18L18 6M6 6l12 12\"/>\n          </svg>\n        </button>\n      </div>\n\n      <div v-if=\"verificationResults\" class=\"space-y-4\">\n        <div v-for=\"(result, vaultName) in verificationResults\" :key=\"vaultName\" \n             class=\"border border-border rounded-lg p-4\">\n          <div class=\"flex items-center justify-between mb-3\">\n            <h3 class=\"font-medium\">{{ getVaultDisplayName(vaultName) }}</h3>\n            <span :class=\"[\n              'px-2 py-1 rounded text-xs font-medium',\n              result.success ? 'bg-green-500/10 text-green-500' : 'bg-destructive/10 text-destructive'\n            ]\">\n              {{ result.success ? 'Connected' : 'Failed' }}\n            </span>\n          </div>\n          \n          <div v-if=\"result.success && result.permissions\" class=\"grid grid-cols-5 gap-2 text-sm\">\n            <div v-for=\"(status, permission) in result.permissions\" :key=\"permission\"\n                 class=\"flex items-center space-x-2\">\n              <svg v-if=\"status\" class=\"w-4 h-4 text-green-500\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M5 13l4 4L19 7\"/>\n              </svg>\n              <svg v-else class=\"w-4 h-4 text-destructive\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M6 18L18 6M6 6l12 12\"/>\n              </svg>\n              <span :class=\"status ? 'text-muted-foreground' : 'text-destructive'\">\n                {{ permission }}\n              </span>\n            </div>\n          </div>\n          \n          <div v-else-if=\"result.error\" class=\"text-sm text-destructive mt-2\">\n            {{ result.error }}\n          </div>\n        </div>\n      </div>\n\n      <div v-else class=\"text-center py-8 text-muted-foreground\">\n        <div class=\"animate-spin h-8 w-8 border-2 border-primary border-t-transparent rounded-full mx-auto mb-4\"></div>\n        Verifying vaults...\n      </div>\n\n      <div class=\"flex justify-end mt-6\">\n        <button\n          @click=\"showVerificationModal = false\"\n          class=\"px-4 py-2 bg-primary text-primary-foreground rounded-md hover:bg-primary/90 transition-colors text-sm font-medium\"\n        >\n          Close\n        </button>\n      </div>\n    </div>\n  </div>\n\n  <!-- Delete Stage Confirmation Modal -->\n  <DeleteConfirmationModal\n    ref=\"deleteStageModal\"\n    title=\"Delete Stage\"\n    :message=\"`Are you sure you want to remove the stage '${stageToDelete}'?`\"\n    confirmText=\"Remove Stage\"\n    @confirm=\"confirmDeleteStage\"\n  />\n\n  <!-- Delete Vault Confirmation Modal -->\n  <DeleteConfirmationModal\n    ref=\"deleteVaultModal\"\n    title=\"Delete Vault\"\n    :message=\"`Are you sure you want to delete the vault '${vaultToDelete?.name}'?`\"\n    confirmText=\"Delete Vault\"\n    @confirm=\"confirmDeleteVault\"\n  />\n</template>\n\n<script setup>\nimport { ref, onMounted, computed } from 'vue'\nimport { useToast } from '../composables/useToast'\nimport DeleteConfirmationModal from './DeleteConfirmationModal.vue'\n\nconst toast = useToast()\n\n// Navigation\nconst tabs = [\n  { id: 'general', label: 'General' },\n  { id: 'vaults', label: 'Vaults' },\n  { id: 'stages', label: 'Stages' }\n]\nconst activeTab = ref('general')\n\n// General settings\nconst settings = ref({\n  appName: '',\n  namespace: '',\n  defaultVault: '',\n  templatePath: ''\n})\nconst keepVersion = ref('1.0.0-beta')\n\n// Vaults\nconst vaults = ref([])\nconst showVaultModal = ref(false)\nconst editingVault = ref(null)\nconst vaultForm = ref({\n  name: '',\n  slug: '',\n  driver: '',\n  scope: '',\n  isDefault: false\n})\nconst verifying = ref(false)\nconst showVerificationModal = ref(false)\nconst verificationResults = ref(null)\nconst vaultToDelete = ref(null)\nconst deleteVaultModal = ref(null)\n\n// Stages\nconst stages = ref([])\nconst newStage = ref('')\nconst stageToDelete = ref('')\nconst deleteStageModal = ref(null)\nconst serverUrl = computed(() => typeof window !== 'undefined' ? window.location.origin : '')\n\n// Helper functions\nfunction getVaultDisplayName(slug) {\n  const vault = vaults.value.find(v => v.slug === slug)\n  return vault ? `${vault.name} (${vault.slug})` : slug\n}\n\nfunction getDriverDefaults(driver) {\n  const defaults = {\n    secretsmanager: { name: 'AWS Secrets Manager', slug: 'aws-secrets' },\n    ssm: { name: 'AWS SSM Parameter Store', slug: 'aws-ssm' },\n    test: { name: 'Test Vault', slug: 'test' }\n  }\n  return defaults[driver] || { name: '', slug: '' }\n}\n\nfunction onDriverChange() {\n  if (!editingVault.value && vaultForm.value.driver) {\n    const defaults = getDriverDefaults(vaultForm.value.driver)\n    if (!vaultForm.value.name) {\n      vaultForm.value.name = defaults.name\n    }\n    if (!vaultForm.value.slug) {\n      vaultForm.value.slug = defaults.slug\n    }\n  }\n}\n\n// Lifecycle\nonMounted(async () => {\n  await loadSettings()\n  await loadVaults()\n  await loadStages()\n})\n\n// General Settings Functions\nasync function loadSettings() {\n  try {\n    const data = await window.$api.getSettings()\n    settings.value.appName = data.app_name || 'MyApp'\n    settings.value.namespace = data.namespace || ''\n    settings.value.defaultVault = data.default_vault || ''\n    settings.value.templatePath = data.template_path || 'env'\n    keepVersion.value = data.keep_version || '1.0.0-beta'\n  } catch (error) {\n    console.error('Failed to load settings:', error)\n    toast.error('Failed to load settings', error.message)\n  }\n}\n\nasync function saveGeneralSettings() {\n  try {\n    await window.$api.updateSettings({\n      app_name: settings.value.appName,\n      namespace: settings.value.namespace,\n      default_vault: settings.value.defaultVault,\n      template_path: settings.value.templatePath\n    })\n    toast.success('Settings saved', 'Your changes have been saved successfully')\n  } catch (error) {\n    toast.error('Failed to save settings', error.message)\n  }\n}\n\n// Vault Functions\nasync function loadVaults() {\n  try {\n    const data = await window.$api.listVaults()\n    vaults.value = data.vaults || []\n  } catch (error) {\n    console.error('Failed to load vaults:', error)\n    toast.error('Failed to load vaults', error.message)\n  }\n}\n\nfunction editVault(vault) {\n  editingVault.value = vault\n  vaultForm.value = {\n    name: vault.name,\n    slug: vault.slug,\n    driver: vault.driver,\n    scope: vault.scope || '',\n    isDefault: vault.isDefault || false\n  }\n  showVaultModal.value = true\n}\n\nfunction deleteVault(vault) {\n  vaultToDelete.value = vault\n  deleteVaultModal.value.open()\n}\n\nasync function confirmDeleteVault() {\n  if (!vaultToDelete.value) return\n  \n  try {\n    await window.$api.deleteVault(vaultToDelete.value.slug)\n    vaults.value = vaults.value.filter(v => v.slug !== vaultToDelete.value.slug)\n    toast.success('Vault deleted', `Vault \"${vaultToDelete.value.name}\" has been deleted`)\n  } catch (error) {\n    toast.error('Failed to delete vault', error.message)\n  } finally {\n    vaultToDelete.value = null\n  }\n}\n\nfunction openAddVaultModal() {\n  editingVault.value = null\n  vaultForm.value = {\n    name: '',\n    slug: '',\n    driver: '',\n    scope: '',\n    isDefault: false\n  }\n  showVaultModal.value = true\n}\n\nfunction closeVaultModal() {\n  showVaultModal.value = false\n  editingVault.value = null\n  vaultForm.value = {\n    name: '',\n    slug: '',\n    driver: '',\n    scope: '',\n    isDefault: false\n  }\n}\n\nasync function saveVault() {\n  try {\n    if (editingVault.value) {\n      await window.$api.updateVault(editingVault.value.slug, vaultForm.value)\n      const index = vaults.value.findIndex(v => v.slug === editingVault.value.slug)\n      if (index !== -1) {\n        vaults.value[index] = { ...vaultForm.value }\n      }\n      toast.success('Vault updated', `Vault \"${vaultForm.value.name}\" has been updated`)\n    } else {\n      await window.$api.addVault(vaultForm.value)\n      vaults.value.push({ ...vaultForm.value })\n      toast.success('Vault added', `Vault \"${vaultForm.value.name}\" has been added`)\n    }\n    closeVaultModal()\n  } catch (error) {\n    toast.error('Failed to save vault', error.message)\n  }\n}\n\nasync function verifyAllVaults() {\n  verifying.value = true\n  showVerificationModal.value = true\n  verificationResults.value = null\n  \n  try {\n    const data = await window.$api.verifyVaults()\n    const results = data.results || {}\n    \n    // Results now come with permissions from backend\n    verificationResults.value = results\n    \n    const failedVaults = Object.entries(results).filter(([_, result]) => !result.success)\n    if (failedVaults.length === 0) {\n      toast.success('All vaults verified', 'All vaults are properly configured and accessible')\n    } else {\n      toast.error('Verification failed', `${failedVaults.length} vault(s) failed verification`)\n    }\n  } catch (error) {\n    toast.error('Failed to verify vaults', error.message)\n    showVerificationModal.value = false\n  } finally {\n    verifying.value = false\n  }\n}\n\n// Stage Functions\nasync function loadStages() {\n  try {\n    const data = await window.$api.listStages()\n    stages.value = data.stages || []\n  } catch (error) {\n    console.error('Failed to load stages:', error)\n    toast.error('Failed to load stages', error.message)\n  }\n}\n\nasync function addStage() {\n  if (!newStage.value) return\n  \n  if (stages.value.includes(newStage.value)) {\n    toast.error('Stage exists', `Stage \"${newStage.value}\" already exists`)\n    return\n  }\n  \n  try {\n    await window.$api.addStage(newStage.value)\n    stages.value.push(newStage.value)\n    toast.success('Stage added', `Stage \"${newStage.value}\" has been added`)\n    newStage.value = ''\n  } catch (error) {\n    toast.error('Failed to add stage', error.message)\n  }\n}\n\nfunction removeStage(stage) {\n  stageToDelete.value = stage\n  deleteStageModal.value.open()\n}\n\nasync function confirmDeleteStage() {\n  if (!stageToDelete.value) return\n  \n  try {\n    await window.$api.removeStage(stageToDelete.value)\n    const index = stages.value.indexOf(stageToDelete.value)\n    if (index > -1) {\n      stages.value.splice(index, 1)\n      toast.success('Stage removed', `Stage \"${stageToDelete.value}\" has been removed`)\n    }\n  } catch (error) {\n    toast.error('Failed to remove stage', error.message)\n  } finally {\n    stageToDelete.value = ''\n  }\n}\n</script>","<template>\n  <div class=\"fixed inset-0 z-50 overflow-y-auto\">\n    <div class=\"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:p-0\">\n      <!-- Background overlay -->\n      <div class=\"fixed inset-0 transition-opacity\" @click=\"$emit('close')\">\n        <div class=\"absolute inset-0 bg-black opacity-75\"></div>\n      </div>\n\n      <!-- Modal content -->\n      <div class=\"relative inline-block w-full max-w-2xl px-6 py-5 overflow-hidden text-left align-middle transition-all transform bg-background rounded-lg shadow-xl\">\n        <!-- Header -->\n        <div class=\"flex items-center justify-between mb-4\">\n          <h2 class=\"text-xl font-semibold\">Add Template</h2>\n          <button\n            @click=\"$emit('close')\"\n            class=\"p-1 rounded hover:bg-muted transition-colors\"\n          >\n            <svg class=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M6 18L18 6M6 6l12 12\"></path>\n            </svg>\n          </button>\n        </div>\n\n        <!-- Stage Selection -->\n        <div class=\"space-y-4\">\n          <div>\n            <label class=\"block text-sm font-medium mb-2\">Stage</label>\n            <select\n              v-model=\"selectedStage\"\n              @change=\"checkExistingTemplate\"\n              class=\"w-full px-3 py-2 border border-border rounded-md bg-background focus:ring-2 focus:ring-primary focus:border-transparent\"\n            >\n              <option value=\"\">Select a stage</option>\n              <option v-for=\"stage in stages\" :key=\"stage\" :value=\"stage\">\n                {{ stage }}\n              </option>\n            </select>\n          </div>\n\n          <!-- Template exists warning -->\n          <div v-if=\"templateExists\" class=\"bg-red-500/5 border border-red-500/20 rounded-md p-3\">\n            <div class=\"flex items-center gap-2\">\n              <svg class=\"w-5 h-5 text-red-500/80 flex-shrink-0\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\"></path>\n              </svg>\n              <div>\n                <p class=\"text-sm font-medium\">Template already exists</p>\n                <p class=\"text-sm text-muted-foreground\">{{ selectedStage }}.env already exists. You can edit it from the templates list.</p>\n              </div>\n            </div>\n          </div>\n\n          <!-- Preview Section -->\n          <div v-if=\"preview && !templateExists\" class=\"space-y-2\">\n            <label class=\"block text-sm font-medium\">Preview</label>\n            <div class=\"relative\">\n              <pre class=\"bg-muted/50 rounded-md p-3 text-sm font-mono overflow-x-auto max-h-64 overflow-y-auto\">{{ preview }}</pre>\n              <button\n                v-if=\"preview\"\n                @click=\"copyPreview\"\n                class=\"absolute top-2 right-2 p-1.5 bg-background border border-border rounded hover:bg-muted transition-colors\"\n                title=\"Copy to clipboard\"\n              >\n                <svg v-if=\"!copied\" class=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3\"></path>\n                </svg>\n                <svg v-else class=\"w-4 h-4 text-green-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M5 13l4 4L19 7\"></path>\n                </svg>\n              </button>\n            </div>\n          </div>\n\n          <!-- Error Display -->\n          <div v-if=\"error\" class=\"bg-destructive/10 border border-destructive/20 rounded-md p-3\">\n            <div class=\"flex items-center gap-2\">\n              <svg class=\"w-5 h-5 text-destructive flex-shrink-0\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\"></path>\n              </svg>\n              <p class=\"text-sm\">{{ error }}</p>\n            </div>\n          </div>\n        </div>\n\n        <!-- Footer -->\n        <div class=\"flex justify-end gap-3 mt-6\">\n          <button\n            @click=\"$emit('close')\"\n            class=\"px-4 py-2 text-sm border border-border rounded-md hover:bg-muted transition-colors\"\n          >\n            Cancel\n          </button>\n          <button\n            v-if=\"!preview && selectedStage && !templateExists\"\n            @click=\"generatePreview\"\n            :disabled=\"generatingPreview\"\n            class=\"px-4 py-2 text-sm bg-primary text-primary-foreground rounded-md hover:bg-primary/90 transition-colors disabled:opacity-50\"\n          >\n            {{ generatingPreview ? 'Generating...' : 'Generate Preview' }}\n          </button>\n          <button\n            v-if=\"preview && !templateExists\"\n            @click=\"createTemplate\"\n            :disabled=\"creating\"\n            class=\"px-4 py-2 text-sm bg-primary text-primary-foreground rounded-md hover:bg-primary/90 transition-colors disabled:opacity-50\"\n          >\n            {{ creating ? 'Adding...' : 'Add Template' }}\n          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { ref, onMounted, watch } from 'vue'\nimport { useToast } from '../composables/useToast'\n\nconst emit = defineEmits(['close', 'created'])\nconst { showToast } = useToast()\n\nconst stages = ref([])\nconst selectedStage = ref('')\nconst preview = ref('')\nconst error = ref('')\nconst generatingPreview = ref(false)\nconst creating = ref(false)\nconst templateExists = ref(false)\nconst copied = ref(false)\n\nonMounted(async () => {\n  await loadStages()\n})\n\nasync function loadStages() {\n  try {\n    const settings = await window.$api.getSettings()\n    stages.value = settings.stages || []\n  } catch (err) {\n    error.value = 'Failed to load stages'\n    console.error('Failed to load stages:', err)\n  }\n}\n\nasync function checkExistingTemplate() {\n  if (!selectedStage.value) {\n    templateExists.value = false\n    return\n  }\n\n  try {\n    const response = await window.$api.get('/templates')\n    const templates = response.templates || []\n    templateExists.value = templates.some(t => t.stage === selectedStage.value)\n    \n    if (templateExists.value) {\n      preview.value = ''\n      error.value = ''\n    }\n  } catch (err) {\n    console.error('Failed to check existing templates:', err)\n  }\n}\n\nasync function generatePreview() {\n  if (!selectedStage.value) {\n    error.value = 'Please select a stage'\n    return\n  }\n\n  error.value = ''\n  generatingPreview.value = true\n\n  try {\n    const response = await window.$api.post('/templates/generate', {\n      stage: selectedStage.value,\n      vaults: [] // Empty array means use all vaults\n    })\n    \n    preview.value = response.content || ''\n  } catch (err) {\n    error.value = err.message || 'Failed to generate template preview'\n    preview.value = ''\n  } finally {\n    generatingPreview.value = false\n  }\n}\n\nasync function createTemplate() {\n  if (!selectedStage.value || !preview.value) {\n    return\n  }\n\n  error.value = ''\n  creating.value = true\n\n  try {\n    const response = await window.$api.post('/templates/create', {\n      stage: selectedStage.value,\n      vaults: [] // Empty array means use all vaults\n    })\n    \n    showToast(`Template created: ${response.filename}`, 'success')\n    emit('created', response)\n  } catch (err) {\n    error.value = err.message || 'Failed to create template'\n  } finally {\n    creating.value = false\n  }\n}\n\nasync function copyPreview() {\n  try {\n    await navigator.clipboard.writeText(preview.value)\n    copied.value = true\n    setTimeout(() => {\n      copied.value = false\n    }, 2000)\n  } catch (err) {\n    showToast('Failed to copy to clipboard', 'error')\n  }\n}\n\n// Reset preview when stage changes\nwatch(selectedStage, () => {\n  preview.value = ''\n  error.value = ''\n})\n</script>","<template>\n  <div class=\"fixed inset-0 z-[60] overflow-y-auto\">\n    <div class=\"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:p-0\">\n      <!-- Background overlay -->\n      <div class=\"fixed inset-0 transition-opacity\" @click=\"$emit('close')\">\n        <div class=\"absolute inset-0 bg-black opacity-50\"></div>\n      </div>\n\n      <!-- Modal content -->\n      <div class=\"relative inline-block w-full max-w-lg px-6 py-5 overflow-hidden text-left align-middle transition-all transform bg-background rounded-lg shadow-xl\">\n        <!-- Header -->\n        <div class=\"flex items-center justify-between mb-4\">\n          <h3 class=\"text-lg font-semibold\">Insert Placeholder</h3>\n          <button\n            @click=\"$emit('close')\"\n            class=\"p-1 rounded hover:bg-muted transition-colors\"\n          >\n            <svg class=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M6 18L18 6M6 6l12 12\"></path>\n            </svg>\n          </button>\n        </div>\n\n        <!-- Search -->\n        <div class=\"mb-4\">\n          <input\n            v-model=\"searchQuery\"\n            type=\"text\"\n            placeholder=\"Search secrets...\"\n            class=\"w-full px-3 py-2 border border-border rounded-md bg-background focus:ring-2 focus:ring-primary focus:border-transparent\"\n            @keydown.escape=\"$emit('close')\"\n          />\n        </div>\n\n        <!-- Loading -->\n        <div v-if=\"loading\" class=\"flex justify-center py-8\">\n          <div class=\"animate-spin rounded-full h-6 w-6 border-b-2 border-primary\"></div>\n        </div>\n\n        <!-- Placeholder List -->\n        <div v-else-if=\"filteredPlaceholders.length > 0\" class=\"max-h-96 overflow-y-auto space-y-1\">\n          <button\n            v-for=\"item in filteredPlaceholders\"\n            :key=\"item.placeholder\"\n            @click=\"selectPlaceholder(item.placeholder)\"\n            class=\"w-full text-left px-3 py-2 rounded hover:bg-muted transition-colors group\"\n          >\n            <div class=\"flex items-center justify-between\">\n              <div>\n                <span class=\"font-mono text-sm\">{{ item.placeholder }}</span>\n                <div class=\"text-xs text-muted-foreground mt-1\">\n                  <span class=\"inline-flex items-center gap-1\">\n                    <span>{{ item.vault }}</span>\n                    <span>•</span>\n                    <span>{{ item.key }}</span>\n                  </span>\n                </div>\n              </div>\n              <span class=\"text-xs text-muted-foreground group-hover:text-foreground\">\n                {{ item.value }}\n              </span>\n            </div>\n          </button>\n        </div>\n\n        <!-- Empty State -->\n        <div v-else class=\"text-center py-8\">\n          <svg class=\"w-12 h-12 mx-auto text-muted-foreground mb-3\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z\"></path>\n          </svg>\n          <p class=\"text-muted-foreground\">\n            {{ searchQuery ? 'No matching secrets found' : 'No secrets available' }}\n          </p>\n        </div>\n\n        <!-- Footer -->\n        <div class=\"mt-4 pt-4 border-t border-border\">\n          <p class=\"text-xs text-muted-foreground\">\n            Select a secret to insert its placeholder at the cursor position\n          </p>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { ref, computed, onMounted } from 'vue'\n\nconst props = defineProps({\n  stage: {\n    type: String,\n    required: true\n  }\n})\n\nconst emit = defineEmits(['close', 'select'])\n\nconst loading = ref(true)\nconst searchQuery = ref('')\nconst placeholders = ref([])\n\nconst filteredPlaceholders = computed(() => {\n  if (!searchQuery.value) {\n    return placeholders.value\n  }\n  \n  const query = searchQuery.value.toLowerCase()\n  return placeholders.value.filter(item => \n    item.placeholder.toLowerCase().includes(query) ||\n    item.vault.toLowerCase().includes(query) ||\n    item.key.toLowerCase().includes(query)\n  )\n})\n\nonMounted(async () => {\n  await loadPlaceholders()\n})\n\nasync function loadPlaceholders() {\n  loading.value = true\n  try {\n    const response = await window.$api.get(`/templates/placeholders?stage=${props.stage}`)\n    placeholders.value = response.placeholders || []\n  } catch (error) {\n    console.error('Failed to load placeholders:', error)\n    placeholders.value = []\n  } finally {\n    loading.value = false\n  }\n}\n\nfunction selectPlaceholder(placeholder) {\n  emit('select', placeholder)\n  emit('close')\n}\n</script>","<template>\n  <div class=\"fixed inset-0 z-50 overflow-y-auto\">\n    <div class=\"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:p-0\">\n      <!-- Background overlay -->\n      <div class=\"fixed inset-0 transition-opacity\" @click=\"$emit('close')\">\n        <div class=\"absolute inset-0 bg-black opacity-75\"></div>\n      </div>\n\n      <!-- Modal content -->\n      <div class=\"relative inline-block w-full max-w-4xl px-6 py-5 overflow-hidden text-left align-middle transition-all transform bg-background rounded-lg shadow-xl\">\n        <!-- Header -->\n        <div class=\"flex items-center justify-between mb-4\">\n          <div>\n            <h2 class=\"text-xl font-semibold\">Edit Template</h2>\n            <p class=\"text-sm text-muted-foreground\">{{ template.filename }}</p>\n          </div>\n          <button\n            @click=\"$emit('close')\"\n            class=\"p-1 rounded hover:bg-muted transition-colors\"\n          >\n            <svg class=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M6 18L18 6M6 6l12 12\"></path>\n            </svg>\n          </button>\n        </div>\n\n        <!-- Loading State -->\n        <div v-if=\"loading\" class=\"flex justify-center py-12\">\n          <div class=\"animate-spin rounded-full h-8 w-8 border-b-2 border-primary\"></div>\n        </div>\n\n        <!-- Editor Content -->\n        <div v-else class=\"space-y-4\">\n          <!-- Toolbar -->\n          <div class=\"flex items-center justify-between bg-muted/50 rounded-md p-2\">\n            <div class=\"flex items-center gap-2\">\n              <span class=\"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-primary/10 text-primary\">\n                Stage: {{ templateData.stage }}\n              </span>\n              <span class=\"text-xs text-muted-foreground\">\n                {{ placeholders.length }} placeholder{{ placeholders.length !== 1 ? 's' : '' }}\n              </span>\n            </div>\n            <div class=\"flex items-center gap-2\">\n              <button\n                @click=\"insertPlaceholder\"\n                class=\"px-3 py-1 text-xs bg-background border border-border rounded hover:bg-muted transition-colors\"\n              >\n                Insert Placeholder\n              </button>\n              <button\n                @click=\"formatContent\"\n                class=\"px-3 py-1 text-xs bg-background border border-border rounded hover:bg-muted transition-colors\"\n              >\n                Format\n              </button>\n            </div>\n          </div>\n\n          <!-- Editor -->\n          <div class=\"relative\">\n            <textarea\n              ref=\"editorRef\"\n              v-model=\"content\"\n              @input=\"updatePlaceholders\"\n              class=\"w-full h-96 px-4 py-3 font-mono text-sm bg-muted/30 border border-border rounded-md focus:ring-2 focus:ring-primary focus:border-transparent resize-none\"\n              spellcheck=\"false\"\n              placeholder=\"# Enter your template content here...\n# Use {vault:key} syntax for placeholders\"\n            ></textarea>\n\n            <!-- Line Numbers (optional enhancement) -->\n            <div class=\"absolute top-0 left-0 w-12 h-full bg-muted/50 border-r border-border rounded-l-md pointer-events-none\">\n              <div class=\"py-3 text-right pr-2\">\n                <div v-for=\"line in lineNumbers\" :key=\"line\" class=\"text-xs text-muted-foreground h-5\">\n                  {{ line }}\n                </div>\n              </div>\n            </div>\n          </div>\n\n          <!-- Placeholder List -->\n          <div v-if=\"placeholders.length > 0\" class=\"bg-muted/30 rounded-md p-3\">\n            <h3 class=\"text-sm font-medium mb-2\">Detected Placeholders</h3>\n            <div class=\"flex flex-wrap gap-2\">\n              <span\n                v-for=\"placeholder in placeholders\"\n                :key=\"placeholder\"\n                class=\"inline-flex items-center px-2 py-1 text-xs font-mono bg-background border border-border rounded\"\n              >\n                {{ placeholder }}\n              </span>\n            </div>\n          </div>\n\n          <!-- Validation Messages -->\n          <div v-if=\"validationErrors.length > 0\" class=\"bg-destructive/10 border border-destructive/20 rounded-md p-3\">\n            <h3 class=\"text-sm font-medium mb-2 text-destructive\">Validation Errors</h3>\n            <ul class=\"space-y-1\">\n              <li v-for=\"error in validationErrors\" :key=\"error\" class=\"text-sm text-destructive flex items-start gap-2\">\n                <svg class=\"w-4 h-4 mt-0.5 flex-shrink-0\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\"></path>\n                </svg>\n                {{ error }}\n              </li>\n            </ul>\n          </div>\n\n          <!-- Modified indicator -->\n          <div v-if=\"isModified\" class=\"flex items-center gap-2 text-sm text-warning\">\n            <svg class=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\"></path>\n            </svg>\n            Unsaved changes\n          </div>\n        </div>\n\n        <!-- Footer -->\n        <div class=\"flex justify-between items-center mt-6\">\n          <div class=\"flex gap-2\">\n            <button\n              @click=\"validateTemplate\"\n              :disabled=\"validating\"\n              class=\"px-4 py-2 text-sm border border-border rounded-md hover:bg-muted transition-colors disabled:opacity-50\"\n            >\n              {{ validating ? 'Validating...' : 'Validate' }}\n            </button>\n            <button\n              @click=\"testTemplate\"\n              class=\"px-4 py-2 text-sm border border-border rounded-md hover:bg-muted transition-colors\"\n            >\n              Test\n            </button>\n          </div>\n          <div class=\"flex gap-3\">\n            <button\n              @click=\"$emit('close')\"\n              class=\"px-4 py-2 text-sm border border-border rounded-md hover:bg-muted transition-colors\"\n            >\n              Cancel\n            </button>\n            <button\n              @click=\"saveTemplate\"\n              :disabled=\"saving || !isModified\"\n              class=\"px-4 py-2 text-sm bg-primary text-primary-foreground rounded-md hover:bg-primary/90 transition-colors disabled:opacity-50\"\n            >\n              {{ saving ? 'Saving...' : 'Save Template' }}\n            </button>\n          </div>\n        </div>\n\n        <!-- Placeholder Selector Modal -->\n        <PlaceholderSelector\n          v-if=\"showPlaceholderSelector\"\n          :stage=\"templateData.stage\"\n          @close=\"showPlaceholderSelector = false\"\n          @select=\"onPlaceholderSelect\"\n        />\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { ref, computed, onMounted, watch } from 'vue'\nimport { useToast } from '../composables/useToast'\nimport PlaceholderSelector from './PlaceholderSelector.vue'\n\nconst props = defineProps({\n  template: {\n    type: Object,\n    required: true\n  }\n})\n\nconst emit = defineEmits(['close', 'saved'])\nconst { showToast } = useToast()\n\nconst editorRef = ref(null)\nconst loading = ref(true)\nconst saving = ref(false)\nconst validating = ref(false)\nconst content = ref('')\nconst originalContent = ref('')\nconst templateData = ref({})\nconst placeholders = ref([])\nconst validationErrors = ref([])\nconst showPlaceholderSelector = ref(false)\n\nconst isModified = computed(() => content.value !== originalContent.value)\nconst lineNumbers = computed(() => {\n  const lines = content.value.split('\\n').length\n  return Array.from({ length: lines }, (_, i) => i + 1)\n})\n\nonMounted(async () => {\n  await loadTemplate()\n})\n\nasync function loadTemplate() {\n  loading.value = true\n  try {\n    const response = await window.$api.get(`/templates/${encodeURIComponent(props.template.filename)}`)\n    templateData.value = response\n    content.value = response.content || ''\n    originalContent.value = response.content || ''\n    placeholders.value = response.placeholders || []\n  } catch (error) {\n    showToast('Failed to load template', 'error')\n    console.error('Failed to load template:', error)\n    emit('close')\n  } finally {\n    loading.value = false\n  }\n}\n\nasync function saveTemplate() {\n  if (!isModified.value) return\n\n  saving.value = true\n  validationErrors.value = []\n\n  try {\n    await window.$api.put(`/templates/${encodeURIComponent(props.template.filename)}`, {\n      content: content.value\n    })\n    \n    originalContent.value = content.value\n    showToast('Template saved successfully', 'success')\n    emit('saved')\n  } catch (error) {\n    showToast('Failed to save template', 'error')\n    console.error('Failed to save template:', error)\n  } finally {\n    saving.value = false\n  }\n}\n\nasync function validateTemplate() {\n  validating.value = true\n  validationErrors.value = []\n\n  try {\n    const response = await window.$api.post('/templates/validate', {\n      content: content.value,\n      stage: templateData.value.stage\n    })\n\n    if (!response.valid) {\n      validationErrors.value = response.errors.map(e => \n        `Line ${e.line}: ${e.key} - ${e.error}`\n      )\n      showToast('Template has validation errors', 'warning')\n    } else {\n      showToast('Template is valid', 'success')\n      \n      if (response.warnings && response.warnings.length > 0) {\n        const unusedCount = response.warnings.filter(w => w.type === 'unused').length\n        if (unusedCount > 0) {\n          showToast(`${unusedCount} unused secret${unusedCount !== 1 ? 's' : ''} found`, 'info')\n        }\n      }\n    }\n  } catch (error) {\n    showToast('Failed to validate template', 'error')\n    console.error('Failed to validate template:', error)\n  } finally {\n    validating.value = false\n  }\n}\n\nfunction testTemplate() {\n  // This would open a test modal or navigate to test view\n  // For now, just save and emit an event\n  if (isModified.value) {\n    showToast('Please save changes before testing', 'warning')\n    return\n  }\n  emit('close')\n  // Could emit a 'test' event to parent to open test modal\n}\n\nfunction insertPlaceholder() {\n  showPlaceholderSelector.value = true\n}\n\nfunction onPlaceholderSelect(placeholder) {\n  const textarea = editorRef.value\n  const start = textarea.selectionStart\n  const end = textarea.selectionEnd\n  const text = textarea.value\n  \n  const newText = text.substring(0, start) + placeholder + text.substring(end)\n  content.value = newText\n  \n  // Set cursor position after inserted placeholder\n  setTimeout(() => {\n    textarea.selectionStart = textarea.selectionEnd = start + placeholder.length\n    textarea.focus()\n  }, 0)\n}\n\nfunction formatContent() {\n  // Basic formatting: ensure consistent spacing and organization\n  const lines = content.value.split('\\n')\n  const formatted = []\n  let lastWasEmpty = false\n  \n  for (const line of lines) {\n    const trimmed = line.trim()\n    \n    // Skip multiple empty lines\n    if (trimmed === '') {\n      if (!lastWasEmpty) {\n        formatted.push('')\n        lastWasEmpty = true\n      }\n      continue\n    }\n    \n    lastWasEmpty = false\n    \n    // Format based on content type\n    if (trimmed.startsWith('#')) {\n      // Comment line - preserve as is\n      formatted.push(line)\n    } else if (trimmed.includes('=')) {\n      // Environment variable line\n      const [key, ...valueParts] = trimmed.split('=')\n      const value = valueParts.join('=')\n      formatted.push(`${key.trim()}=${value.trim()}`)\n    } else {\n      formatted.push(line)\n    }\n  }\n  \n  content.value = formatted.join('\\n').trim() + '\\n'\n  showToast('Template formatted', 'success')\n}\n\nfunction updatePlaceholders() {\n  // Extract placeholders from content\n  const regex = /\\{([^:}]+):([^}]+)\\}/g\n  const found = new Set()\n  let match\n  \n  while ((match = regex.exec(content.value)) !== null) {\n    found.add(match[0])\n  }\n  \n  placeholders.value = Array.from(found).sort()\n}\n\n// Watch for content changes to update placeholders\nwatch(content, updatePlaceholders)\n</script>\n\n<style scoped>\ntextarea {\n  padding-left: 3.5rem; /* Space for line numbers */\n}\n</style>","<template>\n  <div class=\"fixed inset-0 z-50 overflow-y-auto\">\n    <div class=\"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:p-0\">\n      <!-- Background overlay -->\n      <div class=\"fixed inset-0 transition-opacity\" @click=\"$emit('close')\">\n        <div class=\"absolute inset-0 bg-black opacity-75\"></div>\n      </div>\n\n      <!-- Modal content -->\n      <div class=\"relative inline-block w-full max-w-3xl px-6 py-5 overflow-hidden text-left align-middle transition-all transform bg-background rounded-lg shadow-xl\">\n        <!-- Header -->\n        <div class=\"flex items-center justify-between mb-4\">\n          <div>\n            <h2 class=\"text-xl font-semibold\">Test Template</h2>\n            <p class=\"text-sm text-muted-foreground\">{{ template.filename }}</p>\n          </div>\n          <button\n            @click=\"$emit('close')\"\n            class=\"p-1 rounded hover:bg-muted transition-colors\"\n          >\n            <svg class=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M6 18L18 6M6 6l12 12\"></path>\n            </svg>\n          </button>\n        </div>\n\n        <!-- Test Configuration -->\n        <div class=\"space-y-4 mb-6\">\n          <div>\n            <label class=\"block text-sm font-medium mb-2\">Test Against Stage</label>\n            <select\n              v-model=\"selectedStage\"\n              class=\"w-full px-3 py-2 border border-border rounded-md bg-background focus:ring-2 focus:ring-primary focus:border-transparent\"\n            >\n              <option :value=\"template.stage\">{{ template.stage }} (template stage)</option>\n              <option v-for=\"stage in otherStages\" :key=\"stage\" :value=\"stage\">\n                {{ stage }}\n              </option>\n            </select>\n          </div>\n        </div>\n\n        <!-- Run Test Button -->\n        <div v-if=\"!hasRun\" class=\"flex justify-center py-8\">\n          <button\n            @click=\"runValidation\"\n            :disabled=\"validating\"\n            class=\"px-6 py-3 bg-primary text-primary-foreground rounded-md hover:bg-primary/90 transition-colors disabled:opacity-50\"\n          >\n            {{ validating ? 'Testing...' : 'Run Validation Test' }}\n          </button>\n        </div>\n\n        <!-- Results -->\n        <div v-else class=\"space-y-6\">\n          <!-- Overall Status -->\n          <div :class=\"[\n            'rounded-lg p-4 border',\n            validationResult.valid \n              ? 'bg-green-500/10 border-green-500/20' \n              : 'bg-destructive/10 border-destructive/20'\n          ]\">\n            <div class=\"flex items-center gap-3\">\n              <svg v-if=\"validationResult.valid\" class=\"w-6 h-6 text-green-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z\"></path>\n              </svg>\n              <svg v-else class=\"w-6 h-6 text-destructive\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z\"></path>\n              </svg>\n              <div>\n                <h3 class=\"font-semibold\">\n                  {{ validationResult.valid ? 'Template is Valid' : 'Template Has Issues' }}\n                </h3>\n                <p class=\"text-sm text-muted-foreground\">\n                  {{ validationResult.placeholderCount }} placeholder{{ validationResult.placeholderCount !== 1 ? 's' : '' }} checked\n                </p>\n              </div>\n            </div>\n          </div>\n\n          <!-- Errors -->\n          <div v-if=\"validationResult.errors && validationResult.errors.length > 0\" class=\"space-y-4\">\n            <h3 class=\"font-medium text-destructive\">Errors ({{ validationResult.errors.length }})</h3>\n            <div class=\"space-y-2\">\n              <div \n                v-for=\"error in validationResult.errors\" \n                :key=\"`${error.line}-${error.key}`\"\n                class=\"bg-destructive/5 border border-destructive/20 rounded-md p-3\"\n              >\n                <div class=\"flex items-start gap-2\">\n                  <svg class=\"w-4 h-4 mt-0.5 text-destructive flex-shrink-0\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\"></path>\n                  </svg>\n                  <div class=\"flex-1\">\n                    <p class=\"text-sm font-medium\">\n                      Line {{ error.line }}: <span class=\"font-mono\">{{ error.key }}</span>\n                    </p>\n                    <p class=\"text-sm text-muted-foreground mt-1\">\n                      {{ error.error }}\n                    </p>\n                    <p class=\"text-xs text-muted-foreground mt-1\">\n                      Vault: {{ error.vault || 'Unknown' }}\n                    </p>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          <!-- Warnings -->\n          <div v-if=\"validationResult.warnings && validationResult.warnings.length > 0\" class=\"space-y-4\">\n            <h3 class=\"font-medium text-warning\">Warnings ({{ validationResult.warnings.length }})</h3>\n            <div class=\"space-y-2\">\n              <div \n                v-for=\"warning in validationResult.warnings\" \n                :key=\"`${warning.vault}-${warning.key}`\"\n                class=\"bg-warning/5 border border-warning/20 rounded-md p-3\"\n              >\n                <div class=\"flex items-start gap-2\">\n                  <svg class=\"w-4 h-4 mt-0.5 text-warning flex-shrink-0\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z\"></path>\n                  </svg>\n                  <div class=\"flex-1\">\n                    <p class=\"text-sm font-medium\">\n                      {{ warning.message }}\n                    </p>\n                    <p class=\"text-sm text-muted-foreground mt-1\">\n                      <span class=\"font-mono\">{{ warning.vault }}:{{ warning.key }}</span>\n                    </p>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          <!-- Unused Secrets -->\n          <div v-if=\"validationResult.unusedSecrets && validationResult.unusedSecrets.length > 0\" class=\"space-y-4\">\n            <h3 class=\"font-medium\">Unused Secrets ({{ validationResult.unusedSecrets.length }})</h3>\n            <div class=\"bg-muted/30 rounded-md p-3\">\n              <p class=\"text-sm text-muted-foreground mb-3\">\n                These secrets exist in the vaults but are not referenced in the template:\n              </p>\n              <div class=\"flex flex-wrap gap-2\">\n                <span \n                  v-for=\"secret in validationResult.unusedSecrets\" \n                  :key=\"`${secret.vault}-${secret.key}`\"\n                  class=\"inline-flex items-center px-2 py-1 text-xs font-mono bg-background border border-border rounded\"\n                >\n                  {{ secret.vault }}:{{ secret.key }}\n                </span>\n              </div>\n            </div>\n          </div>\n\n          <!-- Success Message -->\n          <div v-if=\"validationResult.valid && (!validationResult.warnings || validationResult.warnings.length === 0)\" class=\"text-center py-4\">\n            <svg class=\"w-12 h-12 mx-auto text-green-600 mb-3\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z\"></path>\n            </svg>\n            <p class=\"text-green-600 font-medium\">All placeholders are valid!</p>\n            <p class=\"text-sm text-muted-foreground mt-1\">\n              The template can be successfully processed for the {{ selectedStage }} stage.\n            </p>\n          </div>\n        </div>\n\n        <!-- Footer -->\n        <div class=\"flex justify-end gap-3 mt-6\">\n          <button\n            v-if=\"hasRun\"\n            @click=\"resetTest\"\n            class=\"px-4 py-2 text-sm border border-border rounded-md hover:bg-muted transition-colors\"\n          >\n            Test Again\n          </button>\n          <button\n            @click=\"$emit('close')\"\n            class=\"px-4 py-2 text-sm bg-primary text-primary-foreground rounded-md hover:bg-primary/90 transition-colors\"\n          >\n            Close\n          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { ref, computed, onMounted } from 'vue'\nimport { useToast } from '../composables/useToast'\n\nconst props = defineProps({\n  template: {\n    type: Object,\n    required: true\n  }\n})\n\nconst emit = defineEmits(['close'])\nconst { showToast } = useToast()\n\nconst validating = ref(false)\nconst hasRun = ref(false)\nconst selectedStage = ref('')\nconst stages = ref([])\nconst validationResult = ref({\n  valid: false,\n  errors: [],\n  warnings: [],\n  unusedSecrets: [],\n  placeholderCount: 0\n})\n\nconst otherStages = computed(() => {\n  return stages.value.filter(s => s !== props.template.stage)\n})\n\nonMounted(async () => {\n  selectedStage.value = props.template.stage\n  await loadStages()\n})\n\nasync function loadStages() {\n  try {\n    const settings = await window.$api.getSettings()\n    stages.value = settings.stages || []\n  } catch (error) {\n    console.error('Failed to load stages:', error)\n  }\n}\n\nasync function runValidation() {\n  if (!selectedStage.value) {\n    showToast('Please select a stage', 'warning')\n    return\n  }\n\n  validating.value = true\n  try {\n    const response = await window.$api.post('/templates/validate', {\n      filename: props.template.filename,\n      stage: selectedStage.value\n    })\n\n    validationResult.value = response\n    hasRun.value = true\n\n    if (response.valid) {\n      if (response.warnings && response.warnings.length > 0) {\n        showToast('Template is valid with warnings', 'warning')\n      } else {\n        showToast('Template is fully valid!', 'success')\n      }\n    } else {\n      showToast(`Found ${response.errors.length} error${response.errors.length !== 1 ? 's' : ''}`, 'error')\n    }\n  } catch (error) {\n    showToast('Failed to validate template', 'error')\n    console.error('Failed to validate template:', error)\n  } finally {\n    validating.value = false\n  }\n}\n\nfunction resetTest() {\n  hasRun.value = false\n  validationResult.value = {\n    valid: false,\n    errors: [],\n    warnings: [],\n    unusedSecrets: [],\n    placeholderCount: 0\n  }\n}\n</script>","<template>\n  <div class=\"fixed inset-0 z-50 overflow-y-auto\">\n    <div class=\"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:p-0\">\n      <!-- Background overlay -->\n      <div class=\"fixed inset-0 transition-opacity\" @click=\"$emit('close')\">\n        <div class=\"absolute inset-0 bg-black opacity-75\"></div>\n      </div>\n\n      <!-- Modal content -->\n      <div class=\"relative inline-block w-full max-w-4xl px-6 py-5 overflow-hidden text-left align-middle transition-all transform bg-background rounded-lg shadow-xl\">\n        <!-- Header -->\n        <div class=\"flex items-center justify-between mb-4\">\n          <div>\n            <h2 class=\"text-xl font-semibold\">Process Template</h2>\n            <p class=\"text-sm text-muted-foreground\">{{ template.filename }}</p>\n          </div>\n          <button\n            @click=\"$emit('close')\"\n            class=\"p-1 rounded hover:bg-muted transition-colors\"\n          >\n            <svg class=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M6 18L18 6M6 6l12 12\"></path>\n            </svg>\n          </button>\n        </div>\n\n        <!-- Configuration -->\n        <div class=\"space-y-4 mb-6\">\n          <div class=\"grid grid-cols-2 gap-4\">\n            <div>\n              <label class=\"block text-sm font-medium mb-2\">Stage</label>\n              <select\n                v-model=\"selectedStage\"\n                class=\"w-full px-3 py-2 border border-border rounded-md bg-background focus:ring-2 focus:ring-primary focus:border-transparent\"\n              >\n                <option :value=\"template.stage\">{{ template.stage }} (template stage)</option>\n                <option v-for=\"stage in otherStages\" :key=\"stage\" :value=\"stage\">\n                  {{ stage }}\n                </option>\n              </select>\n            </div>\n            \n            <div>\n              <label class=\"block text-sm font-medium mb-2\">Missing Secret Strategy</label>\n              <select\n                v-model=\"missingStrategy\"\n                class=\"w-full px-3 py-2 border border-border rounded-md bg-background focus:ring-2 focus:ring-primary focus:border-transparent\"\n              >\n                <option value=\"skip\">Skip (leave placeholder)</option>\n                <option value=\"empty\">Empty string</option>\n                <option value=\"error\">Error</option>\n              </select>\n            </div>\n          </div>\n\n          <div class=\"bg-muted/30 rounded-md p-3\">\n            <p class=\"text-sm text-muted-foreground\">\n              <strong>Skip:</strong> Leaves placeholders as-is for missing secrets<br>\n              <strong>Empty:</strong> Replaces missing secrets with empty strings<br>\n              <strong>Error:</strong> Stops processing if any secret is missing\n            </p>\n          </div>\n        </div>\n\n        <!-- Process Button -->\n        <div v-if=\"!hasProcessed\" class=\"flex justify-center py-8\">\n          <button\n            @click=\"processTemplate\"\n            :disabled=\"processing\"\n            class=\"px-6 py-3 bg-primary text-primary-foreground rounded-md hover:bg-primary/90 transition-colors disabled:opacity-50\"\n          >\n            {{ processing ? 'Processing...' : 'Process Template' }}\n          </button>\n        </div>\n\n        <!-- Results -->\n        <div v-else class=\"space-y-4\">\n          <!-- Validation Status -->\n          <div v-if=\"!result.validation.valid\" class=\"bg-destructive/10 border border-destructive/20 rounded-md p-3\">\n            <div class=\"flex items-center gap-2\">\n              <svg class=\"w-5 h-5 text-destructive flex-shrink-0\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z\"></path>\n              </svg>\n              <p class=\"text-sm\">\n                Template has {{ result.validation.errorCount }} validation error{{ result.validation.errorCount !== 1 ? 's' : '' }}. \n                Output may be incomplete.\n              </p>\n            </div>\n          </div>\n\n          <!-- Output -->\n          <div>\n            <div class=\"flex items-center justify-between mb-2\">\n              <label class=\"block text-sm font-medium\">Processed Output</label>\n              <div class=\"flex items-center gap-2\">\n                <button\n                  @click=\"downloadOutput\"\n                  class=\"px-3 py-1 text-xs bg-background border border-border rounded hover:bg-muted transition-colors\"\n                >\n                  Download .env\n                </button>\n                <button\n                  @click=\"copyOutput\"\n                  class=\"px-3 py-1 text-xs bg-background border border-border rounded hover:bg-muted transition-colors\"\n                >\n                  {{ copied ? 'Copied!' : 'Copy' }}\n                </button>\n              </div>\n            </div>\n            <div class=\"relative\">\n              <pre class=\"bg-muted/50 rounded-md p-4 text-sm font-mono overflow-x-auto max-h-96 overflow-y-auto\">{{ result.output }}</pre>\n            </div>\n          </div>\n\n          <!-- Statistics -->\n          <div class=\"grid grid-cols-3 gap-4\">\n            <div class=\"bg-muted/30 rounded-md p-3 text-center\">\n              <p class=\"text-2xl font-semibold\">{{ result.placeholders?.length || 0 }}</p>\n              <p class=\"text-xs text-muted-foreground\">Total Placeholders</p>\n            </div>\n            <div class=\"bg-muted/30 rounded-md p-3 text-center\">\n              <p class=\"text-2xl font-semibold text-green-600\">{{ processedCount }}</p>\n              <p class=\"text-xs text-muted-foreground\">Processed</p>\n            </div>\n            <div class=\"bg-muted/30 rounded-md p-3 text-center\">\n              <p class=\"text-2xl font-semibold text-warning\">{{ skippedCount }}</p>\n              <p class=\"text-xs text-muted-foreground\">Skipped</p>\n            </div>\n          </div>\n        </div>\n\n        <!-- Error Display -->\n        <div v-if=\"error\" class=\"bg-destructive/10 border border-destructive/20 rounded-md p-3\">\n          <div class=\"flex items-center gap-2\">\n            <svg class=\"w-5 h-5 text-destructive flex-shrink-0\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\"></path>\n            </svg>\n            <p class=\"text-sm\">{{ error }}</p>\n          </div>\n        </div>\n\n        <!-- Footer -->\n        <div class=\"flex justify-end gap-3 mt-6\">\n          <button\n            v-if=\"hasProcessed\"\n            @click=\"resetProcess\"\n            class=\"px-4 py-2 text-sm border border-border rounded-md hover:bg-muted transition-colors\"\n          >\n            Process Again\n          </button>\n          <button\n            @click=\"$emit('close')\"\n            class=\"px-4 py-2 text-sm bg-primary text-primary-foreground rounded-md hover:bg-primary/90 transition-colors\"\n          >\n            Close\n          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { ref, computed, onMounted } from 'vue'\nimport { useToast } from '../composables/useToast'\n\nconst props = defineProps({\n  template: {\n    type: Object,\n    required: true\n  }\n})\n\nconst emit = defineEmits(['close'])\nconst { showToast } = useToast()\n\nconst processing = ref(false)\nconst hasProcessed = ref(false)\nconst selectedStage = ref('')\nconst missingStrategy = ref('skip')\nconst stages = ref([])\nconst result = ref({})\nconst error = ref('')\nconst copied = ref(false)\n\nconst otherStages = computed(() => {\n  return stages.value.filter(s => s !== props.template.stage)\n})\n\nconst processedCount = computed(() => {\n  if (!result.value.output || !result.value.placeholders) return 0\n  \n  // Count placeholders that were replaced (not still in output)\n  let count = 0\n  for (const placeholder of result.value.placeholders) {\n    if (!result.value.output.includes(placeholder)) {\n      count++\n    }\n  }\n  return count\n})\n\nconst skippedCount = computed(() => {\n  if (!result.value.placeholders) return 0\n  return result.value.placeholders.length - processedCount.value\n})\n\nonMounted(async () => {\n  selectedStage.value = props.template.stage\n  await loadStages()\n})\n\nasync function loadStages() {\n  try {\n    const settings = await window.$api.getSettings()\n    stages.value = settings.stages || []\n  } catch (err) {\n    console.error('Failed to load stages:', err)\n  }\n}\n\nasync function processTemplate() {\n  if (!selectedStage.value) {\n    showToast('Please select a stage', 'warning')\n    return\n  }\n\n  processing.value = true\n  error.value = ''\n\n  try {\n    const response = await window.$api.post('/templates/process', {\n      filename: props.template.filename,\n      stage: selectedStage.value,\n      strategy: missingStrategy.value\n    })\n\n    result.value = response\n    hasProcessed.value = true\n\n    if (response.validation && !response.validation.valid) {\n      showToast('Template processed with validation errors', 'warning')\n    } else {\n      showToast('Template processed successfully', 'success')\n    }\n  } catch (err) {\n    error.value = err.message || 'Failed to process template'\n    showToast('Failed to process template', 'error')\n  } finally {\n    processing.value = false\n  }\n}\n\nfunction resetProcess() {\n  hasProcessed.value = false\n  result.value = {}\n  error.value = ''\n  copied.value = false\n}\n\nasync function copyOutput() {\n  try {\n    await navigator.clipboard.writeText(result.value.output)\n    copied.value = true\n    showToast('Copied to clipboard', 'success')\n    setTimeout(() => {\n      copied.value = false\n    }, 2000)\n  } catch (err) {\n    showToast('Failed to copy to clipboard', 'error')\n  }\n}\n\nfunction downloadOutput() {\n  const blob = new Blob([result.value.output], { type: 'text/plain' })\n  const url = URL.createObjectURL(blob)\n  const a = document.createElement('a')\n  a.href = url\n  a.download = `${selectedStage.value}.env`\n  document.body.appendChild(a)\n  a.click()\n  document.body.removeChild(a)\n  URL.revokeObjectURL(url)\n  showToast('Downloaded .env file', 'success')\n}\n</script>","import { createRouter, createWebHashHistory } from 'vue-router'\nimport SecretsTable from './components/SecretsTable.vue'\nimport DiffView from './components/DiffView.vue'\nimport SettingsView from './components/SettingsView.vue'\nimport TemplatesView from './components/TemplatesView.vue'\n\nconst routes = [\n  {\n    path: '/',\n    redirect: '/secrets'\n  },\n  {\n    path: '/secrets',\n    name: 'secrets',\n    component: SecretsTable\n  },\n  {\n    path: '/templates',\n    name: 'templates',\n    component: TemplatesView\n  },\n  {\n    path: '/diff',\n    name: 'diff',\n    component: DiffView\n  },\n  {\n    path: '/settings',\n    name: 'settings',\n    component: SettingsView\n  }\n]\n\nconst router = createRouter({\n  history: createWebHashHistory(),\n  routes\n})\n\nexport default router","<template>\n  <div class=\"space-y-6\">\n    <!-- Header -->\n    <div class=\"flex justify-between items-center\">\n      <div>\n        <h1 class=\"text-2xl font-bold\">Environment Templates</h1>\n        <p class=\"text-muted-foreground mt-1\">\n          Manage .env templates for different stages\n        </p>\n      </div>\n      <button \n        @click=\"showCreateModal = true\"\n        class=\"flex items-center space-x-2 px-4 py-2 bg-primary text-primary-foreground rounded-md hover:bg-primary/90 transition-colors text-sm font-medium\"\n      >\n        <svg class=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n          <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 4v16m8-8H4\"></path>\n        </svg>\n        <span>Add Template</span>\n      </button>\n    </div>\n\n    <!-- Template Path Display -->\n    <div class=\"bg-muted/50 rounded-lg p-4\">\n      <div class=\"flex items-center gap-2\">\n        <svg class=\"w-4 h-4 text-muted-foreground\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n          <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z\"></path>\n        </svg>\n        <span class=\"text-sm text-muted-foreground\">Template Directory:</span>\n        <span class=\"text-sm font-mono\">{{ templatePath }}</span>\n      </div>\n    </div>\n\n    <!-- Templates Table -->\n    <div v-if=\"loading\" class=\"flex justify-center py-12\">\n      <div class=\"animate-spin rounded-full h-8 w-8 border-b-2 border-primary\"></div>\n    </div>\n\n    <div v-else-if=\"templates.length === 0\" class=\"text-center py-12 bg-muted/30 rounded-lg\">\n      <svg class=\"w-12 h-12 mx-auto text-muted-foreground mb-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n        <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\"></path>\n      </svg>\n      <p class=\"text-muted-foreground mb-2\">No templates found</p>\n      <p class=\"text-sm text-muted-foreground\">Create your first template to get started</p>\n    </div>\n\n    <div v-else class=\"bg-background border border-border rounded-lg overflow-hidden\">\n      <table class=\"w-full\">\n        <thead class=\"bg-muted/50\">\n          <tr>\n            <th class=\"px-4 py-3 text-left text-sm font-medium text-muted-foreground\">Template</th>\n            <th class=\"px-4 py-3 text-left text-sm font-medium text-muted-foreground\">Stage</th>\n            <th class=\"px-4 py-3 text-left text-sm font-medium text-muted-foreground\">Size</th>\n            <th class=\"px-4 py-3 text-left text-sm font-medium text-muted-foreground\">Last Modified</th>\n            <th class=\"px-4 py-3 text-right text-sm font-medium text-muted-foreground\">Actions</th>\n          </tr>\n        </thead>\n        <tbody class=\"divide-y divide-border\">\n          <tr v-for=\"template in templates\" :key=\"template.filename\" class=\"hover:bg-muted/30 transition-colors\">\n            <td class=\"px-4 py-3\">\n              <div class=\"flex items-center gap-2\">\n                <svg class=\"w-4 h-4 text-muted-foreground\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\"></path>\n                </svg>\n                <span class=\"font-mono text-sm\">{{ template.filename }}</span>\n              </div>\n            </td>\n            <td class=\"px-4 py-3\">\n              <span class=\"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-primary/10 text-primary\">\n                {{ template.stageDisplay || template.stage }}\n              </span>\n            </td>\n            <td class=\"px-4 py-3 text-sm text-muted-foreground\">\n              {{ formatSize(template.size) }}\n            </td>\n            <td class=\"px-4 py-3 text-sm text-muted-foreground\">\n              {{ formatDate(template.lastModified) }}\n            </td>\n            <td class=\"px-4 py-3\">\n              <div class=\"flex items-center justify-end gap-2\">\n                <button\n                  @click=\"editTemplate(template)\"\n                  class=\"p-1.5 text-muted-foreground hover:text-foreground hover:bg-muted rounded transition-colors\"\n                  title=\"Edit Template\"\n                >\n                  <svg class=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z\"></path>\n                  </svg>\n                </button>\n                <button\n                  @click=\"testTemplate(template)\"\n                  class=\"p-1.5 text-muted-foreground hover:text-foreground hover:bg-muted rounded transition-colors\"\n                  title=\"Test Template\"\n                >\n                  <svg class=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z\"></path>\n                  </svg>\n                </button>\n                <button\n                  @click=\"processTemplate(template)\"\n                  class=\"p-1.5 text-muted-foreground hover:text-foreground hover:bg-muted rounded transition-colors\"\n                  title=\"Process Template\"\n                >\n                  <svg class=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4\"></path>\n                  </svg>\n                </button>\n                <button\n                  @click=\"deleteTemplate(template)\"\n                  class=\"p-1.5 text-muted-foreground hover:text-destructive hover:bg-destructive/10 rounded transition-colors\"\n                  title=\"Delete Template\"\n                >\n                  <svg class=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\"></path>\n                  </svg>\n                </button>\n              </div>\n            </td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n\n    <!-- Modals -->\n    <CreateTemplateModal \n      v-if=\"showCreateModal\"\n      @close=\"showCreateModal = false\"\n      @created=\"onTemplateCreated\"\n    />\n\n    <TemplateEditorModal\n      v-if=\"editingTemplate\"\n      :template=\"editingTemplate\"\n      @close=\"editingTemplate = null\"\n      @saved=\"onTemplateSaved\"\n    />\n\n    <TemplateTesterModal\n      v-if=\"testingTemplate\"\n      :template=\"testingTemplate\"\n      @close=\"testingTemplate = null\"\n    />\n\n    <TemplateProcessorModal\n      v-if=\"processingTemplate\"\n      :template=\"processingTemplate\"\n      @close=\"processingTemplate = null\"\n    />\n  </div>\n</template>\n\n<script setup>\nimport { ref, onMounted } from 'vue'\nimport { useToast } from '../composables/useToast'\nimport CreateTemplateModal from './CreateTemplateModal.vue'\nimport TemplateEditorModal from './TemplateEditorModal.vue'\nimport TemplateTesterModal from './TemplateTesterModal.vue'\nimport TemplateProcessorModal from './TemplateProcessorModal.vue'\n\nconst { showToast } = useToast()\n\nconst loading = ref(false)\nconst templates = ref([])\nconst templatePath = ref('')\nconst showCreateModal = ref(false)\nconst editingTemplate = ref(null)\nconst testingTemplate = ref(null)\nconst processingTemplate = ref(null)\n\nonMounted(async () => {\n  await loadSettings()\n  loadTemplates()\n})\n\nasync function loadSettings() {\n  try {\n    const settings = await window.$api.getSettings()\n    templatePath.value = settings.template_path || 'env'\n  } catch (error) {\n    console.error('Failed to load settings:', error)\n    templatePath.value = 'env' // fallback\n  }\n}\n\nasync function loadTemplates() {\n  loading.value = true\n  try {\n    const response = await window.$api.get('/templates')\n    templates.value = response.templates || []\n  } catch (error) {\n    showToast('Failed to load templates', 'error')\n    console.error('Failed to load templates:', error)\n  } finally {\n    loading.value = false\n  }\n}\n\nfunction editTemplate(template) {\n  editingTemplate.value = template\n}\n\nfunction testTemplate(template) {\n  testingTemplate.value = template\n}\n\nfunction processTemplate(template) {\n  processingTemplate.value = template\n}\n\nasync function deleteTemplate(template) {\n  if (!confirm(`Are you sure you want to delete ${template.filename}?`)) {\n    return\n  }\n\n  try {\n    await window.$api.delete(`/templates/${encodeURIComponent(template.filename)}`)\n    showToast('Template deleted successfully', 'success')\n    await loadTemplates()\n  } catch (error) {\n    showToast('Failed to delete template', 'error')\n    console.error('Failed to delete template:', error)\n  }\n}\n\nfunction onTemplateCreated() {\n  showCreateModal.value = false\n  loadTemplates()\n}\n\nfunction onTemplateSaved() {\n  editingTemplate.value = null\n  loadTemplates()\n}\n\nfunction formatSize(bytes) {\n  if (bytes === 0) return '0 B'\n  const k = 1024\n  const sizes = ['B', 'KB', 'MB']\n  const i = Math.floor(Math.log(bytes) / Math.log(k))\n  return Math.round(bytes / Math.pow(k, i) * 10) / 10 + ' ' + sizes[i]\n}\n\nfunction formatDate(timestamp) {\n  if (!timestamp) return 'Unknown'\n  const date = new Date(timestamp * 1000)\n  const now = new Date()\n  const diff = now - date\n  \n  // Less than a minute\n  if (diff < 60000) return 'Just now'\n  \n  // Less than an hour\n  if (diff < 3600000) {\n    const minutes = Math.floor(diff / 60000)\n    return `${minutes} minute${minutes === 1 ? '' : 's'} ago`\n  }\n  \n  // Less than a day\n  if (diff < 86400000) {\n    const hours = Math.floor(diff / 3600000)\n    return `${hours} hour${hours === 1 ? '' : 's'} ago`\n  }\n  \n  // Less than a week\n  if (diff < 604800000) {\n    const days = Math.floor(diff / 86400000)\n    return `${days} day${days === 1 ? '' : 's'} ago`\n  }\n  \n  // Default to date string\n  return date.toLocaleDateString()\n}\n</script>","import { createApp } from 'vue'\nimport './style.css'\nimport App from './App.vue'\nimport router from './router'\nimport { api } from './services/api'\n\n// Make API available globally\nwindow.$api = api\n\ncreateApp(App)\n  .use(router)\n  .mount('#app')"],"names":["props","__props","variantClasses","computed","variants","default","success","destructive","toast","variant","icon","template","_createElementBlock","class","_normalizeClass","value","_createElementVNode","_hoisted_1","_openBlock","_hoisted_2","_createBlock","_resolveDynamicComponent","_hoisted_3","title","_hoisted_4","_toDisplayString","description","_hoisted_5","onClick","_cache","$event","$emit","id","fill","stroke","viewBox","d","toasts","dismiss","useToast","_createVNode","_TransitionGroup","name","tag","_Fragment","_renderList","_unref","Toast","key","onDismiss","handlers","ref","search","closeModal","toggleMask","useKeyboardShortcuts","handleKeydown","event","target","tagName","metaKey","ctrlKey","preventDefault","forEach","handler","isListenerSetup","registerSearchHandler","registerModalCloseHandler","push","index","indexOf","splice","registerMaskToggleHandler","setupGlobalListener","document","addEventListener","teardownGlobalListener","removeEventListener","tabs","label","path","appName","keepVersion","onMounted","async","settings","window","$api","getSettings","app_name","keep_version","error","loadSettings","onUnmounted","ToastContainer","height","width","xmlns","_hoisted_6","_hoisted_7","tab","_component_router_link","to","custom","_withCtx","isActive","$router","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","_component_router_view","emit","__emit","vaultOpen","stageOpen","vaultDisplay","vault","vaultObj","_a","vaults","find","v","slug","display","e","closest","selectVault","stage","stages","s","selectStage","displayValue","masked","maskValue","api","constructor","this","baseUrl","token","KEEP_AUTH_TOKEN","request","options","response","fetch","headers","ok","json","catch","Error","status","get","post","body","method","JSON","stringify","put","listSecrets","unmask","getSecret","encodeURIComponent","createSecret","updateSecret","deleteSecret","renameSecret","oldKey","newKey","copySecretToStage","targetStage","targetVault","sourceStage","sourceVault","searchSecrets","query","getSecretHistory","limit","updateSettings","listVaults","addVault","updateVault","deleteVault","listStages","addStage","removeStage","verifyVaults","getDiff","join","exportSecrets","format","analyzeImport","content","only","except","executeImport","strategy","dry_run","useSecrets","secrets","loading","loadSecrets","err","message","clearError","form","reactive","keyError","saveError","validateKey","includes","test","save","secret","watch","newSecret","initialKey","immediate","onSubmit","type","disabled","placeholder","required","_vModelText","rows","_hoisted_12","currentKey","trim","isValid","handleRename","onKeyup","targetCombination","availableCombinations","combinations","vaultSlug","handleCopy","split","secretKey","currentVault","currentStage","combo","history","unmasked","toggleUnmask","data","loadHistory","length","_hoisted_15","_hoisted_14","_hoisted_16","entry","version","_hoisted_17","_hoisted_18","_hoisted_19","_hoisted_20","dataType","_hoisted_21","_hoisted_22","formatDate","timestamp","modifiedDate","_hoisted_23","modifiedBy","_hoisted_24","_hoisted_25","handleDelete","isOpen","menuStyle","buttonRef","toggleMenu","stopPropagation","dispatchEvent","CustomEvent","rect","currentTarget","getBoundingClientRect","menuWidth","menuHeight","showEdit","showRename","showCreate","showCopyValue","showCopyTo","showHistory","showDelete","filter","Boolean","left","right","top","bottom","scrollY","innerHeight","setTimeout","handleEdit","secretValue","handleCreate","handleCopyValue","navigator","clipboard","writeText","handleCopyTo","handleHistory","handleClickOutside","contains","handleCloseAllMenus","handleScroll","buttonClass","_Teleport","style","step","fileName","envContent","isDragging","filters","analyzing","analysis","total","new","existing","invalid","empty","conflictStrategy","dryRun","importing","importResults","imported","skipped","failed","results","errors","analysisSecrets","handleFileUpload","file","files","processFile","handleDrop","dataTransfer","match","reader","FileReader","onload","result","onerror","readAsText","closeWizard","getStatusClass","getStatusLabel","getResultStatusClass","getResultStatusLabel","info","reason","onDrop","onDragover","onDragenter","onDragleave","onChange","accept","$refs","fileInput","click","_hoisted_13","for","_hoisted_26","_hoisted_27","_hoisted_28","_hoisted_29","_hoisted_30","_hoisted_31","_hoisted_32","_hoisted_33","_hoisted_34","_hoisted_35","_hoisted_36","_hoisted_37","_hoisted_38","_hoisted_39","_hoisted_40","revision","_hoisted_41","_hoisted_42","_hoisted_43","_hoisted_44","selectedFormat","filename","formats","secretCount","defaultFilename","Date","toISOString","downloadSecrets","jsonData","escapeCsvField","modified","String","replace","formatEnvValue","blob","Blob","url","URL","createObjectURL","link","createElement","href","download","appendChild","removeChild","revokeObjectURL","field","fmt","menuOpen","showImportWizard","showExportModal","handleImported","button","menu","onBeforeUnmount","ImportWizard","onImported","onClose","ExportModal","useVault","defaultVault","isDefault","_b","defaultStage","default_stage","loadVaults","loadStages","loadAll","vaultsRes","stagesRes","settingsRes","Promise","all","loadVaultData","allSecrets","fetchSecrets","localStorage","getItem","searchQuery","searchInput","unmaskAll","unmaskedKeys","Set","showAddDialog","editingSecret","renamingSecret","copyingSecret","historySecret","deletingSecret","toLowerCase","keyMatches","valueMatches","cleanupModalHandler","editSecret","handleSecretSaveSuccess","closeDialog","showRenameDialog","showCopyToStageDialog","showHistoryDialog","showDeleteDialog","handleDeleteSuccess","handleRenameSuccess","handleCopyToStage","default_vault","setItem","loadVaultsAndStages","focus","VaultStageSelector","TableActionsMenu","SecretValue","has","onToggle","delete","add","SecretActionsMenu","onEdit","onRename","onCopyValue","onCopyTo","onHistory","onDelete","onRefresh","SecretDialog","onSuccess","RenameDialog","CopyToStageDialog","onCopy","HistoryDialog","DeleteConfirmDialog","availableVaults","availableStages","selectedCombinations","fullDiffMatrix","unmaskedRows","showCombinationsDropdown","activeCellMenu","menuPosition","activeMenuData","copyingSecretStage","copyTarget","activeColumns","map","newVal","deep","diffMatrix","filteredDiff","vaultData","Object","entries","hasSelectedCombination","filteredVaultData","matchesSearch","stageData","filteredStageData","keys","sortedKeys","sort","a","b","localeCompare","getRowClass","hover","values","totalExpected","totalFound","column","getSecretValue","size","getRowStatus","loadDiff","diff","getCellClass","getMaskedValue","isNew","executeCopy","selectAll","c","selectNone","savedSelections","saved","parse","some","loadInitialData","cx","cy","r","toggleRowMask","onCreate","_c","confirm","cancel","__expose","open","close","confirmText","activeTab","namespace","templatePath","showVaultModal","editingVault","vaultForm","driver","scope","verifying","showVerificationModal","verificationResults","vaultToDelete","deleteVaultModal","newStage","stageToDelete","deleteStageModal","serverUrl","location","origin","getVaultDisplayName","getDriverDefaults","secretsmanager","ssm","onDriverChange","defaults","saveGeneralSettings","template_path","confirmDeleteVault","closeVaultModal","saveVault","findIndex","verifyAllVaults","failedVaults","_","confirmDeleteStage","_vModelSelect","editVault","_hoisted_45","_hoisted_47","_hoisted_48","_hoisted_49","_vModelCheckbox","_hoisted_50","_hoisted_51","_hoisted_52","_hoisted_53","vaultName","_hoisted_54","_hoisted_55","permissions","_hoisted_56","permission","_hoisted_57","_hoisted_58","_hoisted_59","_hoisted_60","_hoisted_61","DeleteConfirmationModal","onConfirm","showToast","selectedStage","preview","generatingPreview","creating","templateExists","copied","checkExistingTemplate","templates","t","generatePreview","createTemplate","copyPreview","placeholders","filteredPlaceholders","item","loadPlaceholders","onKeydown","selectPlaceholder","editorRef","saving","validating","originalContent","templateData","validationErrors","showPlaceholderSelector","isModified","lineNumbers","lines","Array","from","i","saveTemplate","validateTemplate","valid","warnings","unusedCount","w","line","testTemplate","insertPlaceholder","onPlaceholderSelect","textarea","start","selectionStart","end","selectionEnd","text","newText","substring","formatContent","formatted","lastWasEmpty","trimmed","startsWith","valueParts","updatePlaceholders","regex","found","exec","loadTemplate","onInput","spellcheck","_createTextVNode","PlaceholderSelector","onSelect","hasRun","validationResult","unusedSecrets","placeholderCount","otherStages","runValidation","resetTest","warning","processing","hasProcessed","missingStrategy","processedCount","output","count","skippedCount","processTemplate","validation","resetProcess","copyOutput","downloadOutput","errorCount","routes","redirect","component","SecretsTable","showCreateModal","editingTemplate","testingTemplate","processingTemplate","loadTemplates","onTemplateCreated","onTemplateSaved","formatSize","bytes","Math","floor","log","round","pow","date","minutes","hours","days","toLocaleDateString","stageDisplay","lastModified","editTemplate","deleteTemplate","CreateTemplateModal","onCreated","TemplateEditorModal","onSaved","TemplateTesterModal","TemplateProcessorModal","DiffView","SettingsView","router","createRouter","createWebHashHistory","createApp","App","use","mount"],"mappings":"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"}